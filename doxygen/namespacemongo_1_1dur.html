<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::dur Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('namespacemongo_1_1dur.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mongo::dur Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1Already.html">Already</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmap to remember things we have already marked for journaling.  <a href="classmongo_1_1dur_1_1Already.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1BufferGuard.html">BufferGuard</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used inside the journal writer thread to ensure that used buffers are cleaned up properly.  <a href="classmongo_1_1dur_1_1BufferGuard.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1BufReaderUnitTest.html">BufReaderUnitTest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1BufReaderY.html">BufReaderY</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1CommitJob.html">CommitJob</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracks all write operations on the private view so they can be journaled.  <a href="classmongo_1_1dur_1_1CommitJob.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1DropDbOp.html">DropDbOp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">record drop of a database  <a href="classmongo_1_1dur_1_1DropDbOp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1DurableInterface.html">DurableInterface</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1DurOp.html">DurOp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classmongo_1_1dur_1_1DurOp.html" title="DurOp - Operations we journal that aren&#39;t just basic writes.">DurOp</a> - Operations we journal that aren't just basic writes.  <a href="classmongo_1_1dur_1_1DurOp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1FileCreatedOp.html">FileCreatedOp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">indicates creation of a new file  <a href="classmongo_1_1dur_1_1FileCreatedOp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1JDbContext.html">JDbContext</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">declares "the next entry(s) are for this database / file path prefix"  <a href="structmongo_1_1dur_1_1JDbContext.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1JEntry.html">JEntry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">an individual write operation within a group commit section.  <a href="structmongo_1_1dur_1_1JEntry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1JHeader.html">JHeader</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">beginning header for a journal/j._&lt;n&gt; file there is nothing important int this header at this time.  <a href="structmongo_1_1dur_1_1JHeader.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1Journal.html">Journal</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">the writeahead journal for durability  <a href="classmongo_1_1dur_1_1Journal.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalSectionIterator.html">JournalSectionIterator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">read through the memory mapped data of a journal file (journal/j._&lt;n&gt; file) throws  <a href="classmongo_1_1dur_1_1JournalSectionIterator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html">JournalWriter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manages the thread and queues used for writing the journal to disk and notify parties with are waiting on the write concern.  <a href="classmongo_1_1dur_1_1JournalWriter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1JSectFooter.html">JSectFooter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">group commit section footer.  <a href="structmongo_1_1dur_1_1JSectFooter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">"Section" header.  <a href="structmongo_1_1dur_1_1JSectHeader.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1LSNFile.html">LSNFile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">"last sequence number"  <a href="structmongo_1_1dur_1_1LSNFile.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1ParsedJournalEntry.html">ParsedJournalEntry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1RecoveryJob.html">RecoveryJob</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">call <a class="el" href="classmongo_1_1dur_1_1RecoveryJob.html#a6f50829c685fca5aa99c80d5924fb4e9">go()</a> to execute a recovery from existing journal files.  <a href="classmongo_1_1dur_1_1RecoveryJob.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1Stats.html">Stats</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">journaling stats.  <a href="structmongo_1_1dur_1_1Stats.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1dur_1_1WriteIntent.html">WriteIntent</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declaration of an intent to write to a region of a memory mapped view.  <a href="structmongo_1_1dur_1_1WriteIntent.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac094574385ece69889ba914b440fe776"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; std::shared_ptr&lt; <a class="el" href="classmongo_1_1dur_1_1DurOp.html">DurOp</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#ac094574385ece69889ba914b440fe776">DurOpsVector</a></td></tr>
<tr class="separator:ac094574385ece69889ba914b440fe776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b98f38b9ecea8d9717195158fac89a"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="structmongo_1_1dur_1_1WriteIntent.html">WriteIntent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#aa4b98f38b9ecea8d9717195158fac89a">WriteIntentsVector</a></td></tr>
<tr class="separator:aa4b98f38b9ecea8d9717195158fac89a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7df5f0f2d291fe2dfe8ce3b300331a6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a7df5f0f2d291fe2dfe8ce3b300331a6a">PREPLOGBUFFER</a> (<a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a> &amp;outHeader, <a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;outBuffer, ClockSource *cs, int64_t serverStartMs)</td></tr>
<tr class="separator:a7df5f0f2d291fe2dfe8ce3b300331a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ce4bb364727a55b8ef70e715720a8d9"><td class="memItemLeft" align="right" valign="top">boost::filesystem::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a2ce4bb364727a55b8ef70e715720a8d9">getJournalDir</a> ()</td></tr>
<tr class="separator:a2ce4bb364727a55b8ef70e715720a8d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a553d6817979750ec607fe96753f7839b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a553d6817979750ec607fe96753f7839b">preallocateFiles</a> ()</td></tr>
<tr class="separator:a553d6817979750ec607fe96753f7839b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8603901cd02de041da2e4852005b7e4e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a8603901cd02de041da2e4852005b7e4e">durThread</a> (ClockSource *cs, int64_t serverStartMs)</td></tr>
<tr class="memdesc:a8603901cd02de041da2e4852005b7e4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main durability thread loop.  <a href="#a8603901cd02de041da2e4852005b7e4e">More...</a><br /></td></tr>
<tr class="separator:a8603901cd02de041da2e4852005b7e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235b9cb4befd0156e48d5f479cadb08e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a235b9cb4befd0156e48d5f479cadb08e">remapPrivateView</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, double fraction)</td></tr>
<tr class="memdesc:a235b9cb4befd0156e48d5f479cadb08e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remaps the private view from the shared view so that it does not consume too much copy-on-write/swap space.  <a href="#a235b9cb4befd0156e48d5f479cadb08e">More...</a><br /></td></tr>
<tr class="separator:a235b9cb4befd0156e48d5f479cadb08e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2841b9cd216a75644b599ca3150386"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a2a2841b9cd216a75644b599ca3150386">startup</a> (ClockSource *cs, int64_t serverStartMs)</td></tr>
<tr class="memdesc:a2a2841b9cd216a75644b599ca3150386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked at server startup.  <a href="#a2a2841b9cd216a75644b599ca3150386">More...</a><br /></td></tr>
<tr class="separator:a2a2841b9cd216a75644b599ca3150386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b2b5a0f715d5008371bf72f8b880fd4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a5b2b5a0f715d5008371bf72f8b880fd4">setJournalListener</a> (<a class="el" href="classmongo_1_1JournalListener.html">JournalListener</a> *jl)</td></tr>
<tr class="separator:a5b2b5a0f715d5008371bf72f8b880fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfad772743f3ebb41ccfe323b123052a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1JournalListener.html">JournalListener</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#acfad772743f3ebb41ccfe323b123052a">getJournalListener</a> ()</td></tr>
<tr class="separator:acfad772743f3ebb41ccfe323b123052a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27481195fa19a0b31326da11c2ff01f"><td class="memItemLeft" align="right" valign="top">MONGO_INITIALIZER()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#aa27481195fa19a0b31326da11c2ff01f">InitializeJournalingParams</a> (InitializerContext *<a class="el" href="namespacemongo.html#a1311a60cda82aef10a9d234d3710dad2">context</a>)</td></tr>
<tr class="separator:aa27481195fa19a0b31326da11c2ff01f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f3505588d1d43a8be79357ba9f1252"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a21f3505588d1d43a8be79357ba9f1252">MONGO_STATIC_ASSERT</a> (sizeof(Checksum)==16)</td></tr>
<tr class="separator:a21f3505588d1d43a8be79357ba9f1252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b9c5e3e482ff9188923bb5506e34b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#ad3b9c5e3e482ff9188923bb5506e34b7">MONGO_STATIC_ASSERT</a> (sizeof(<a class="el" href="structmongo_1_1dur_1_1JHeader.html">JHeader</a>)==8192)</td></tr>
<tr class="separator:ad3b9c5e3e482ff9188923bb5506e34b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e3b6ae92866117c4b4be6586bcfd184"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a7e3b6ae92866117c4b4be6586bcfd184">MONGO_STATIC_ASSERT</a> (sizeof(<a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a>)==20)</td></tr>
<tr class="separator:a7e3b6ae92866117c4b4be6586bcfd184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a0e2fa4cf9a3b61e8f014745924d63d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a6a0e2fa4cf9a3b61e8f014745924d63d">MONGO_STATIC_ASSERT</a> (sizeof(<a class="el" href="structmongo_1_1dur_1_1JSectFooter.html">JSectFooter</a>)==32)</td></tr>
<tr class="separator:a6a0e2fa4cf9a3b61e8f014745924d63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4289d2fe1b397394163ae00b66f74197"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a4289d2fe1b397394163ae00b66f74197">MONGO_STATIC_ASSERT</a> (sizeof(<a class="el" href="structmongo_1_1dur_1_1JEntry.html">JEntry</a>)==12)</td></tr>
<tr class="separator:a4289d2fe1b397394163ae00b66f74197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4643abfee13becb4264771a8059a8b37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a4643abfee13becb4264771a8059a8b37">MONGO_STATIC_ASSERT</a> (sizeof(<a class="el" href="structmongo_1_1dur_1_1LSNFile.html">LSNFile</a>)==88)</td></tr>
<tr class="separator:a4643abfee13becb4264771a8059a8b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ec4a0eab95513b9d775093b1e515b3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a9ec4a0eab95513b9d775093b1e515b3a">removeOldJournalFile</a> (boost::filesystem::path p)</td></tr>
<tr class="separator:a9ec4a0eab95513b9d775093b1e515b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a888f508ce052d6be7a6a2ea59f5932"><td class="memItemLeft" align="right" valign="top">boost::filesystem::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a4a888f508ce052d6be7a6a2ea59f5932">lsnPath</a> ()</td></tr>
<tr class="separator:a4a888f508ce052d6be7a6a2ea59f5932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e48a2c6df8575ef67131acc7d07a7ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a3e48a2c6df8575ef67131acc7d07a7ef">journalingFailure</a> (const char *msg)</td></tr>
<tr class="memdesc:a3e48a2c6df8575ef67131acc7d07a7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">this should be called when something really bad happens so that we can flag appropriately  <a href="#a3e48a2c6df8575ef67131acc7d07a7ef">More...</a><br /></td></tr>
<tr class="separator:a3e48a2c6df8575ef67131acc7d07a7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d0d3b834b55f5571cbc485513173692"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a1d0d3b834b55f5571cbc485513173692">haveJournalFiles</a> (bool anyFiles)</td></tr>
<tr class="memdesc:a1d0d3b834b55f5571cbc485513173692"><td class="mdescLeft">&#160;</td><td class="mdescRight">never throws  <a href="#a1d0d3b834b55f5571cbc485513173692">More...</a><br /></td></tr>
<tr class="separator:a1d0d3b834b55f5571cbc485513173692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ebd5ab0f1765b0230583a3f32cabffc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a6ebd5ab0f1765b0230583a3f32cabffc">removeJournalFiles</a> ()</td></tr>
<tr class="memdesc:a6ebd5ab0f1765b0230583a3f32cabffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">throws  <a href="#a6ebd5ab0f1765b0230583a3f32cabffc">More...</a><br /></td></tr>
<tr class="separator:a6ebd5ab0f1765b0230583a3f32cabffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fd84e94d79e72e59f7a70e2ca95a7ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a3fd84e94d79e72e59f7a70e2ca95a7ed">journalCleanup</a> (bool log=false)</td></tr>
<tr class="memdesc:a3fd84e94d79e72e59f7a70e2ca95a7ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">at termination after db files closed &amp; fsynced also after recovery closes and removes journal files  <a href="#a3fd84e94d79e72e59f7a70e2ca95a7ed">More...</a><br /></td></tr>
<tr class="separator:a3fd84e94d79e72e59f7a70e2ca95a7ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae34a95ce4c48244252e33aa104b3dcea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#ae34a95ce4c48244252e33aa104b3dcea">_preallocateIsFaster</a> ()</td></tr>
<tr class="separator:ae34a95ce4c48244252e33aa104b3dcea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1ec01eb9459b87bf263e1408b0ac998"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#ac1ec01eb9459b87bf263e1408b0ac998">preallocateIsFaster</a> ()</td></tr>
<tr class="separator:ac1ec01eb9459b87bf263e1408b0ac998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8aa789d0006c38b58637fe5cc8616eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#af8aa789d0006c38b58637fe5cc8616eb">preallocateFile</a> (boost::filesystem::path p, unsigned long long len)</td></tr>
<tr class="separator:af8aa789d0006c38b58637fe5cc8616eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011443889f559a56ba801dc6e195d87e"><td class="memItemLeft" align="right" valign="top">boost::filesystem::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a011443889f559a56ba801dc6e195d87e">preallocPath</a> (int n)</td></tr>
<tr class="separator:a011443889f559a56ba801dc6e195d87e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84663ffea9b3080599969993c186176d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a84663ffea9b3080599969993c186176d">_preallocateFiles</a> ()</td></tr>
<tr class="separator:a84663ffea9b3080599969993c186176d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ae4b2ebb5e918b7a4e4482e2c999aaa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a1ae4b2ebb5e918b7a4e4482e2c999aaa">checkFreeSpace</a> ()</td></tr>
<tr class="separator:a1ae4b2ebb5e918b7a4e4482e2c999aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb5a8776e7c566b2a66d92e79e8a126"><td class="memItemLeft" align="right" valign="top">boost::filesystem::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#aaeb5a8776e7c566b2a66d92e79e8a126">findPrealloced</a> ()</td></tr>
<tr class="separator:aaeb5a8776e7c566b2a66d92e79e8a126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afffbfec4ad0af881d2f6e2214fc82477"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#afffbfec4ad0af881d2f6e2214fc82477">journalMakeDir</a> (ClockSource *cs, int64_t serverStartMs)</td></tr>
<tr class="memdesc:afffbfec4ad0af881d2f6e2214fc82477"><td class="mdescLeft">&#160;</td><td class="mdescRight">assure journal/ dir exists.  <a href="#afffbfec4ad0af881d2f6e2214fc82477">More...</a><br /></td></tr>
<tr class="separator:afffbfec4ad0af881d2f6e2214fc82477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6e38651fae216273514680da4941a9"><td class="memItemLeft" align="right" valign="top">unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a1b6e38651fae216273514680da4941a9">journalReadLSN</a> ()</td></tr>
<tr class="memdesc:a1b6e38651fae216273514680da4941a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">called during recovery (the error message text below assumes that)  <a href="#a1b6e38651fae216273514680da4941a9">More...</a><br /></td></tr>
<tr class="separator:a1b6e38651fae216273514680da4941a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3727cce99945d17e7ca1baea579f9ecf"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a3727cce99945d17e7ca1baea579f9ecf">generateNextSeqNumber</a> (ClockSource *cs, int64_t serverStartMs)</td></tr>
<tr class="memdesc:a3727cce99945d17e7ca1baea579f9ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the next sequence number for use in the journal, guaranteed to be greater than all prior sequence numbers.  <a href="#a3727cce99945d17e7ca1baea579f9ecf">More...</a><br /></td></tr>
<tr class="separator:a3727cce99945d17e7ca1baea579f9ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77c293b78ce37f75555b2213b3ede54e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a77c293b78ce37f75555b2213b3ede54e">setLastSeqNumberWrittenToSharedView</a> (uint64_t seqNumber)</td></tr>
<tr class="memdesc:a77c293b78ce37f75555b2213b3ede54e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs the journaling system that all writes on or before the passed in sequence number have been written to the data files' shared mmap view.  <a href="#a77c293b78ce37f75555b2213b3ede54e">More...</a><br /></td></tr>
<tr class="separator:a77c293b78ce37f75555b2213b3ede54e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a992369a3b75a3233078b480a1f15178c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a992369a3b75a3233078b480a1f15178c">notifyPreDataFileFlush</a> ()</td></tr>
<tr class="memdesc:a992369a3b75a3233078b480a1f15178c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call these before (pre) and after (post) the datafiles are flushed to disk by the <a class="el" href="classmongo_1_1DataFileSync.html" title="does background async flushes of mmapped files">DataFileSync</a> thread.  <a href="#a992369a3b75a3233078b480a1f15178c">More...</a><br /></td></tr>
<tr class="separator:a992369a3b75a3233078b480a1f15178c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ad3f424172cd5fcf12c57699c51156"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a32ad3f424172cd5fcf12c57699c51156">notifyPostDataFileFlush</a> ()</td></tr>
<tr class="separator:a32ad3f424172cd5fcf12c57699c51156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd871880b1498c4e038b950cb249abd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#acd871880b1498c4e038b950cb249abd5">WRITETOJOURNAL</a> (const <a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a> &amp;h, const <a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;uncompressed)</td></tr>
<tr class="memdesc:acd871880b1498c4e038b950cb249abd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">write (append) the buffer we have built to the journal and fsync it.  <a href="#acd871880b1498c4e038b950cb249abd5">More...</a><br /></td></tr>
<tr class="separator:acd871880b1498c4e038b950cb249abd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cbe4a8ed6f58933bf58989af9cd295c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmongo_1_1DurableMappedFile.html">DurableMappedFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a2cbe4a8ed6f58933bf58989af9cd295c">findMMF_inlock</a> (<a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> *ptr, size_t &amp;<a class="el" href="btree__interface_8cpp.html#a532a5ac60f338460e3b296ea8f17e799">ofs</a>)</td></tr>
<tr class="separator:a2cbe4a8ed6f58933bf58989af9cd295c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dfa67aa216e203f47cf35413e5ee7ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a9dfa67aa216e203f47cf35413e5ee7ed">prepBasicWrite_inlock</a> (<a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;bb, const <a class="el" href="structmongo_1_1dur_1_1WriteIntent.html">WriteIntent</a> *i, <a class="el" href="structmongo_1_1RelativePath.html">RelativePath</a> &amp;lastDbPath)</td></tr>
<tr class="memdesc:a9dfa67aa216e203f47cf35413e5ee7ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">put the basic write operation into the buffer (bb) to be journaled  <a href="#a9dfa67aa216e203f47cf35413e5ee7ed">More...</a><br /></td></tr>
<tr class="separator:a9dfa67aa216e203f47cf35413e5ee7ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f514400c02af4592d9d2778d64bca73"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a0f514400c02af4592d9d2778d64bca73">prepBasicWrites</a> (<a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;bb, const std::vector&lt; <a class="el" href="structmongo_1_1dur_1_1WriteIntent.html">WriteIntent</a> &gt; &amp;intents)</td></tr>
<tr class="memdesc:a0f514400c02af4592d9d2778d64bca73"><td class="mdescLeft">&#160;</td><td class="mdescRight">basic write ops / write intents.  <a href="#a0f514400c02af4592d9d2778d64bca73">More...</a><br /></td></tr>
<tr class="separator:a0f514400c02af4592d9d2778d64bca73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7797a60a0bd13c93c23948dcba6b2a9f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a7797a60a0bd13c93c23948dcba6b2a9f">_PREPLOGBUFFER</a> (<a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a> &amp;h, <a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;bb, ClockSource *cs, int64_t serverStartMs)</td></tr>
<tr class="memdesc:a7797a60a0bd13c93c23948dcba6b2a9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">we will build an output buffer ourself and then use O_DIRECT we could be in read lock for this caller handles locking  <a href="#a7797a60a0bd13c93c23948dcba6b2a9f">More...</a><br /></td></tr>
<tr class="separator:a7797a60a0bd13c93c23948dcba6b2a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc7ce843cbd2c565dcb36e5faffa557"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a2dc7ce843cbd2c565dcb36e5faffa557">getFiles</a> (boost::filesystem::path dir, vector&lt; boost::filesystem::path &gt; &amp;files)</td></tr>
<tr class="memdesc:a2dc7ce843cbd2c565dcb36e5faffa557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get journal filenames, in order.  <a href="#a2dc7ce843cbd2c565dcb36e5faffa557">More...</a><br /></td></tr>
<tr class="separator:a2dc7ce843cbd2c565dcb36e5faffa557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28ff434cc98a48f5a0faba3c79aff90"><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#ac28ff434cc98a48f5a0faba3c79aff90">fileName</a> (const char *dbName, int fileNo)</td></tr>
<tr class="separator:ac28ff434cc98a48f5a0faba3c79aff90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d866ce8da7b6408761984aa433bca76"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a9d866ce8da7b6408761984aa433bca76">_recover</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>)</td></tr>
<tr class="separator:a9d866ce8da7b6408761984aa433bca76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43afce2fd46ca142ecc0a5cbd5f3c432"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a43afce2fd46ca142ecc0a5cbd5f3c432">replayJournalFilesAtStartup</a> ()</td></tr>
<tr class="memdesc:a43afce2fd46ca142ecc0a5cbd5f3c432"><td class="mdescLeft">&#160;</td><td class="mdescRight">recover from a crash called during startup throws on error  <a href="#a43afce2fd46ca142ecc0a5cbd5f3c432">More...</a><br /></td></tr>
<tr class="separator:a43afce2fd46ca142ecc0a5cbd5f3c432"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a37f4ca69ee5f6308626a3cff2c05f12c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmongo_1_1dur_1_1Stats.html">Stats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a37f4ca69ee5f6308626a3cff2c05f12c">stats</a></td></tr>
<tr class="separator:a37f4ca69ee5f6308626a3cff2c05f12c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ef1c0ddcc568785d559696f732196de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1dur_1_1CommitJob.html">CommitJob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a2ef1c0ddcc568785d559696f732196de">commitJob</a></td></tr>
<tr class="separator:a2ef1c0ddcc568785d559696f732196de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd6d1085270a70c5c718fd55261fab5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1dur_1_1DurableInterface.html">DurableInterface</a> *<a class="el" href="classmongo_1_1dur_1_1DurableInterface.html#aea32310b97d037e37daeb1b3d4d84111">DurableInterface::_impl</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a2cd6d1085270a70c5c718fd55261fab5">nonDurableImpl</a></td></tr>
<tr class="separator:a2cd6d1085270a70c5c718fd55261fab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae65eb1cf3620303f2bd05f53927b4a29"><td class="memItemLeft" align="right" valign="top">const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#ae65eb1cf3620303f2bd05f53927b4a29">UncommittedBytesLimit</a> = (sizeof(<a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>*) == 4) ? 50 * 1024 * 1024 : 512 * 1024 * 1024</td></tr>
<tr class="separator:ae65eb1cf3620303f2bd05f53927b4a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc12491fe1889308dd03da82ce999f0"><td class="memItemLeft" align="right" valign="top">unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a5bc12491fe1889308dd03da82ce999f0">DataLimitPerJournalFile</a></td></tr>
<tr class="separator:a5bc12491fe1889308dd03da82ce999f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac1b5f3bd3447603799f5f01801b99f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#aac1b5f3bd3447603799f5f01801b99f6">usingPreallocate</a> = false</td></tr>
<tr class="separator:aac1b5f3bd3447603799f5f01801b99f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5493b535527b9a767c221639a6e08f81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1dur_1_1Journal.html">Journal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a5493b535527b9a767c221639a6e08f81">j</a></td></tr>
<tr class="separator:a5493b535527b9a767c221639a6e08f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af1567ff9292c5bbc4a5b548173a6d0"><td class="memItemLeft" align="right" valign="top">const unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a9af1567ff9292c5bbc4a5b548173a6d0">LsnShutdownSentinel</a> = ~((unsigned long long)0)</td></tr>
<tr class="separator:a9af1567ff9292c5bbc4a5b548173a6d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85f53498d36a82a8d1dee4cb7ab9341"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#ae85f53498d36a82a8d1dee4cb7ab9341">okToCleanUp</a> = false</td></tr>
<tr class="memdesc:ae85f53498d36a82a8d1dee4cb7ab9341"><td class="mdescLeft">&#160;</td><td class="mdescRight">at clean shutdown  <a href="#ae85f53498d36a82a8d1dee4cb7ab9341">More...</a><br /></td></tr>
<tr class="separator:ae85f53498d36a82a8d1dee4cb7ab9341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4360ff4305fb66b57b90112d61c92b02"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a4360ff4305fb66b57b90112d61c92b02">NUM_PREALLOC_FILES</a> = 3</td></tr>
<tr class="separator:a4360ff4305fb66b57b90112d61c92b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8855fa71fe7af0c8e3f477f71ecf3066"><td class="memItemLeft" align="right" valign="top">const long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a8855fa71fe7af0c8e3f477f71ecf3066">ExtraKeepTimeMs</a> = 10000</td></tr>
<tr class="separator:a8855fa71fe7af0c8e3f477f71ecf3066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af084f788bd9b208e8f4aff9580c48852"><td class="memItemLeft" align="right" valign="top">const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#af084f788bd9b208e8f4aff9580c48852">Alignment</a> = 8192</td></tr>
<tr class="separator:af084f788bd9b208e8f4aff9580c48852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27e5e4ed71c6f1586a42c7c5b52e266d"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a27e5e4ed71c6f1586a42c7c5b52e266d">RelativePath</a> = <a class="el" href="structmongo_1_1RelativePath.html#a6799246341a729c0307b36627661c55e">RelativePath::fromRelativePath</a>(&quot;local&quot;)</td></tr>
<tr class="separator:a27e5e4ed71c6f1586a42c7c5b52e266d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72246ae393b2607c6b02c7b9ad2b76d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1dur_1_1BufReaderUnitTest.html">mongo::dur::BufReaderUnitTest</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemongo_1_1dur.html#a72246ae393b2607c6b02c7b9ad2b76d7">brunittest</a></td></tr>
<tr class="separator:a72246ae393b2607c6b02c7b9ad2b76d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ac094574385ece69889ba914b440fe776"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac094574385ece69889ba914b440fe776">&#9670;&nbsp;</a></span>DurOpsVector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;std::shared_ptr&lt;<a class="el" href="classmongo_1_1dur_1_1DurOp.html">DurOp</a>&gt; &gt; <a class="el" href="namespacemongo_1_1dur.html#ac094574385ece69889ba914b440fe776">mongo::dur::DurOpsVector</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4b98f38b9ecea8d9717195158fac89a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b98f38b9ecea8d9717195158fac89a">&#9670;&nbsp;</a></span>WriteIntentsVector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="structmongo_1_1dur_1_1WriteIntent.html">WriteIntent</a>&gt; <a class="el" href="namespacemongo_1_1dur.html#aa4b98f38b9ecea8d9717195158fac89a">mongo::dur::WriteIntentsVector</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a84663ffea9b3080599969993c186176d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84663ffea9b3080599969993c186176d">&#9670;&nbsp;</a></span>_preallocateFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::_preallocateFiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae34a95ce4c48244252e33aa104b3dcea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae34a95ce4c48244252e33aa104b3dcea">&#9670;&nbsp;</a></span>_preallocateIsFaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::dur::_preallocateIsFaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7797a60a0bd13c93c23948dcba6b2a9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7797a60a0bd13c93c23948dcba6b2a9f">&#9670;&nbsp;</a></span>_PREPLOGBUFFER()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::_PREPLOGBUFFER </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>bb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClockSource *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>serverStartMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>we will build an output buffer ourself and then use O_DIRECT we could be in read lock for this caller handles locking </p>
<dl class="section return"><dt>Returns</dt><dd>partially populated sectheader and _ab set </dd></dl>

</div>
</div>
<a id="a9d866ce8da7b6408761984aa433bca76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d866ce8da7b6408761984aa433bca76">&#9670;&nbsp;</a></span>_recover()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::_recover </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1ae4b2ebb5e918b7a4e4482e2c999aaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ae4b2ebb5e918b7a4e4482e2c999aaa">&#9670;&nbsp;</a></span>checkFreeSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::checkFreeSpace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8603901cd02de041da2e4852005b7e4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8603901cd02de041da2e4852005b7e4e">&#9670;&nbsp;</a></span>durThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::durThread </td>
          <td>(</td>
          <td class="paramtype">ClockSource *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>serverStartMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main durability thread loop. </p>
<p>There is a single instance of this function running. </p>

</div>
</div>
<a id="ac28ff434cc98a48f5a0faba3c79aff90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac28ff434cc98a48f5a0faba3c79aff90">&#9670;&nbsp;</a></span>fileName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static string mongo::dur::fileName </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dbName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fileNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2cbe4a8ed6f58933bf58989af9cd295c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cbe4a8ed6f58933bf58989af9cd295c">&#9670;&nbsp;</a></span>findMMF_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmongo_1_1DurableMappedFile.html">DurableMappedFile</a>* mongo::dur::findMMF_inlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaeb5a8776e7c566b2a66d92e79e8a126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeb5a8776e7c566b2a66d92e79e8a126">&#9670;&nbsp;</a></span>findPrealloced()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::filesystem::path mongo::dur::findPrealloced </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3727cce99945d17e7ca1baea579f9ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3727cce99945d17e7ca1baea579f9ecf">&#9670;&nbsp;</a></span>generateNextSeqNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t mongo::dur::generateNextSeqNumber </td>
          <td>(</td>
          <td class="paramtype">ClockSource *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>serverStartMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates the next sequence number for use in the journal, guaranteed to be greater than all prior sequence numbers. </p>

</div>
</div>
<a id="a2dc7ce843cbd2c565dcb36e5faffa557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dc7ce843cbd2c565dcb36e5faffa557">&#9670;&nbsp;</a></span>getFiles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::getFiles </td>
          <td>(</td>
          <td class="paramtype">boost::filesystem::path&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; boost::filesystem::path &gt; &amp;&#160;</td>
          <td class="paramname"><em>files</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get journal filenames, in order. </p>
<p>Throws if unexpected content found. </p>

</div>
</div>
<a id="a2ce4bb364727a55b8ef70e715720a8d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ce4bb364727a55b8ef70e715720a8d9">&#9670;&nbsp;</a></span>getJournalDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::filesystem::path mongo::dur::getJournalDir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfad772743f3ebb41ccfe323b123052a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfad772743f3ebb41ccfe323b123052a">&#9670;&nbsp;</a></span>getJournalListener()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1JournalListener.html">JournalListener</a> * mongo::dur::getJournalListener </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1d0d3b834b55f5571cbc485513173692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d0d3b834b55f5571cbc485513173692">&#9670;&nbsp;</a></span>haveJournalFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::dur::haveJournalFiles </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>anyFiles</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>never throws </p>
<p>never throws.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">anyFiles</td><td>by default we only look at j._* files. If anyFiles is true, return true if there are any files in the journal directory. checkForUncleanShutdown() uses this to make sure that the journal directory is mounted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if journal dir is not empty</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">anyFiles</td><td>by default we only look at j._* files. If anyFiles is true, return true if there are any files in the journal directory. checkForUncleanShutdown() uses this to make sure that the journal directory is mounted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if there are any journal files in the journal dir. </dd></dl>

</div>
</div>
<a id="aa27481195fa19a0b31326da11c2ff01f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27481195fa19a0b31326da11c2ff01f">&#9670;&nbsp;</a></span>InitializeJournalingParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MONGO_INITIALIZER() mongo::dur::InitializeJournalingParams </td>
          <td>(</td>
          <td class="paramtype">InitializerContext *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3fd84e94d79e72e59f7a70e2ca95a7ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fd84e94d79e72e59f7a70e2ca95a7ed">&#9670;&nbsp;</a></span>journalCleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::journalCleanup </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>log</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>at termination after db files closed &amp; fsynced also after recovery closes and removes journal files </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log</td><td>report in log that we are cleaning up if we actually do any work </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3e48a2c6df8575ef67131acc7d07a7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e48a2c6df8575ef67131acc7d07a7ef">&#9670;&nbsp;</a></span>journalingFailure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::journalingFailure </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this should be called when something really bad happens so that we can flag appropriately </p>
<p>flag that something has gone wrong during writing to the journal (not for recovery mode) </p>
<p>todo: (1) don't log too much (2) make an indicator in the journal dir that something bad happened. (2b) refuse to do a recovery startup if that is there without manual override.</p>

</div>
</div>
<a id="afffbfec4ad0af881d2f6e2214fc82477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afffbfec4ad0af881d2f6e2214fc82477">&#9670;&nbsp;</a></span>journalMakeDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::journalMakeDir </td>
          <td>(</td>
          <td class="paramtype">ClockSource *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>serverStartMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>assure journal/ dir exists. </p>
<p>throws. call during startup.</p>
<p>throws </p>

</div>
</div>
<a id="a1b6e38651fae216273514680da4941a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b6e38651fae216273514680da4941a9">&#9670;&nbsp;</a></span>journalReadLSN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long mongo::dur::journalReadLSN </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>called during recovery (the error message text below assumes that) </p>
<p>read lsn from disk from the last run before doing recovery </p>

</div>
</div>
<a id="a4a888f508ce052d6be7a6a2ea59f5932"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a888f508ce052d6be7a6a2ea59f5932">&#9670;&nbsp;</a></span>lsnPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::filesystem::path mongo::dur::lsnPath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a21f3505588d1d43a8be79357ba9f1252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f3505588d1d43a8be79357ba9f1252">&#9670;&nbsp;</a></span>MONGO_STATIC_ASSERT() <span class="overload">[1/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::MONGO_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(Checksum)&#160;</td>
          <td class="paramname"> = <code>=16</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad3b9c5e3e482ff9188923bb5506e34b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b9c5e3e482ff9188923bb5506e34b7">&#9670;&nbsp;</a></span>MONGO_STATIC_ASSERT() <span class="overload">[2/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::MONGO_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(<a class="el" href="structmongo_1_1dur_1_1JHeader.html">JHeader</a>)&#160;</td>
          <td class="paramname"> = <code>=8192</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7e3b6ae92866117c4b4be6586bcfd184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e3b6ae92866117c4b4be6586bcfd184">&#9670;&nbsp;</a></span>MONGO_STATIC_ASSERT() <span class="overload">[3/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::MONGO_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(<a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a>)&#160;</td>
          <td class="paramname"> = <code>=20</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6a0e2fa4cf9a3b61e8f014745924d63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a0e2fa4cf9a3b61e8f014745924d63d">&#9670;&nbsp;</a></span>MONGO_STATIC_ASSERT() <span class="overload">[4/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::MONGO_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(<a class="el" href="structmongo_1_1dur_1_1JSectFooter.html">JSectFooter</a>)&#160;</td>
          <td class="paramname"> = <code>=32</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4289d2fe1b397394163ae00b66f74197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4289d2fe1b397394163ae00b66f74197">&#9670;&nbsp;</a></span>MONGO_STATIC_ASSERT() <span class="overload">[5/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::MONGO_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(<a class="el" href="structmongo_1_1dur_1_1JEntry.html">JEntry</a>)&#160;</td>
          <td class="paramname"> = <code>=12</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4643abfee13becb4264771a8059a8b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4643abfee13becb4264771a8059a8b37">&#9670;&nbsp;</a></span>MONGO_STATIC_ASSERT() <span class="overload">[6/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::MONGO_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(<a class="el" href="structmongo_1_1dur_1_1LSNFile.html">LSNFile</a>)&#160;</td>
          <td class="paramname"> = <code>=88</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a32ad3f424172cd5fcf12c57699c51156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ad3f424172cd5fcf12c57699c51156">&#9670;&nbsp;</a></span>notifyPostDataFileFlush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::notifyPostDataFileFlush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a992369a3b75a3233078b480a1f15178c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a992369a3b75a3233078b480a1f15178c">&#9670;&nbsp;</a></span>notifyPreDataFileFlush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::notifyPreDataFileFlush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call these before (pre) and after (post) the datafiles are flushed to disk by the <a class="el" href="classmongo_1_1DataFileSync.html" title="does background async flushes of mmapped files">DataFileSync</a> thread. </p>
<p>These should not be called for any other flushes. </p>

</div>
</div>
<a id="af8aa789d0006c38b58637fe5cc8616eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8aa789d0006c38b58637fe5cc8616eb">&#9670;&nbsp;</a></span>preallocateFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::preallocateFile </td>
          <td>(</td>
          <td class="paramtype">boost::filesystem::path&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long long&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a553d6817979750ec607fe96753f7839b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a553d6817979750ec607fe96753f7839b">&#9670;&nbsp;</a></span>preallocateFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::preallocateFiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac1ec01eb9459b87bf263e1408b0ac998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1ec01eb9459b87bf263e1408b0ac998">&#9670;&nbsp;</a></span>preallocateIsFaster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::dur::preallocateIsFaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a011443889f559a56ba801dc6e195d87e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011443889f559a56ba801dc6e195d87e">&#9670;&nbsp;</a></span>preallocPath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::filesystem::path mongo::dur::preallocPath </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9dfa67aa216e203f47cf35413e5ee7ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dfa67aa216e203f47cf35413e5ee7ed">&#9670;&nbsp;</a></span>prepBasicWrite_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::prepBasicWrite_inlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>bb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1dur_1_1WriteIntent.html">WriteIntent</a> *&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmongo_1_1RelativePath.html">RelativePath</a> &amp;&#160;</td>
          <td class="paramname"><em>lastDbPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>put the basic write operation into the buffer (bb) to be journaled </p>

</div>
</div>
<a id="a0f514400c02af4592d9d2778d64bca73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f514400c02af4592d9d2778d64bca73">&#9670;&nbsp;</a></span>prepBasicWrites()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::prepBasicWrites </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>bb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structmongo_1_1dur_1_1WriteIntent.html">WriteIntent</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>intents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>basic write ops / write intents. </p>
<p>note there is no particular order to these : if we have two writes to the same location during the group commit interval, it is likely (although not assured) that it is journaled here once. </p>

</div>
</div>
<a id="a7df5f0f2d291fe2dfe8ce3b300331a6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7df5f0f2d291fe2dfe8ce3b300331a6a">&#9670;&nbsp;</a></span>PREPLOGBUFFER()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::PREPLOGBUFFER </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>outHeader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>outBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ClockSource *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>serverStartMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a235b9cb4befd0156e48d5f479cadb08e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a235b9cb4befd0156e48d5f479cadb08e">&#9670;&nbsp;</a></span>remapPrivateView()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::remapPrivateView </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>fraction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remaps the private view from the shared view so that it does not consume too much copy-on-write/swap space. </p>
<p>Must only be called after the in-memory journal has been flushed to disk and applied on top of the shared view.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fraction</td><td>Value between (0, 1] indicating what fraction of the memory to remap. Remapping too much or too frequently incurs copy-on-write page fault cost. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ebd5ab0f1765b0230583a3f32cabffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ebd5ab0f1765b0230583a3f32cabffc">&#9670;&nbsp;</a></span>removeJournalFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::removeJournalFiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>throws </p>

</div>
</div>
<a id="a9ec4a0eab95513b9d775093b1e515b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ec4a0eab95513b9d775093b1e515b3a">&#9670;&nbsp;</a></span>removeOldJournalFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::removeOldJournalFile </td>
          <td>(</td>
          <td class="paramtype">boost::filesystem::path&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a43afce2fd46ca142ecc0a5cbd5f3c432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43afce2fd46ca142ecc0a5cbd5f3c432">&#9670;&nbsp;</a></span>replayJournalFilesAtStartup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::replayJournalFilesAtStartup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>recover from a crash called during startup throws on error </p>

</div>
</div>
<a id="a5b2b5a0f715d5008371bf72f8b880fd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b2b5a0f715d5008371bf72f8b880fd4">&#9670;&nbsp;</a></span>setJournalListener()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::setJournalListener </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1JournalListener.html">JournalListener</a> *&#160;</td>
          <td class="paramname"><em>jl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a77c293b78ce37f75555b2213b3ede54e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77c293b78ce37f75555b2213b3ede54e">&#9670;&nbsp;</a></span>setLastSeqNumberWrittenToSharedView()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::setLastSeqNumberWrittenToSharedView </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>seqNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Informs the journaling system that all writes on or before the passed in sequence number have been written to the data files' shared mmap view. </p>

</div>
</div>
<a id="a2a2841b9cd216a75644b599ca3150386"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a2841b9cd216a75644b599ca3150386">&#9670;&nbsp;</a></span>startup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::startup </td>
          <td>(</td>
          <td class="paramtype">ClockSource *&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>serverStartMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked at server startup. </p>
<p>Called during startup to startup the durability module.</p>
<p>Recovers the database by replaying journal files and then starts the durability thread.</p>
<p>Does nothing if storageGlobalParams.dur is false </p>

</div>
</div>
<a id="acd871880b1498c4e038b950cb249abd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd871880b1498c4e038b950cb249abd5">&#9670;&nbsp;</a></span>WRITETOJOURNAL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::WRITETOJOURNAL </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1dur_1_1JSectHeader.html">JSectHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1AlignedBuilder.html">AlignedBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>uncompressed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write (append) the buffer we have built to the journal and fsync it. </p>
<p>Writes the specified uncompressed buffer to the journal.</p>
<p>outside of dbMutex lock as this could be slow. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uncompressed</td><td>- a buffer that will be written to the journal after compression will not return until on disk </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af084f788bd9b208e8f4aff9580c48852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af084f788bd9b208e8f4aff9580c48852">&#9670;&nbsp;</a></span>Alignment</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned mongo::dur::Alignment = 8192</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a72246ae393b2607c6b02c7b9ad2b76d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72246ae393b2607c6b02c7b9ad2b76d7">&#9670;&nbsp;</a></span>brunittest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> <a class="el" href="classmongo_1_1dur_1_1BufReaderUnitTest.html">mongo::dur::BufReaderUnitTest</a>  mongo::dur::brunittest</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ef1c0ddcc568785d559696f732196de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef1c0ddcc568785d559696f732196de">&#9670;&nbsp;</a></span>commitJob</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1dur_1_1CommitJob.html">CommitJob</a> mongo::dur::commitJob</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5bc12491fe1889308dd03da82ce999f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc12491fe1889308dd03da82ce999f0">&#9670;&nbsp;</a></span>DataLimitPerJournalFile</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long mongo::dur::DataLimitPerJournalFile</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">    (<span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*) == 4) ? 256 * 1024 * 1024 : 1 * 1024 * 1024 * 1024</div></div><!-- fragment -->
</div>
</div>
<a id="a8855fa71fe7af0c8e3f477f71ecf3066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8855fa71fe7af0c8e3f477f71ecf3066">&#9670;&nbsp;</a></span>ExtraKeepTimeMs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const long long mongo::dur::ExtraKeepTimeMs = 10000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5493b535527b9a767c221639a6e08f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5493b535527b9a767c221639a6e08f81">&#9670;&nbsp;</a></span>j</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1dur_1_1Journal.html">Journal</a> mongo::dur::j</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9af1567ff9292c5bbc4a5b548173a6d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9af1567ff9292c5bbc4a5b548173a6d0">&#9670;&nbsp;</a></span>LsnShutdownSentinel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned long long mongo::dur::LsnShutdownSentinel = ~((unsigned long long)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2cd6d1085270a70c5c718fd55261fab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cd6d1085270a70c5c718fd55261fab5">&#9670;&nbsp;</a></span>nonDurableImpl</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1dur_1_1DurableInterface.html">DurableInterface</a>* <a class="el" href="classmongo_1_1dur_1_1DurableInterface.html#aea32310b97d037e37daeb1b3d4d84111">DurableInterface::_impl</a>&amp; mongo::dur::nonDurableImpl</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4360ff4305fb66b57b90112d61c92b02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4360ff4305fb66b57b90112d61c92b02">&#9670;&nbsp;</a></span>NUM_PREALLOC_FILES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int mongo::dur::NUM_PREALLOC_FILES = 3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae85f53498d36a82a8d1dee4cb7ab9341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85f53498d36a82a8d1dee4cb7ab9341">&#9670;&nbsp;</a></span>okToCleanUp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::dur::okToCleanUp = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>at clean shutdown </p>
<p>true if ok to cleanup journal files at termination.</p>
<p>otherwise, files journal will be retained. </p>

</div>
</div>
<a id="a27e5e4ed71c6f1586a42c7c5b52e266d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27e5e4ed71c6f1586a42c7c5b52e266d">&#9670;&nbsp;</a></span>RelativePath</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const mongo::dur::RelativePath = <a class="el" href="structmongo_1_1RelativePath.html#a6799246341a729c0307b36627661c55e">RelativePath::fromRelativePath</a>(&quot;local&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a37f4ca69ee5f6308626a3cff2c05f12c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f4ca69ee5f6308626a3cff2c05f12c">&#9670;&nbsp;</a></span>stats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmongo_1_1dur_1_1Stats.html">Stats</a> mongo::dur::stats</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae65eb1cf3620303f2bd05f53927b4a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae65eb1cf3620303f2bd05f53927b4a29">&#9670;&nbsp;</a></span>UncommittedBytesLimit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned mongo::dur::UncommittedBytesLimit = (sizeof(<a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>*) == 4) ? 50 * 1024 * 1024 : 512 * 1024 * 1024</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aac1b5f3bd3447603799f5f01801b99f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac1b5f3bd3447603799f5f01801b99f6">&#9670;&nbsp;</a></span>usingPreallocate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::dur::usingPreallocate = false</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="namespacemongo_1_1dur.html">dur</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
