<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::FixedWidthKey&lt; LocType &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structmongo_1_1FixedWidthKey.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structmongo_1_1FixedWidthKey-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::FixedWidthKey&lt; LocType &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the fixed width data component for storage of a key within a bucket.  
 <a href="structmongo_1_1FixedWidthKey.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="btree__ondisk_8h_source.html">btree_ondisk.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class LocType&gt;<br />
struct mongo::FixedWidthKey&lt; LocType &gt;</h3>

<p>This is the fixed width data component for storage of a key within a bucket. </p>
<p>It contains an offset pointer to the variable width bson data component. This may be 'unused', please see below.</p>
<p>Why is this templated on Loc? Because V0 and V1 have different size DiskLoc(s) but otherwise the same layout. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab6e3c617dc06fa1a4dd34e1726409ccd"><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#ab6e3c617dc06fa1a4dd34e1726409ccd">keyDataOfs</a> () const</td></tr>
<tr class="separator:ab6e3c617dc06fa1a4dd34e1726409ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5216d1f00212fa611dbe13263fe70858"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#a5216d1f00212fa611dbe13263fe70858">setKeyDataOfs</a> (short s)</td></tr>
<tr class="separator:a5216d1f00212fa611dbe13263fe70858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853454acaa4e1da5c34381f1eaa5d9e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#a853454acaa4e1da5c34381f1eaa5d9e8">setKeyDataOfsSavingUse</a> (short s)</td></tr>
<tr class="separator:a853454acaa4e1da5c34381f1eaa5d9e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f90ebd0a2c3a2f97cc2b0ffb2718abf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#a6f90ebd0a2c3a2f97cc2b0ffb2718abf">setUnused</a> ()</td></tr>
<tr class="memdesc:a6f90ebd0a2c3a2f97cc2b0ffb2718abf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unused keys are not returned by read operations.  <a href="#a6f90ebd0a2c3a2f97cc2b0ffb2718abf">More...</a><br /></td></tr>
<tr class="separator:a6f90ebd0a2c3a2f97cc2b0ffb2718abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac89576e7ca3675baa6ab4f989ddc368f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#ac89576e7ca3675baa6ab4f989ddc368f">setUsed</a> ()</td></tr>
<tr class="separator:ac89576e7ca3675baa6ab4f989ddc368f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc4c361754a704044e16d26d7407f10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#a8bc4c361754a704044e16d26d7407f10">isUnused</a> () const</td></tr>
<tr class="separator:a8bc4c361754a704044e16d26d7407f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb00179e3e13eeae1592a03b98b36c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#a0bb00179e3e13eeae1592a03b98b36c5">isUsed</a> () const</td></tr>
<tr class="separator:a0bb00179e3e13eeae1592a03b98b36c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8d25473edb239d3028055877708a4c2c"><td class="memItemLeft" align="right" valign="top">LocType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#a8d25473edb239d3028055877708a4c2c">prevChildBucket</a></td></tr>
<tr class="memdesc:a8d25473edb239d3028055877708a4c2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The 'left' child bucket of this key.  <a href="#a8d25473edb239d3028055877708a4c2c">More...</a><br /></td></tr>
<tr class="separator:a8d25473edb239d3028055877708a4c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3fea0c20a37ecb698d00cb38b17453c"><td class="memItemLeft" align="right" valign="top">LocType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#ac3fea0c20a37ecb698d00cb38b17453c">recordLoc</a></td></tr>
<tr class="memdesc:ac3fea0c20a37ecb698d00cb38b17453c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The location of the record associated with this key.  <a href="#ac3fea0c20a37ecb698d00cb38b17453c">More...</a><br /></td></tr>
<tr class="separator:ac3fea0c20a37ecb698d00cb38b17453c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d02ff0c2f8f3ab474ee3d01a80c0194"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1FixedWidthKey.html#a2d02ff0c2f8f3ab474ee3d01a80c0194">_kdo</a></td></tr>
<tr class="memdesc:a2d02ff0c2f8f3ab474ee3d01a80c0194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offset within current bucket of the variable width bson key for this _KeyNode.  <a href="#a2d02ff0c2f8f3ab474ee3d01a80c0194">More...</a><br /></td></tr>
<tr class="separator:a2d02ff0c2f8f3ab474ee3d01a80c0194"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8bc4c361754a704044e16d26d7407f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bc4c361754a704044e16d26d7407f10">&#9670;&nbsp;</a></span>isUnused()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::isUnused </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0bb00179e3e13eeae1592a03b98b36c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb00179e3e13eeae1592a03b98b36c5">&#9670;&nbsp;</a></span>isUsed()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::isUsed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab6e3c617dc06fa1a4dd34e1726409ccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6e3c617dc06fa1a4dd34e1726409ccd">&#9670;&nbsp;</a></span>keyDataOfs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::keyDataOfs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5216d1f00212fa611dbe13263fe70858"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5216d1f00212fa611dbe13263fe70858">&#9670;&nbsp;</a></span>setKeyDataOfs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::setKeyDataOfs </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a853454acaa4e1da5c34381f1eaa5d9e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a853454acaa4e1da5c34381f1eaa5d9e8">&#9670;&nbsp;</a></span>setKeyDataOfsSavingUse()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::setKeyDataOfsSavingUse </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6f90ebd0a2c3a2f97cc2b0ffb2718abf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f90ebd0a2c3a2f97cc2b0ffb2718abf">&#9670;&nbsp;</a></span>setUnused()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::setUnused </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unused keys are not returned by read operations. </p>
<p>Keys may be marked as unused in cases where it is difficult to delete them while maintaining the constraints required of a btree.</p>
<p>Setting ofs to odd is the sentinel for unused, as real recordLoc's are always even numbers. Note we need to keep its value basically the same as we use the recordLoc as part of the key in the index (to handle duplicate keys efficiently).</p>
<p>Flagging keys as unused is a feature that is being phased out in favor of deleting the keys outright. The current btree implementation is not expected to mark a key as unused in a non legacy btree. </p>

</div>
</div>
<a id="ac89576e7ca3675baa6ab4f989ddc368f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac89576e7ca3675baa6ab4f989ddc368f">&#9670;&nbsp;</a></span>setUsed()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::setUsed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2d02ff0c2f8f3ab474ee3d01a80c0194"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d02ff0c2f8f3ab474ee3d01a80c0194">&#9670;&nbsp;</a></span>_kdo</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">unsigned short <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::_kdo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Offset within current bucket of the variable width bson key for this _KeyNode. </p>

</div>
</div>
<a id="a8d25473edb239d3028055877708a4c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d25473edb239d3028055877708a4c2c">&#9670;&nbsp;</a></span>prevChildBucket</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">LocType <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::prevChildBucket</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The 'left' child bucket of this key. </p>
<p>If this is the i-th key, it points to the i index child bucket. </p>

</div>
</div>
<a id="ac3fea0c20a37ecb698d00cb38b17453c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3fea0c20a37ecb698d00cb38b17453c">&#9670;&nbsp;</a></span>recordLoc</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LocType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">LocType <a class="el" href="structmongo_1_1FixedWidthKey.html">mongo::FixedWidthKey</a>&lt; LocType &gt;::recordLoc</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The location of the record associated with this key. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/btree/<a class="el" href="btree__ondisk_8h_source.html">btree_ondisk.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="structmongo_1_1FixedWidthKey.html">FixedWidthKey</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
