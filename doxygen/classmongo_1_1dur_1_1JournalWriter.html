<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::dur::JournalWriter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classmongo_1_1dur_1_1JournalWriter.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classmongo_1_1dur_1_1JournalWriter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::dur::JournalWriter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Manages the thread and queues used for writing the journal to disk and notify parties with are waiting on the write concern.  
 <a href="classmongo_1_1dur_1_1JournalWriter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dur__journal__writer_8h_source.html">dur_journal_writer.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages the thread and queues used for writing the journal to disk and notify parties with are waiting on the write concern. </p>
<p>NOTE: Not thread-safe and must not be used from more than one thread. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html">Buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the memory and the header for a complete journal buffer which is pending to be written by the journal writer thread.  <a href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a229a3a6ed85c9c28bebe4360c7d3c674"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a229a3a6ed85c9c28bebe4360c7d3c674">JournalWriter</a> (<a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a> *commitNotify, <a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a> *applyToDataFilesNotify, size_t numBuffers)</td></tr>
<tr class="memdesc:a229a3a6ed85c9c28bebe4360c7d3c674"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the journal writer.  <a href="#a229a3a6ed85c9c28bebe4360c7d3c674">More...</a><br /></td></tr>
<tr class="separator:a229a3a6ed85c9c28bebe4360c7d3c674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c6a17f6a07d8664c02d1528dfc551c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a3c6a17f6a07d8664c02d1528dfc551c2">~JournalWriter</a> ()</td></tr>
<tr class="separator:a3c6a17f6a07d8664c02d1528dfc551c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a8fdba2a818018bde15d042cfba51d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a36a8fdba2a818018bde15d042cfba51d">start</a> ()</td></tr>
<tr class="memdesc:a36a8fdba2a818018bde15d042cfba51d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates buffer memory and starts the journal writer thread.  <a href="#a36a8fdba2a818018bde15d042cfba51d">More...</a><br /></td></tr>
<tr class="separator:a36a8fdba2a818018bde15d042cfba51d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe26bd0a93f2760bdc47a22511bbe2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a2fe26bd0a93f2760bdc47a22511bbe2d">shutdown</a> ()</td></tr>
<tr class="memdesc:a2fe26bd0a93f2760bdc47a22511bbe2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the journal writer thread and frees memory for the buffers.  <a href="#a2fe26bd0a93f2760bdc47a22511bbe2d">More...</a><br /></td></tr>
<tr class="separator:a2fe26bd0a93f2760bdc47a22511bbe2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35a32b5b50947000ac49761c1138ab0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#af35a32b5b50947000ac49761c1138ab0">assertIdle</a> ()</td></tr>
<tr class="memdesc:af35a32b5b50947000ac49761c1138ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asserts that there are no pending journal writes.  <a href="#af35a32b5b50947000ac49761c1138ab0">More...</a><br /></td></tr>
<tr class="separator:af35a32b5b50947000ac49761c1138ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54195757ace6b2269295ca3841cee390"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html">Buffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a54195757ace6b2269295ca3841cee390">newBuffer</a> ()</td></tr>
<tr class="memdesc:a54195757ace6b2269295ca3841cee390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a new empty buffer into which a journal entry should be written.  <a href="#a54195757ace6b2269295ca3841cee390">More...</a><br /></td></tr>
<tr class="separator:a54195757ace6b2269295ca3841cee390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761eaef6d2031ccf0b1552aa831f4ac1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a761eaef6d2031ccf0b1552aa831f4ac1">writeBuffer</a> (<a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html">Buffer</a> *buffer, <a class="el" href="classmongo_1_1CommitNotifier.html#a7af4b6ce4c350d653ac08e780b43c2eb">CommitNotifier::When</a> commitNumber)</td></tr>
<tr class="memdesc:a761eaef6d2031ccf0b1552aa831f4ac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests that the specified buffer be written asynchronously.  <a href="#a761eaef6d2031ccf0b1552aa831f4ac1">More...</a><br /></td></tr>
<tr class="separator:a761eaef6d2031ccf0b1552aa831f4ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c2f010422aa28e48e9edb8ef239204b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a7c2f010422aa28e48e9edb8ef239204b">flush</a> ()</td></tr>
<tr class="memdesc:a7c2f010422aa28e48e9edb8ef239204b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensures that all previously submitted write requests complete.  <a href="#a7c2f010422aa28e48e9edb8ef239204b">More...</a><br /></td></tr>
<tr class="separator:a7c2f010422aa28e48e9edb8ef239204b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a2f54c5c5fda5bed5cb479eec7332eb28"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a2f54c5c5fda5bed5cb479eec7332eb28a1a11c6500a72ae4c041022bd32cdaea8">InitialBufferSizeBytes</a> = 4 * 1024 * 1024
 }</td></tr>
<tr class="separator:a2f54c5c5fda5bed5cb479eec7332eb28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32bff10e2f8e85727da399f61a71f84b"><td class="memItemLeft" align="right" valign="top">typedef BlockingQueue&lt; <a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html">Buffer</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a32bff10e2f8e85727da399f61a71f84b">BufferQueue</a></td></tr>
<tr class="separator:a32bff10e2f8e85727da399f61a71f84b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af5b88818a3188b426550bb54565af52f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#af5b88818a3188b426550bb54565af52f">MONGO_DISALLOW_COPYING</a> (<a class="el" href="classmongo_1_1dur_1_1JournalWriter.html">JournalWriter</a>)</td></tr>
<tr class="separator:af5b88818a3188b426550bb54565af52f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb80b66e9e609d2c4d4949f677d26f21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#abb80b66e9e609d2c4d4949f677d26f21">_journalWriterThread</a> ()</td></tr>
<tr class="separator:abb80b66e9e609d2c4d4949f677d26f21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0076deaebe5be04d3fd2df5520ddbd4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a0076deaebe5be04d3fd2df5520ddbd4d">_commitNotify</a></td></tr>
<tr class="separator:a0076deaebe5be04d3fd2df5520ddbd4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f6f4e3cd7c7e8dcfc00cefb3bd5bf61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a9f6f4e3cd7c7e8dcfc00cefb3bd5bf61">_applyToDataFilesNotify</a></td></tr>
<tr class="separator:a9f6f4e3cd7c7e8dcfc00cefb3bd5bf61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b73874095f8d486dc97a68e8bc90c08"><td class="memItemLeft" align="right" valign="top">stdx::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a1b73874095f8d486dc97a68e8bc90c08">_journalWriterThreadHandle</a></td></tr>
<tr class="separator:a1b73874095f8d486dc97a68e8bc90c08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8450090981c4c79cb13a22a881067f3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#af8450090981c4c79cb13a22a881067f3">_shutdownRequested</a></td></tr>
<tr class="separator:af8450090981c4c79cb13a22a881067f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a284b79a071d793da579844f94f75cafd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a32bff10e2f8e85727da399f61a71f84b">BufferQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a284b79a071d793da579844f94f75cafd">_journalQueue</a></td></tr>
<tr class="separator:a284b79a071d793da579844f94f75cafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee7d03499c05e0b70f4dae23b4ebc90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1CommitNotifier.html#a7af4b6ce4c350d653ac08e780b43c2eb">CommitNotifier::When</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a3ee7d03499c05e0b70f4dae23b4ebc90">_lastCommitNumber</a></td></tr>
<tr class="separator:a3ee7d03499c05e0b70f4dae23b4ebc90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6aa46da3833a1f4c50730e8aa587f46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a32bff10e2f8e85727da399f61a71f84b">BufferQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#aa6aa46da3833a1f4c50730e8aa587f46">_readyQueue</a></td></tr>
<tr class="separator:aa6aa46da3833a1f4c50730e8aa587f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a33c3a998a372f3a681b07ef4dac27124"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a33c3a998a372f3a681b07ef4dac27124">BufferGuard</a></td></tr>
<tr class="separator:a33c3a998a372f3a681b07ef4dac27124"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a32bff10e2f8e85727da399f61a71f84b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32bff10e2f8e85727da399f61a71f84b">&#9670;&nbsp;</a></span>BufferQueue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef BlockingQueue&lt;<a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html">Buffer</a>*&gt; <a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a32bff10e2f8e85727da399f61a71f84b">mongo::dur::JournalWriter::BufferQueue</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a2f54c5c5fda5bed5cb479eec7332eb28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f54c5c5fda5bed5cb479eec7332eb28">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2f54c5c5fda5bed5cb479eec7332eb28a1a11c6500a72ae4c041022bd32cdaea8"></a>InitialBufferSizeBytes&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a229a3a6ed85c9c28bebe4360c7d3c674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a229a3a6ed85c9c28bebe4360c7d3c674">&#9670;&nbsp;</a></span>JournalWriter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::JournalWriter::JournalWriter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a> *&#160;</td>
          <td class="paramname"><em>commitNotify</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a> *&#160;</td>
          <td class="paramname"><em>applyToDataFilesNotify</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numBuffers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the journal writer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commitNotify</td><td>Notification object to be called after journal entries have been written to disk. The caller retains ownership and the notify object must outlive the journal writer object. </td></tr>
    <tr><td class="paramname">applyToDataFilesNotify</td><td>Notification object to be called after journal entries have been applied to the shared view. This means that if the shared view were to be flushed at this point, the journal files before this point are not necessary. The caller retains ownership and the notify object must outlive the journal writer object. </td></tr>
    <tr><td class="paramname">numBuffers</td><td>How many buffers to create to hold outstanding writes. If there are more than this number of journal writes that have not completed, the write calls will block. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c6a17f6a07d8664c02d1528dfc551c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c6a17f6a07d8664c02d1528dfc551c2">&#9670;&nbsp;</a></span>~JournalWriter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::JournalWriter::~JournalWriter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abb80b66e9e609d2c4d4949f677d26f21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb80b66e9e609d2c4d4949f677d26f21">&#9670;&nbsp;</a></span>_journalWriterThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::JournalWriter::_journalWriterThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af35a32b5b50947000ac49761c1138ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af35a32b5b50947000ac49761c1138ab0">&#9670;&nbsp;</a></span>assertIdle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::JournalWriter::assertIdle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asserts that there are no pending journal writes. </p>

</div>
</div>
<a id="a7c2f010422aa28e48e9edb8ef239204b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c2f010422aa28e48e9edb8ef239204b">&#9670;&nbsp;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::JournalWriter::flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ensures that all previously submitted write requests complete. </p>
<p>This call is blocking. </p>

</div>
</div>
<a id="af5b88818a3188b426550bb54565af52f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5b88818a3188b426550bb54565af52f">&#9670;&nbsp;</a></span>MONGO_DISALLOW_COPYING()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mongo::dur::JournalWriter::MONGO_DISALLOW_COPYING </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html">JournalWriter</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a54195757ace6b2269295ca3841cee390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54195757ace6b2269295ca3841cee390">&#9670;&nbsp;</a></span>newBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html">JournalWriter::Buffer</a> * mongo::dur::JournalWriter::newBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains a new empty buffer into which a journal entry should be written. </p>
<p>This method may block if there are no free buffers.</p>
<p>The caller does not own the buffer and needs to "return" it to the writer by calling writeBuffer. Buffers with data on them should never be discarded until they are written. </p>

</div>
</div>
<a id="a2fe26bd0a93f2760bdc47a22511bbe2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe26bd0a93f2760bdc47a22511bbe2d">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::JournalWriter::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminates the journal writer thread and frees memory for the buffers. </p>
<p>Must not be called if there are any pending journal writes. </p>

</div>
</div>
<a id="a36a8fdba2a818018bde15d042cfba51d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a8fdba2a818018bde15d042cfba51d">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::JournalWriter::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates buffer memory and starts the journal writer thread. </p>

</div>
</div>
<a id="a761eaef6d2031ccf0b1552aa831f4ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a761eaef6d2031ccf0b1552aa831f4ac1">&#9670;&nbsp;</a></span>writeBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::dur::JournalWriter::writeBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html">Buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1CommitNotifier.html#a7af4b6ce4c350d653ac08e780b43c2eb">CommitNotifier::When</a>&#160;</td>
          <td class="paramname"><em>commitNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests that the specified buffer be written asynchronously. </p>
<p>This method may block if there are too many outstanding unwritten buffers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td><a class="el" href="classmongo_1_1dur_1_1JournalWriter_1_1Buffer.html" title="Stores the memory and the header for a complete journal buffer which is pending to be written by the ...">Buffer</a> entry to be written. The buffer object must not be used anymore after it has been given to this function. </td></tr>
    <tr><td class="paramname">commitNumber</td><td>What commit number to be notified once the buffer has been written to disk. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a33c3a998a372f3a681b07ef4dac27124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33c3a998a372f3a681b07ef4dac27124">&#9670;&nbsp;</a></span>BufferGuard</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classmongo_1_1dur_1_1BufferGuard.html">BufferGuard</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a9f6f4e3cd7c7e8dcfc00cefb3bd5bf61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f6f4e3cd7c7e8dcfc00cefb3bd5bf61">&#9670;&nbsp;</a></span>_applyToDataFilesNotify</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a>* const mongo::dur::JournalWriter::_applyToDataFilesNotify</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0076deaebe5be04d3fd2df5520ddbd4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0076deaebe5be04d3fd2df5520ddbd4d">&#9670;&nbsp;</a></span>_commitNotify</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1CommitNotifier.html">CommitNotifier</a>* const mongo::dur::JournalWriter::_commitNotify</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a284b79a071d793da579844f94f75cafd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a284b79a071d793da579844f94f75cafd">&#9670;&nbsp;</a></span>_journalQueue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a32bff10e2f8e85727da399f61a71f84b">BufferQueue</a> mongo::dur::JournalWriter::_journalQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1b73874095f8d486dc97a68e8bc90c08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b73874095f8d486dc97a68e8bc90c08">&#9670;&nbsp;</a></span>_journalWriterThreadHandle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">stdx::thread mongo::dur::JournalWriter::_journalWriterThreadHandle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ee7d03499c05e0b70f4dae23b4ebc90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee7d03499c05e0b70f4dae23b4ebc90">&#9670;&nbsp;</a></span>_lastCommitNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1CommitNotifier.html#a7af4b6ce4c350d653ac08e780b43c2eb">CommitNotifier::When</a> mongo::dur::JournalWriter::_lastCommitNumber</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa6aa46da3833a1f4c50730e8aa587f46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6aa46da3833a1f4c50730e8aa587f46">&#9670;&nbsp;</a></span>_readyQueue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html#a32bff10e2f8e85727da399f61a71f84b">BufferQueue</a> mongo::dur::JournalWriter::_readyQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af8450090981c4c79cb13a22a881067f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8450090981c4c79cb13a22a881067f3">&#9670;&nbsp;</a></span>_shutdownRequested</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::dur::JournalWriter::_shutdownRequested</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/<a class="el" href="dur__journal__writer_8h_source.html">dur_journal_writer.h</a></li>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/<a class="el" href="dur__journal__writer_8cpp.html">dur_journal_writer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="namespacemongo_1_1dur.html">dur</a></li><li class="navelem"><a class="el" href="classmongo_1_1dur_1_1JournalWriter.html">JournalWriter</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
