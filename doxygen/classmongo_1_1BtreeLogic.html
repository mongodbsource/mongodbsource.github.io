<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::BtreeLogic&lt; BtreeLayout &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmongo_1_1BtreeLogic.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classmongo_1_1BtreeLogic-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::BtreeLogic&lt; BtreeLayout &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the logic for manipulating the Btree.  
 <a href="classmongo_1_1BtreeLogic.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="btree__logic_8h_source.html">btree_logic.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class BtreeLayout&gt;<br />
class mongo::BtreeLogic&lt; BtreeLayout &gt;</h3>

<p>This is the logic for manipulating the Btree. </p>
<p>It is (mostly) independent of the on-disk format. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic_1_1Builder.html">Builder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1BtreeLogic_1_1FullKey.html">FullKey</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an in memory wrapper for the variable length data associated with a KeyHeaderType.  <a href="structmongo_1_1BtreeLogic_1_1FullKey.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa5d96fc2d1f8797908182b89ff511bf8"><td class="memItemLeft" align="right" valign="top">typedef BtreeLayout::FixedWidthKeyType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">KeyHeaderType</a></td></tr>
<tr class="separator:aa5d96fc2d1f8797908182b89ff511bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29c9a24e9c4753470ea6db35de411d9"><td class="memItemLeft" align="right" valign="top">typedef BtreeLayout::KeyType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a></td></tr>
<tr class="separator:ac29c9a24e9c4753470ea6db35de411d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f019770c9586e92f02b171a071c4421"><td class="memItemLeft" align="right" valign="top">typedef BtreeLayout::KeyOwnedType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a3f019770c9586e92f02b171a071c4421">KeyDataOwnedType</a></td></tr>
<tr class="separator:a3f019770c9586e92f02b171a071c4421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eebc3db54241bbc84b3feed0fea1142"><td class="memItemLeft" align="right" valign="top">typedef BtreeLayout::LocType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a9eebc3db54241bbc84b3feed0fea1142">LocType</a></td></tr>
<tr class="separator:a9eebc3db54241bbc84b3feed0fea1142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07c8444952b7bc406743ac3eb343c0a3"><td class="memItemLeft" align="right" valign="top">typedef BtreeLayout::BucketType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a></td></tr>
<tr class="separator:a07c8444952b7bc406743ac3eb343c0a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad0c836138663ea013643859a321c9243"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ad0c836138663ea013643859a321c9243">BtreeLogic</a> (<a class="el" href="classmongo_1_1HeadManager.html">HeadManager</a> *head, <a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a> *store, <a class="el" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a> *cursors, const Ordering &amp;<a class="el" href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">ordering</a>, const std::string &amp;indexName, bool <a class="el" href="classmongo_1_1BtreeLogic.html#aa91a6613bc9da9fb79bac4c43133cf6b">isUnique</a>)</td></tr>
<tr class="memdesc:ad0c836138663ea013643859a321c9243"><td class="mdescLeft">&#160;</td><td class="mdescRight">'head' manages the catalog information.  <a href="#ad0c836138663ea013643859a321c9243">More...</a><br /></td></tr>
<tr class="separator:ad0c836138663ea013643859a321c9243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a622661b8c81f2f5965dc3a603f0f5887"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1BtreeLogic_1_1Builder.html">Builder</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a622661b8c81f2f5965dc3a603f0f5887">newBuilder</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, bool dupsAllowed)</td></tr>
<tr class="memdesc:a622661b8c81f2f5965dc3a603f0f5887"><td class="mdescLeft">&#160;</td><td class="mdescRight">Caller owns the returned pointer.  <a href="#a622661b8c81f2f5965dc3a603f0f5887">More...</a><br /></td></tr>
<tr class="separator:a622661b8c81f2f5965dc3a603f0f5887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9eefeb04e6ad5b6081d8bf3c1a03ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a7f9eefeb04e6ad5b6081d8bf3c1a03ed">dupKeyCheck</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const BSONObj &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;loc) const</td></tr>
<tr class="separator:a7f9eefeb04e6ad5b6081d8bf3c1a03ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2849c3428290e87d9c246caf2ea93d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ac2849c3428290e87d9c246caf2ea93d1">insert</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const BSONObj &amp;rawKey, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;value, bool dupsAllowed)</td></tr>
<tr class="separator:ac2849c3428290e87d9c246caf2ea93d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a80d3d30fb5156e422d321a534f33a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a7a80d3d30fb5156e422d321a534f33a5">locate</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const BSONObj &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;recordLoc, const int direction, int *posOut, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *bucketLocOut) const</td></tr>
<tr class="memdesc:a7a80d3d30fb5156e422d321a534f33a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Navigates down the tree and locates the bucket and position containing a record with the specified &lt;key, recordLoc&gt; combination.  <a href="#a7a80d3d30fb5156e422d321a534f33a5">More...</a><br /></td></tr>
<tr class="separator:a7a80d3d30fb5156e422d321a534f33a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a723095238b81634370e36c18b2f1c3de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a723095238b81634370e36c18b2f1c3de">advance</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *bucketLocInOut, int *posInOut, int direction) const</td></tr>
<tr class="separator:a723095238b81634370e36c18b2f1c3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5072d4e2ffe6d976a5542c2201ff01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a4a5072d4e2ffe6d976a5542c2201ff01">exists</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>) const</td></tr>
<tr class="separator:a4a5072d4e2ffe6d976a5542c2201ff01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9662f4ba0c510de8393f2247740f252"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ad9662f4ba0c510de8393f2247740f252">unindex</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const BSONObj &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;recordLoc)</td></tr>
<tr class="separator:ad9662f4ba0c510de8393f2247740f252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a177b1c5b3c7f807446f70c937bfc7369"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a177b1c5b3c7f807446f70c937bfc7369">isEmpty</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) const</td></tr>
<tr class="separator:a177b1c5b3c7f807446f70c937bfc7369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef6fbbb409d7e91c402ab62f0c820ece"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aef6fbbb409d7e91c402ab62f0c820ece">fullValidate</a> (OperationContext *, long long *unusedCount, bool strict, bool dumpBuckets, unsigned depth) const</td></tr>
<tr class="separator:aef6fbbb409d7e91c402ab62f0c820ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d956e7d43b44d9e82e93c86eea73e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ab9d956e7d43b44d9e82e93c86eea73e7">getDiskLoc</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;bucketLoc, const int keyOffset) const</td></tr>
<tr class="separator:ab9d956e7d43b44d9e82e93c86eea73e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa643502a28ec8d37c7db06647842be0"><td class="memItemLeft" align="right" valign="top">BSONObj&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aaa643502a28ec8d37c7db06647842be0">getKey</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;bucketLoc, const int keyOffset) const</td></tr>
<tr class="separator:aaa643502a28ec8d37c7db06647842be0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938dd93e41eba382a1a36bcd6ae4148a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmongo_1_1IndexKeyEntry.html">IndexKeyEntry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a938dd93e41eba382a1a36bcd6ae4148a">getRandomEntry</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) const</td></tr>
<tr class="memdesc:a938dd93e41eba382a1a36bcd6ae4148a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pseudo-random element from the tree.  <a href="#a938dd93e41eba382a1a36bcd6ae4148a">More...</a><br /></td></tr>
<tr class="separator:a938dd93e41eba382a1a36bcd6ae4148a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52d3f49ee299f1015a5dc1af9dd3900"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ab52d3f49ee299f1015a5dc1af9dd3900">getHead</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) const</td></tr>
<tr class="separator:ab52d3f49ee299f1015a5dc1af9dd3900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13ac8d9773564bb0cc07105051d8649"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#af13ac8d9773564bb0cc07105051d8649">touch</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) const</td></tr>
<tr class="separator:af13ac8d9773564bb0cc07105051d8649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2f0d1fef95bfff5c37267ab7435898"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a6b2f0d1fef95bfff5c37267ab7435898">customLocate</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *locInOut, int *keyOfsInOut, const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;seekPoint, int direction) const</td></tr>
<tr class="separator:a6b2f0d1fef95bfff5c37267ab7435898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1fad264ec0565e58027674e4ea7c6f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aa1fad264ec0565e58027674e4ea7c6f9">advanceTo</a> (OperationContext *, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *thisLocInOut, int *keyOfsInOut, const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;seekPoint, int direction) const</td></tr>
<tr class="separator:aa1fad264ec0565e58027674e4ea7c6f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e56edaacaa50ec15850c14fbf10167c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a1e56edaacaa50ec15850c14fbf10167c">restorePosition</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const BSONObj &amp;savedKey, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;savedLoc, int direction, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *bucketInOut, int *keyOffsetInOut) const</td></tr>
<tr class="separator:a1e56edaacaa50ec15850c14fbf10167c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c16c1676134b2f9ff173ed2875a4d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a39c16c1676134b2f9ff173ed2875a4d7">initAsEmpty</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>)</td></tr>
<tr class="memdesc:a39c16c1676134b2f9ff173ed2875a4d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns OK if the index was uninitialized before, error status otherwise.  <a href="#a39c16c1676134b2f9ff173ed2875a4d7">More...</a><br /></td></tr>
<tr class="separator:a39c16c1676134b2f9ff173ed2875a4d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9e8953b030dcde584d7719bd1d40430"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#af9e8953b030dcde584d7719bd1d40430">getRecordStore</a> () const</td></tr>
<tr class="separator:af9e8953b030dcde584d7719bd1d40430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7d869e9ec7394447619df920107478"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a2c7d869e9ec7394447619df920107478">savedCursors</a> () const</td></tr>
<tr class="separator:a2c7d869e9ec7394447619df920107478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae15c1448a850bb120f1683b2c13680"><td class="memItemLeft" align="right" valign="top">Ordering&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">ordering</a> () const</td></tr>
<tr class="separator:adae15c1448a850bb120f1683b2c13680"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694ff2fc751d8f29592d008774924452"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a694ff2fc751d8f29592d008774924452">customBSONCmp</a> (const BSONObj &amp;inIndex_left, const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;seekPoint_right, int direction) const</td></tr>
<tr class="memdesc:a694ff2fc751d8f29592d008774924452"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: Currently the Ordering implementation assumes a compound index will not have more keys than an unsigned variable has bits.  <a href="#a694ff2fc751d8f29592d008774924452">More...</a><br /></td></tr>
<tr class="separator:a694ff2fc751d8f29592d008774924452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa91a6613bc9da9fb79bac4c43133cf6b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aa91a6613bc9da9fb79bac4c43133cf6b">isUnique</a> () const</td></tr>
<tr class="separator:aa91a6613bc9da9fb79bac4c43133cf6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a15b46faf02679f143aef0b36f18ba009"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a15b46faf02679f143aef0b36f18ba009">lowWaterMark</a> ()</td></tr>
<tr class="separator:a15b46faf02679f143aef0b36f18ba009"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7b0e345eb0a8e3443bd62acf6643b45e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a7b0e345eb0a8e3443bd62acf6643b45e">basicInsert</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int &amp;keypos, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc)</td></tr>
<tr class="memdesc:a7b0e345eb0a8e3443bd62acf6643b45e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Durability note:  <a href="#a7b0e345eb0a8e3443bd62acf6643b45e">More...</a><br /></td></tr>
<tr class="separator:a7b0e345eb0a8e3443bd62acf6643b45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45371d574792f0468f75e58c3cf418ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a45371d574792f0468f75e58c3cf418ef">dropFront</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int nDrop, int &amp;refpos)</td></tr>
<tr class="separator:a45371d574792f0468f75e58c3cf418ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6abc9608de59766d8a9bddeba9951d31"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a6abc9608de59766d8a9bddeba9951d31">_pack</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> thisLoc, int &amp;refPos)</td></tr>
<tr class="memdesc:a6abc9608de59766d8a9bddeba9951d31"><td class="mdescLeft">&#160;</td><td class="mdescRight">When we delete things, we just leave empty space until the node is full and then we repack it.  <a href="#a6abc9608de59766d8a9bddeba9951d31">More...</a><br /></td></tr>
<tr class="separator:a6abc9608de59766d8a9bddeba9951d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e116f1389148844a7372bb38933a39a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a5e116f1389148844a7372bb38933a39a">customLocate</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *locInOut, int *keyOfsInOut, const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;seekPoint, int direction, std::pair&lt; <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>, int &gt; &amp;bestParent) const</td></tr>
<tr class="separator:a5e116f1389148844a7372bb38933a39a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad4b13549c255120d29256863c11f0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a5ad4b13549c255120d29256863c11f0b">_find</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;recordLoc, bool errorIfDup, int *keyPositionOut, bool *foundOut) const</td></tr>
<tr class="memdesc:a5ad4b13549c255120d29256863c11f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a key within this btree bucket.  <a href="#a5ad4b13549c255120d29256863c11f0b">More...</a><br /></td></tr>
<tr class="separator:a5ad4b13549c255120d29256863c11f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81263fa16f3b259ad765e8b5c5ba1d3a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a81263fa16f3b259ad765e8b5c5ba1d3a">customFind</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, int low, int high, const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;seekPoint, int direction, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *thisLocInOut, int *keyOfsInOut, std::pair&lt; <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>, int &gt; &amp;bestParent) const</td></tr>
<tr class="separator:a81263fa16f3b259ad765e8b5c5ba1d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3f05dafbeb351ebac32296a53572255"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ab3f05dafbeb351ebac32296a53572255">advanceToImpl</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *thisLocInOut, int *keyOfsInOut, const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;seekPoint, int direction) const</td></tr>
<tr class="memdesc:ab3f05dafbeb351ebac32296a53572255"><td class="mdescLeft">&#160;</td><td class="mdescRight">find smallest/biggest value greater-equal/less-equal than specified  <a href="#ab3f05dafbeb351ebac32296a53572255">More...</a><br /></td></tr>
<tr class="separator:ab3f05dafbeb351ebac32296a53572255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8eeaa5ea907080baa587d96d18016a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a9f8eeaa5ea907080baa587d96d18016a">wouldCreateDup</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> self) const</td></tr>
<tr class="separator:a9f8eeaa5ea907080baa587d96d18016a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5342c281317e32014c07a9c3f5fab512"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a5342c281317e32014c07a9c3f5fab512">keyIsUsed</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;loc, const int &amp;pos) const</td></tr>
<tr class="separator:a5342c281317e32014c07a9c3f5fab512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7afac1dbac596159f1d922cdb0bc7e74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a7afac1dbac596159f1d922cdb0bc7e74">skipUnusedKeys</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *loc, int *pos, int direction) const</td></tr>
<tr class="separator:a7afac1dbac596159f1d922cdb0bc7e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3badd12e41ebcf2b80036dff36de10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a0b3badd12e41ebcf2b80036dff36de10">advance</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;bucketLoc, int *posInOut, int direction) const</td></tr>
<tr class="separator:a0b3badd12e41ebcf2b80036dff36de10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28d12796f209057e740272e627ca9d89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a28d12796f209057e740272e627ca9d89">_locate</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;bucketLoc, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, int *posOut, bool *foundOut, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;recordLoc, const int direction) const</td></tr>
<tr class="memdesc:a28d12796f209057e740272e627ca9d89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively walk down the btree, looking for a match of key and recordLoc.  <a href="#a28d12796f209057e740272e627ca9d89">More...</a><br /></td></tr>
<tr class="separator:a28d12796f209057e740272e627ca9d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adba0f7f8b078ceadb2846e6d67bdd3e1"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#adba0f7f8b078ceadb2846e6d67bdd3e1">_fullValidate</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, long long *unusedCount, bool strict, bool dumpBuckets, unsigned depth) const</td></tr>
<tr class="separator:adba0f7f8b078ceadb2846e6d67bdd3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94cd49eb3eaff25538961a4588e5155"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ad94cd49eb3eaff25538961a4588e5155">_addBucket</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>)</td></tr>
<tr class="separator:ad94cd49eb3eaff25538961a4588e5155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a2cf2f19839acafcdfe067f073f1c00"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a6a2cf2f19839acafcdfe067f073f1c00">canMergeChildren</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, const int leftIndex)</td></tr>
<tr class="separator:a6a2cf2f19839acafcdfe067f073f1c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd6020664851c128d8ab52ebda0a1cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a4cd6020664851c128d8ab52ebda0a1cc">_rebalancedSeparatorPos</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int leftIndex)</td></tr>
<tr class="memdesc:a4cd6020664851c128d8ab52ebda0a1cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This implementation must respect the meaning and value of lowWaterMark.  <a href="#a4cd6020664851c128d8ab52ebda0a1cc">More...</a><br /></td></tr>
<tr class="separator:a4cd6020664851c128d8ab52ebda0a1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ef7ea66528d0b60af33d521f94a2961"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a2ef7ea66528d0b60af33d521f94a2961">_packReadyForMod</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int &amp;refPos)</td></tr>
<tr class="memdesc:a2ef7ea66528d0b60af33d521f94a2961"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version when write intent already declared.  <a href="#a2ef7ea66528d0b60af33d521f94a2961">More...</a><br /></td></tr>
<tr class="separator:a2ef7ea66528d0b60af33d521f94a2961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0abecbf7f1bc00c71b3ca8153b7026d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aa0abecbf7f1bc00c71b3ca8153b7026d">truncateTo</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int N, int &amp;refPos)</td></tr>
<tr class="separator:aa0abecbf7f1bc00c71b3ca8153b7026d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab70aa010baf4859bab9bebdef89cc086"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ab70aa010baf4859bab9bebdef89cc086">split</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int keypos, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild)</td></tr>
<tr class="separator:ab70aa010baf4859bab9bebdef89cc086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0162f55f587785098a0adfe4eaa647"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a4a0162f55f587785098a0adfe4eaa647">_insert</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc, bool dupsAllowed, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> leftChild, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rightChild)</td></tr>
<tr class="separator:a4a0162f55f587785098a0adfe4eaa647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae20519b6244adb662fe5604dbde825bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ae20519b6244adb662fe5604dbde825bd">insertHere</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int pos, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> leftChild, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rightChild)</td></tr>
<tr class="memdesc:ae20519b6244adb662fe5604dbde825bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a key in this bucket, splitting if necessary.  <a href="#ae20519b6244adb662fe5604dbde825bd">More...</a><br /></td></tr>
<tr class="separator:ae20519b6244adb662fe5604dbde825bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d898992378bc663ce74a42037c655f2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a9d898992378bc663ce74a42037c655f2">dupKeyError</a> (const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>) const</td></tr>
<tr class="separator:a9d898992378bc663ce74a42037c655f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a39142d26b4ee0973ab6ace112d14b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a5a39142d26b4ee0973ab6ace112d14b9">setInternalKey</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int keypos, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild)</td></tr>
<tr class="separator:a5a39142d26b4ee0973ab6ace112d14b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f86d6b940d03eecaeca3937d22fa624"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a2f86d6b940d03eecaeca3937d22fa624">fixParentPtrs</a> (OperationContext *trans, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int firstIndex=0, int lastIndex=-1)</td></tr>
<tr class="memdesc:a2f86d6b940d03eecaeca3937d22fa624"><td class="mdescLeft">&#160;</td><td class="mdescRight">This can cause a lot of additional page writes when we assign buckets to different parents.  <a href="#a2f86d6b940d03eecaeca3937d22fa624">More...</a><br /></td></tr>
<tr class="separator:a2f86d6b940d03eecaeca3937d22fa624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a852b5b36b7b41719065b2b9cf21a3778"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a852b5b36b7b41719065b2b9cf21a3778">mayBalanceWithNeighbors</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc)</td></tr>
<tr class="separator:a852b5b36b7b41719065b2b9cf21a3778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4933441cb102fbd0fe4d2c1f84ca3695"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a4933441cb102fbd0fe4d2c1f84ca3695">doBalanceChildren</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int leftIndex)</td></tr>
<tr class="separator:a4933441cb102fbd0fe4d2c1f84ca3695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a55f148cbd50d8705c3c2166e1c67a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a3a55f148cbd50d8705c3c2166e1c67a3">doBalanceLeftToRight</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> thisLoc, int leftIndex, int <a class="el" href="classmongo_1_1BtreeLogic.html#ab70aa010baf4859bab9bebdef89cc086">split</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *l, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *r, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild)</td></tr>
<tr class="separator:a3a55f148cbd50d8705c3c2166e1c67a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6178898a2c0bb5fa425a7d618c37c559"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a6178898a2c0bb5fa425a7d618c37c559">doBalanceRightToLeft</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> thisLoc, int leftIndex, int <a class="el" href="classmongo_1_1BtreeLogic.html#ab70aa010baf4859bab9bebdef89cc086">split</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *l, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *r, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild)</td></tr>
<tr class="separator:a6178898a2c0bb5fa425a7d618c37c559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f29aa78367d5d1bcf092bd2166d9a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a87f29aa78367d5d1bcf092bd2166d9a5">tryBalanceChildren</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int leftIndex)</td></tr>
<tr class="separator:a87f29aa78367d5d1bcf092bd2166d9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa067ea79bae4104fb606401f3acc79"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#adfa067ea79bae4104fb606401f3acc79">indexInParent</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc) const</td></tr>
<tr class="separator:adfa067ea79bae4104fb606401f3acc79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d443a373ec2ed86e134990ef98fd169"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a7d443a373ec2ed86e134990ef98fd169">doMergeChildren</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int leftIndex)</td></tr>
<tr class="separator:a7d443a373ec2ed86e134990ef98fd169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3c0ade6aaab94745e2f1d44925c63b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ac3c0ade6aaab94745e2f1d44925c63b4">replaceWithNextChild</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc)</td></tr>
<tr class="separator:ac3c0ade6aaab94745e2f1d44925c63b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5615942c6c44ac51bd3287f9fa481eba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a5615942c6c44ac51bd3287f9fa481eba">deleteInternalKey</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int keypos)</td></tr>
<tr class="memdesc:a5615942c6c44ac51bd3287f9fa481eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function replaces the specified key (k) by either the prev or next key in the btree (k').  <a href="#a5615942c6c44ac51bd3287f9fa481eba">More...</a><br /></td></tr>
<tr class="separator:a5615942c6c44ac51bd3287f9fa481eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d550cd54633e654b2df276653bbd7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ac4d550cd54633e654b2df276653bbd7f">delKeyAtPos</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, int p)</td></tr>
<tr class="memdesc:ac4d550cd54633e654b2df276653bbd7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">May delete the bucket 'bucket' rendering 'bucketLoc' invalid.  <a href="#ac4d550cd54633e654b2df276653bbd7f">More...</a><br /></td></tr>
<tr class="separator:ac4d550cd54633e654b2df276653bbd7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab829139b0a8c4e4fe5403051bc741b42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ab829139b0a8c4e4fe5403051bc741b42">delBucket</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc)</td></tr>
<tr class="separator:ab829139b0a8c4e4fe5403051bc741b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551225bcb381bfd76b84d23512d9537b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a551225bcb381bfd76b84d23512d9537b">deallocBucket</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc)</td></tr>
<tr class="separator:a551225bcb381bfd76b84d23512d9537b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea94ba3f4fc15de3aa443f48fe3892d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aea94ba3f4fc15de3aa443f48fe3892d3">_keyIsAt</a> (const BSONObj &amp;savedKey, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;savedLoc, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int keyPos) const</td></tr>
<tr class="separator:aea94ba3f4fc15de3aa443f48fe3892d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a791dea44584a32fd0e448d5c0e0af91f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a791dea44584a32fd0e448d5c0e0af91f">pushBack</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> prevChild)</td></tr>
<tr class="memdesc:a791dea44584a32fd0e448d5c0e0af91f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to push key into bucket.  <a href="#a791dea44584a32fd0e448d5c0e0af91f">More...</a><br /></td></tr>
<tr class="separator:a791dea44584a32fd0e448d5c0e0af91f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a911cef0bfbc778f567b080b9dcd30560"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a911cef0bfbc778f567b080b9dcd30560">childForPos</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int pos) const</td></tr>
<tr class="separator:a911cef0bfbc778f567b080b9dcd30560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5464adfd8ca3def7a2eeb6f2de09ae40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a5464adfd8ca3def7a2eeb6f2de09ae40">getBucket</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> dl) const</td></tr>
<tr class="separator:a5464adfd8ca3def7a2eeb6f2de09ae40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187ab227f9faa23a85baa1b7b3888afc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a187ab227f9faa23a85baa1b7b3888afc">getBucket</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const RecordId dl) const</td></tr>
<tr class="separator:a187ab227f9faa23a85baa1b7b3888afc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07275f1e312c31de44192103267cc879"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a07275f1e312c31de44192103267cc879">getRoot</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) const</td></tr>
<tr class="separator:a07275f1e312c31de44192103267cc879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a0c37b798c66bb4b63626c99bd6ec84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a5a0c37b798c66bb4b63626c99bd6ec84">getRootLoc</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) const</td></tr>
<tr class="separator:a5a0c37b798c66bb4b63626c99bd6ec84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3753b0d680215363bd92c8d3df73ddd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a3753b0d680215363bd92c8d3df73ddd5">recordRandomWalk</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, PseudoRandom *prng, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *curBucket, int64_t nBucketsInCurrentLevel, std::vector&lt; int64_t &gt; *nKeysInLevel, std::vector&lt; <a class="el" href="structmongo_1_1BtreeLogic_1_1FullKey.html">FullKey</a> &gt; *selectedKeys) const</td></tr>
<tr class="memdesc:a3753b0d680215363bd92c8d3df73ddd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does a random walk through the tree, recording information about the walk along the way.  <a href="#a3753b0d680215363bd92c8d3df73ddd5">More...</a><br /></td></tr>
<tr class="separator:a3753b0d680215363bd92c8d3df73ddd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a8590f5166a7b832c637c6a0e80ceab2f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmongo_1_1BtreeLogic.html#a9eebc3db54241bbc84b3feed0fea1142">LocType</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a8590f5166a7b832c637c6a0e80ceab2f">childLocForPos</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int pos)</td></tr>
<tr class="separator:a8590f5166a7b832c637c6a0e80ceab2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0af6b21928a1c31f5b2f719d465465a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmongo_1_1BtreeLogic_1_1FullKey.html">FullKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ad0af6b21928a1c31f5b2f719d465465a">getFullKey</a> (const <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int i)</td></tr>
<tr class="separator:ad0af6b21928a1c31f5b2f719d465465a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbb3ba2b821a49d1dbb164d9f0719c3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">KeyHeaderType</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a6dbb3ba2b821a49d1dbb164d9f0719c3">getKeyHeader</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int i)</td></tr>
<tr class="separator:a6dbb3ba2b821a49d1dbb164d9f0719c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83929fae99012d3b4c3411003415c856"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">KeyHeaderType</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a83929fae99012d3b4c3411003415c856">getKeyHeader</a> (const <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int i)</td></tr>
<tr class="separator:a83929fae99012d3b4c3411003415c856"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9029b266fea3cf0a296c48de06617059"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a9029b266fea3cf0a296c48de06617059">dataAt</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, short <a class="el" href="btree__interface_8cpp.html#a532a5ac60f338460e3b296ea8f17e799">ofs</a>)</td></tr>
<tr class="separator:a9029b266fea3cf0a296c48de06617059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93cbe19fd329531e5ea45c6a0016882c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a93cbe19fd329531e5ea45c6a0016882c">markUnused</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int keypos)</td></tr>
<tr class="separator:a93cbe19fd329531e5ea45c6a0016882c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680267f88221e80367df69d9884ce649"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a680267f88221e80367df69d9884ce649">totalDataSize</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>)</td></tr>
<tr class="separator:a680267f88221e80367df69d9884ce649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb4c970f789b8c7d7ad4b78eb03d36e5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#abb4c970f789b8c7d7ad4b78eb03d36e5">init</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>)</td></tr>
<tr class="separator:abb4c970f789b8c7d7ad4b78eb03d36e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a833c72e447f8661f6623f9fe72a1f644"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a833c72e447f8661f6623f9fe72a1f644">_alloc</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int bytes)</td></tr>
<tr class="memdesc:a833c72e447f8661f6623f9fe72a1f644"><td class="mdescLeft">&#160;</td><td class="mdescRight">We allocate space from the end of the buffer for data.  <a href="#a833c72e447f8661f6623f9fe72a1f644">More...</a><br /></td></tr>
<tr class="separator:a833c72e447f8661f6623f9fe72a1f644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb43d4424727d55d31c39ff7307e9260"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#abb43d4424727d55d31c39ff7307e9260">_unalloc</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int bytes)</td></tr>
<tr class="separator:abb43d4424727d55d31c39ff7307e9260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a775c0a13b0bc1475b4008c1d4fb99496"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a775c0a13b0bc1475b4008c1d4fb99496">_delKeyAtPos</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int keypos, bool mayEmpty=false)</td></tr>
<tr class="separator:a775c0a13b0bc1475b4008c1d4fb99496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8015bb052304fc99e4c4d845f7e91797"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a8015bb052304fc99e4c4d845f7e91797">popBack</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *recordLocOut, <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> *keyDataOut)</td></tr>
<tr class="memdesc:a8015bb052304fc99e4c4d845f7e91797"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pull rightmost key from the bucket and set its prevChild pointer to be the nextChild for the whole bucket.  <a href="#a8015bb052304fc99e4c4d845f7e91797">More...</a><br /></td></tr>
<tr class="separator:a8015bb052304fc99e4c4d845f7e91797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4d2da8a2a079745e3542ce90acf9bfb"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aa4d2da8a2a079745e3542ce90acf9bfb">mayDropKey</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int index, int refPos)</td></tr>
<tr class="memdesc:aa4d2da8a2a079745e3542ce90acf9bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">With this implementation, refPos == 0 disregards effect of refPos.  <a href="#aa4d2da8a2a079745e3542ce90acf9bfb">More...</a><br /></td></tr>
<tr class="separator:aa4d2da8a2a079745e3542ce90acf9bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a605169aa18d5361d814b7cb37e0380f2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a605169aa18d5361d814b7cb37e0380f2">_packedDataSize</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int refPos)</td></tr>
<tr class="separator:a605169aa18d5361d814b7cb37e0380f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9e8a0d4e10c766790c2028c5ab1236"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a4a9e8a0d4e10c766790c2028c5ab1236">setPacked</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>)</td></tr>
<tr class="separator:a4a9e8a0d4e10c766790c2028c5ab1236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e05a35d430f1324cae4c3fb839903d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a04e05a35d430f1324cae4c3fb839903d">setNotPacked</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>)</td></tr>
<tr class="separator:a04e05a35d430f1324cae4c3fb839903d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8f0a8a350ff9d2e9d19eb4629a0b27a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ae8f0a8a350ff9d2e9d19eb4629a0b27a">btreemod</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>)</td></tr>
<tr class="separator:ae8f0a8a350ff9d2e9d19eb4629a0b27a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abda46a86cdd93a9396b7eb2bf592fe32"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#abda46a86cdd93a9396b7eb2bf592fe32">splitPos</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int keypos)</td></tr>
<tr class="memdesc:abda46a86cdd93a9396b7eb2bf592fe32"><td class="mdescLeft">&#160;</td><td class="mdescRight">In the standard btree algorithm, we would split based on the existing keys <em>and</em> the new key.  <a href="#abda46a86cdd93a9396b7eb2bf592fe32">More...</a><br /></td></tr>
<tr class="separator:abda46a86cdd93a9396b7eb2bf592fe32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b1d293e887a72e935c48119c0042cd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a82b1d293e887a72e935c48119c0042cd">reserveKeysFront</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int nAdd)</td></tr>
<tr class="separator:a82b1d293e887a72e935c48119c0042cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeba59401755923218413c362a974011a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#aeba59401755923218413c362a974011a">setKey</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int i, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc, const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;<a class="el" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> prevChildBucket)</td></tr>
<tr class="separator:aeba59401755923218413c362a974011a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc7e7310c1283febc2af977c4754aa83"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#adc7e7310c1283febc2af977c4754aa83">isHead</a> (<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>)</td></tr>
<tr class="separator:adc7e7310c1283febc2af977c4754aa83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2a744c7172a443d11d77f502c07223"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a9a2a744c7172a443d11d77f502c07223">dumpBucket</a> (const <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, int indentLength=0)</td></tr>
<tr class="separator:a9a2a744c7172a443d11d77f502c07223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d579080451de5759cff47663e7de05"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#ac9d579080451de5759cff47663e7de05">assertValid</a> (const std::string &amp;<a class="el" href="namespacemongo.html#aa1aad236ca83643ab0718062dd62f4fc">ns</a>, <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *<a class="el" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, const Ordering &amp;<a class="el" href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">ordering</a>, bool force=false)</td></tr>
<tr class="separator:ac9d579080451de5759cff47663e7de05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7f4432f3cdc08f780e6f339f6c806822"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1HeadManager.html">HeadManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a7f4432f3cdc08f780e6f339f6c806822">_headManager</a></td></tr>
<tr class="separator:a7f4432f3cdc08f780e6f339f6c806822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d0baaceef14f711732f9cf655daf887"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a9d0baaceef14f711732f9cf655daf887">_recordStore</a></td></tr>
<tr class="separator:a9d0baaceef14f711732f9cf655daf887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081c263b90bf01ef14f89e2db0739f78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a081c263b90bf01ef14f89e2db0739f78">_cursorRegistry</a></td></tr>
<tr class="separator:a081c263b90bf01ef14f89e2db0739f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847298e2e0fc0f411ce04abbbde72e87"><td class="memItemLeft" align="right" valign="top">Ordering&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a847298e2e0fc0f411ce04abbbde72e87">_ordering</a></td></tr>
<tr class="separator:a847298e2e0fc0f411ce04abbbde72e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a01ebc9882539481d951b27b7f4eda4"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a7a01ebc9882539481d951b27b7f4eda4">_indexName</a></td></tr>
<tr class="separator:a7a01ebc9882539481d951b27b7f4eda4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699541b63483b7f86836800eca9830fd"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a699541b63483b7f86836800eca9830fd">_isUnique</a></td></tr>
<tr class="separator:a699541b63483b7f86836800eca9830fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:abe5e4ce75a6b8a88f8e2f1e8fd40c631"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#abe5e4ce75a6b8a88f8e2f1e8fd40c631">BtreeLogic::Builder</a></td></tr>
<tr class="separator:abe5e4ce75a6b8a88f8e2f1e8fd40c631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88d6f05f6e5348926a48c8b117c5604d"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a88d6f05f6e5348926a48c8b117c5604d">BtreeLogicTestBase&lt; BtreeLayout &gt;</a></td></tr>
<tr class="separator:a88d6f05f6e5348926a48c8b117c5604d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1933331432e8a95d55ac491a679df9dd"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1BtreeLogic.html#a1933331432e8a95d55ac491a679df9dd">ArtificialTreeBuilder&lt; BtreeLayout &gt;</a></td></tr>
<tr class="separator:a1933331432e8a95d55ac491a679df9dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a07c8444952b7bc406743ac3eb343c0a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07c8444952b7bc406743ac3eb343c0a3">&#9670;&nbsp;</a></span>BucketType</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef BtreeLayout::BucketType <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3f019770c9586e92f02b171a071c4421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f019770c9586e92f02b171a071c4421">&#9670;&nbsp;</a></span>KeyDataOwnedType</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef BtreeLayout::KeyOwnedType <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a3f019770c9586e92f02b171a071c4421">KeyDataOwnedType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac29c9a24e9c4753470ea6db35de411d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac29c9a24e9c4753470ea6db35de411d9">&#9670;&nbsp;</a></span>KeyDataType</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef BtreeLayout::KeyType <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa5d96fc2d1f8797908182b89ff511bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5d96fc2d1f8797908182b89ff511bf8">&#9670;&nbsp;</a></span>KeyHeaderType</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef BtreeLayout::FixedWidthKeyType <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">KeyHeaderType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9eebc3db54241bbc84b3feed0fea1142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eebc3db54241bbc84b3feed0fea1142">&#9670;&nbsp;</a></span>LocType</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef BtreeLayout::LocType <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a9eebc3db54241bbc84b3feed0fea1142">LocType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad0c836138663ea013643859a321c9243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0c836138663ea013643859a321c9243">&#9670;&nbsp;</a></span>BtreeLogic()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1HeadManager.html">HeadManager</a> *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a> *&#160;</td>
          <td class="paramname"><em>store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a> *&#160;</td>
          <td class="paramname"><em>cursors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ordering &amp;&#160;</td>
          <td class="paramname"><em>ordering</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isUnique</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>'head' manages the catalog information. </p>
<p>'store' allocates and frees buckets. 'ordering' is meta-information we store in the catalog. 'indexName' is a string identifying the index that we use to print errors with. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad94cd49eb3eaff25538961a4588e5155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad94cd49eb3eaff25538961a4588e5155">&#9670;&nbsp;</a></span>_addBucket()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_addBucket </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a833c72e447f8661f6623f9fe72a1f644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a833c72e447f8661f6623f9fe72a1f644">&#9670;&nbsp;</a></span>_alloc()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We allocate space from the end of the buffer for data. </p>
<p>The keynodes grow from the front. </p>

</div>
</div>
<a id="a775c0a13b0bc1475b4008c1d4fb99496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a775c0a13b0bc1475b4008c1d4fb99496">&#9670;&nbsp;</a></span>_delKeyAtPos()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_delKeyAtPos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keypos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mayEmpty</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5ad4b13549c255120d29256863c11f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad4b13549c255120d29256863c11f0b">&#9670;&nbsp;</a></span>_find()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_find </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>errorIfDup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyPositionOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>foundOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find a key within this btree bucket. </p>
<p>When duplicate keys are allowed, we use the <a class="el" href="classmongo_1_1DiskLoc.html" title="represents a disk location/offset on disk in a database. ">DiskLoc</a> of the record as if it were part of the key. That assures that even when there are many duplicates (e.g., 1 million) for a key, our performance is still good.</p>
<p>assertIfDup: if the key exists (ignoring the recordLoc), uassert</p>
<p>pos: for existing keys k0...kn-1. returns # it goes BEFORE. so key[pos-1] &lt; key &lt; key[pos] returns n if it goes after the last existing key. note result might be an Unused location! </p>

</div>
</div>
<a id="adba0f7f8b078ceadb2846e6d67bdd3e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adba0f7f8b078ceadb2846e6d67bdd3e1">&#9670;&nbsp;</a></span>_fullValidate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long long <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_fullValidate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long *&#160;</td>
          <td class="paramname"><em>unusedCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>strict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dumpBuckets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a0162f55f587785098a0adfe4eaa647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0162f55f587785098a0adfe4eaa647">&#9670;&nbsp;</a></span>_insert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_insert </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dupsAllowed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>leftChild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>rightChild</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aea94ba3f4fc15de3aa443f48fe3892d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea94ba3f4fc15de3aa443f48fe3892d3">&#9670;&nbsp;</a></span>_keyIsAt()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_keyIsAt </td>
          <td>(</td>
          <td class="paramtype">const BSONObj &amp;&#160;</td>
          <td class="paramname"><em>savedKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>savedLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a28d12796f209057e740272e627ca9d89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28d12796f209057e740272e627ca9d89">&#9670;&nbsp;</a></span>_locate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_locate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>posOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>foundOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recursively walk down the btree, looking for a match of key and recordLoc. </p>
<p>Caller should have acquired lock on bucketLoc. </p>

</div>
</div>
<a id="a6abc9608de59766d8a9bddeba9951d31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6abc9608de59766d8a9bddeba9951d31">&#9670;&nbsp;</a></span>_pack()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_pack </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>thisLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>refPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When we delete things, we just leave empty space until the node is full and then we repack it. </p>

</div>
</div>
<a id="a605169aa18d5361d814b7cb37e0380f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a605169aa18d5361d814b7cb37e0380f2">&#9670;&nbsp;</a></span>_packedDataSize()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_packedDataSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>refPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ef7ea66528d0b60af33d521f94a2961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef7ea66528d0b60af33d521f94a2961">&#9670;&nbsp;</a></span>_packReadyForMod()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_packReadyForMod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>refPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Version when write intent already declared. </p>

</div>
</div>
<a id="a4cd6020664851c128d8ab52ebda0a1cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd6020664851c128d8ab52ebda0a1cc">&#9670;&nbsp;</a></span>_rebalancedSeparatorPos()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_rebalancedSeparatorPos </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>leftIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This implementation must respect the meaning and value of lowWaterMark. </p>
<p>Also see comments in <a class="el" href="classmongo_1_1BtreeLogic.html#abda46a86cdd93a9396b7eb2bf592fe32" title="In the standard btree algorithm, we would split based on the existing keys and the new key...">splitPos()</a>. </p>

</div>
</div>
<a id="abb43d4424727d55d31c39ff7307e9260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb43d4424727d55d31c39ff7307e9260">&#9670;&nbsp;</a></span>_unalloc()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_unalloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a723095238b81634370e36c18b2f1c3de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a723095238b81634370e36c18b2f1c3de">&#9670;&nbsp;</a></span>advance() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::advance </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>bucketLocInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>posInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b3badd12e41ebcf2b80036dff36de10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3badd12e41ebcf2b80036dff36de10">&#9670;&nbsp;</a></span>advance() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::advance </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>posInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1fad264ec0565e58027674e4ea7c6f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1fad264ec0565e58027674e4ea7c6f9">&#9670;&nbsp;</a></span>advanceTo()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::advanceTo </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>thisLocInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyOfsInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>seekPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab3f05dafbeb351ebac32296a53572255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3f05dafbeb351ebac32296a53572255">&#9670;&nbsp;</a></span>advanceToImpl()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::advanceToImpl </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>thisLocInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyOfsInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>seekPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>find smallest/biggest value greater-equal/less-equal than specified </p>
<p>starting thisLoc + keyOfs will be strictly less than/strictly greater than keyBegin/keyBeginLen/keyEnd</p>
<p>All the direction checks below allowed me to refactor the code, but possibly separate forward and reverse implementations would be more efficient </p>

</div>
</div>
<a id="ac9d579080451de5759cff47663e7de05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d579080451de5759cff47663e7de05">&#9670;&nbsp;</a></span>assertValid()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::assertValid </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ordering &amp;&#160;</td>
          <td class="paramname"><em>ordering</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b0e345eb0a8e3443bd62acf6643b45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b0e345eb0a8e3443bd62acf6643b45e">&#9670;&nbsp;</a></span>basicInsert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::basicInsert </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>keypos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>recordLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Durability note: </p>
<p>We do separate intent declarations herein. Arguably one could just declare the whole bucket given we do group commits. This is something we could investigate later as to what is faster. Insert a key in a bucket with no complexity &ndash; no splits required Returns false if a split is required. </p>

</div>
</div>
<a id="ae8f0a8a350ff9d2e9d19eb4629a0b27a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8f0a8a350ff9d2e9d19eb4629a0b27a">&#9670;&nbsp;</a></span>btreemod()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> * <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::btreemod </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6a2cf2f19839acafcdfe067f073f1c00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a2cf2f19839acafcdfe067f073f1c00">&#9670;&nbsp;</a></span>canMergeChildren()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::canMergeChildren </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>leftIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a911cef0bfbc778f567b080b9dcd30560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a911cef0bfbc778f567b080b9dcd30560">&#9670;&nbsp;</a></span>childForPos()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> * <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::childForPos </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8590f5166a7b832c637c6a0e80ceab2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8590f5166a7b832c637c6a0e80ceab2f">&#9670;&nbsp;</a></span>childLocForPos()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a9eebc3db54241bbc84b3feed0fea1142">LocType</a> &amp; <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::childLocForPos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a694ff2fc751d8f29592d008774924452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a694ff2fc751d8f29592d008774924452">&#9670;&nbsp;</a></span>customBSONCmp()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::customBSONCmp </td>
          <td>(</td>
          <td class="paramtype">const BSONObj &amp;&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: Currently the Ordering implementation assumes a compound index will not have more keys than an unsigned variable has bits. </p>
<p>The same assumption is used in the implementation below with respect to the 'mask' variable.</p>
<p>'l' is a regular bsonobj</p>
<p>'rBegin' is composed partly of an existing bsonobj, and the remaining keys are taken from a vector of elements that frequently changes</p>
<p>see <a href="https://jira.mongodb.org/browse/SERVER-371">https://jira.mongodb.org/browse/SERVER-371</a> </p>

</div>
</div>
<a id="a81263fa16f3b259ad765e8b5c5ba1d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81263fa16f3b259ad765e8b5c5ba1d3a">&#9670;&nbsp;</a></span>customFind()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::customFind </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>high</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>seekPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>thisLocInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyOfsInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::pair&lt; <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>bestParent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6b2f0d1fef95bfff5c37267ab7435898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2f0d1fef95bfff5c37267ab7435898">&#9670;&nbsp;</a></span>customLocate() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::customLocate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>locInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyOfsInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>seekPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5e116f1389148844a7372bb38933a39a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e116f1389148844a7372bb38933a39a">&#9670;&nbsp;</a></span>customLocate() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::customLocate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>locInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyOfsInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a> &amp;&#160;</td>
          <td class="paramname"><em>seekPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::pair&lt; <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>bestParent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9029b266fea3cf0a296c48de06617059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9029b266fea3cf0a296c48de06617059">&#9670;&nbsp;</a></span>dataAt()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char * <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::dataAt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a551225bcb381bfd76b84d23512d9537b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a551225bcb381bfd76b84d23512d9537b">&#9670;&nbsp;</a></span>deallocBucket()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::deallocBucket </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab829139b0a8c4e4fe5403051bc741b42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab829139b0a8c4e4fe5403051bc741b42">&#9670;&nbsp;</a></span>delBucket()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::delBucket </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5615942c6c44ac51bd3287f9fa481eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5615942c6c44ac51bd3287f9fa481eba">&#9670;&nbsp;</a></span>deleteInternalKey()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::deleteInternalKey </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keypos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function replaces the specified key (k) by either the prev or next key in the btree (k'). </p>
<p>We require that k have either a left or right child. If k has a left child, we set k' to the prev key of k, which must be a leaf present in the left child. If k does not have a left child, we set k' to the next key of k, which must be a leaf present in the right child. When we replace k with k', we copy k' over k (which may cause a split) and then remove k' from its original location. Because k' is stored in a descendent of k, replacing k by k' will not modify the storage location of the original k', and we can easily remove k' from its original location.</p>
<p>This function is only needed in cases where k has a left or right child; in other cases a simpler key removal implementation is possible.</p>
<p>NOTE on noncompliant BtreeBuilder btrees: It is possible (though likely rare) for btrees created by BtreeBuilder to have k' that is not a leaf, see SERVER-2732. These cases are handled in the same manner as described in the "legacy btree structures" note below.</p>
<p>NOTE on legacy btree structures: In legacy btrees, k' can be a nonleaf. In such a case we 'delete' k by marking it as an unused node rather than replacing it with k'. Also, k' may be a leaf but marked as an unused node. In such a case we replace k by k', preserving the key's unused marking. This function is only expected to mark a key as unused when handling a legacy btree. </p>

</div>
</div>
<a id="ac4d550cd54633e654b2df276653bbd7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d550cd54633e654b2df276653bbd7f">&#9670;&nbsp;</a></span>delKeyAtPos()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::delKeyAtPos </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>May delete the bucket 'bucket' rendering 'bucketLoc' invalid. </p>

</div>
</div>
<a id="a4933441cb102fbd0fe4d2c1f84ca3695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4933441cb102fbd0fe4d2c1f84ca3695">&#9670;&nbsp;</a></span>doBalanceChildren()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::doBalanceChildren </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>leftIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3a55f148cbd50d8705c3c2166e1c67a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a55f148cbd50d8705c3c2166e1c67a3">&#9670;&nbsp;</a></span>doBalanceLeftToRight()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::doBalanceLeftToRight </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>thisLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>leftIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>lchild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>rchild</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6178898a2c0bb5fa425a7d618c37c559"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6178898a2c0bb5fa425a7d618c37c559">&#9670;&nbsp;</a></span>doBalanceRightToLeft()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::doBalanceRightToLeft </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>thisLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>leftIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>lchild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>rchild</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7d443a373ec2ed86e134990ef98fd169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d443a373ec2ed86e134990ef98fd169">&#9670;&nbsp;</a></span>doMergeChildren()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::doMergeChildren </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>leftIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a45371d574792f0468f75e58c3cf418ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45371d574792f0468f75e58c3cf418ef">&#9670;&nbsp;</a></span>dropFront()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::dropFront </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nDrop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>refpos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9a2a744c7172a443d11d77f502c07223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a2a744c7172a443d11d77f502c07223">&#9670;&nbsp;</a></span>dumpBucket()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::dumpBucket </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indentLength</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7f9eefeb04e6ad5b6081d8bf3c1a03ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f9eefeb04e6ad5b6081d8bf3c1a03ed">&#9670;&nbsp;</a></span>dupKeyCheck()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::dupKeyCheck </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BSONObj &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9d898992378bc663ce74a42037c655f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d898992378bc663ce74a42037c655f2">&#9670;&nbsp;</a></span>dupKeyError()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::dupKeyError </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a5072d4e2ffe6d976a5542c2201ff01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a5072d4e2ffe6d976a5542c2201ff01">&#9670;&nbsp;</a></span>exists()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::exists </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2f86d6b940d03eecaeca3937d22fa624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f86d6b940d03eecaeca3937d22fa624">&#9670;&nbsp;</a></span>fixParentPtrs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::fixParentPtrs </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>firstIndex</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lastIndex</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This can cause a lot of additional page writes when we assign buckets to different parents. </p>
<p>Maybe get rid of parent ptrs? </p>

</div>
</div>
<a id="aef6fbbb409d7e91c402ab62f0c820ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef6fbbb409d7e91c402ab62f0c820ece">&#9670;&nbsp;</a></span>fullValidate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">long long <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::fullValidate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long *&#160;</td>
          <td class="paramname"><em>unusedCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>strict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dumpBuckets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5464adfd8ca3def7a2eeb6f2de09ae40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5464adfd8ca3def7a2eeb6f2de09ae40">&#9670;&nbsp;</a></span>getBucket() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a>* <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getBucket </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>dl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a187ab227f9faa23a85baa1b7b3888afc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a187ab227f9faa23a85baa1b7b3888afc">&#9670;&nbsp;</a></span>getBucket() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> * <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getBucket </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const RecordId&#160;</td>
          <td class="paramname"><em>dl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab9d956e7d43b44d9e82e93c86eea73e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9d956e7d43b44d9e82e93c86eea73e7">&#9670;&nbsp;</a></span>getDiskLoc()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getDiskLoc </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>keyOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad0af6b21928a1c31f5b2f719d465465a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0af6b21928a1c31f5b2f719d465465a">&#9670;&nbsp;</a></span>getFullKey()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="structmongo_1_1BtreeLogic_1_1FullKey.html">FullKey</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getFullKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab52d3f49ee299f1015a5dc1af9dd3900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab52d3f49ee299f1015a5dc1af9dd3900">&#9670;&nbsp;</a></span>getHead()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getHead </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaa643502a28ec8d37c7db06647842be0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa643502a28ec8d37c7db06647842be0">&#9670;&nbsp;</a></span>getKey()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">BSONObj <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getKey </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>keyOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6dbb3ba2b821a49d1dbb164d9f0719c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dbb3ba2b821a49d1dbb164d9f0719c3">&#9670;&nbsp;</a></span>getKeyHeader() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">KeyHeaderType</a> &amp; <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getKeyHeader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a83929fae99012d3b4c3411003415c856"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83929fae99012d3b4c3411003415c856">&#9670;&nbsp;</a></span>getKeyHeader() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">KeyHeaderType</a> &amp; <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getKeyHeader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a938dd93e41eba382a1a36bcd6ae4148a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a938dd93e41eba382a1a36bcd6ae4148a">&#9670;&nbsp;</a></span>getRandomEntry()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmongo_1_1IndexKeyEntry.html">IndexKeyEntry</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getRandomEntry </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pseudo-random element from the tree. </p>
<p>It is an error to call this method if the tree is empty. </p>

</div>
</div>
<a id="af9e8953b030dcde584d7719bd1d40430"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9e8953b030dcde584d7719bd1d40430">&#9670;&nbsp;</a></span>getRecordStore()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a>* <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getRecordStore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a07275f1e312c31de44192103267cc879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07275f1e312c31de44192103267cc879">&#9670;&nbsp;</a></span>getRoot()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> * <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getRoot </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5a0c37b798c66bb4b63626c99bd6ec84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a0c37b798c66bb4b63626c99bd6ec84">&#9670;&nbsp;</a></span>getRootLoc()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::getRootLoc </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adfa067ea79bae4104fb606401f3acc79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa067ea79bae4104fb606401f3acc79">&#9670;&nbsp;</a></span>indexInParent()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::indexInParent </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abb4c970f789b8c7d7ad4b78eb03d36e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb4c970f789b8c7d7ad4b78eb03d36e5">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a39c16c1676134b2f9ff173ed2875a4d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c16c1676134b2f9ff173ed2875a4d7">&#9670;&nbsp;</a></span>initAsEmpty()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::initAsEmpty </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns OK if the index was uninitialized before, error status otherwise. </p>

</div>
</div>
<a id="ac2849c3428290e87d9c246caf2ea93d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2849c3428290e87d9c246caf2ea93d1">&#9670;&nbsp;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::insert </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BSONObj &amp;&#160;</td>
          <td class="paramname"><em>rawKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dupsAllowed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae20519b6244adb662fe5604dbde825bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae20519b6244adb662fe5604dbde825bd">&#9670;&nbsp;</a></span>insertHere()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::insertHere </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>leftChildLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>rightChildLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>insert a key in this bucket, splitting if necessary. </p>
<p>- where to insert the key in range 0..n. 0=make leftmost, n=make rightmost. NOTE this function may free some data, and as a result the value passed for keypos may be invalid after calling <a class="el" href="classmongo_1_1BtreeLogic.html#ae20519b6244adb662fe5604dbde825bd" title="insert a key in this bucket, splitting if necessary. ">insertHere()</a></p>
<p>Some of the write intent signaling below relies on the implementation of the optimized write intent code in <a class="el" href="classmongo_1_1BtreeLogic.html#a7b0e345eb0a8e3443bd62acf6643b45e" title="Durability note: ">basicInsert()</a>. </p>

</div>
</div>
<a id="a177b1c5b3c7f807446f70c937bfc7369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a177b1c5b3c7f807446f70c937bfc7369">&#9670;&nbsp;</a></span>isEmpty()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::isEmpty </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adc7e7310c1283febc2af977c4754aa83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc7e7310c1283febc2af977c4754aa83">&#9670;&nbsp;</a></span>isHead()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::isHead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa91a6613bc9da9fb79bac4c43133cf6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa91a6613bc9da9fb79bac4c43133cf6b">&#9670;&nbsp;</a></span>isUnique()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::isUnique </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5342c281317e32014c07a9c3f5fab512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5342c281317e32014c07a9c3f5fab512">&#9670;&nbsp;</a></span>keyIsUsed()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::keyIsUsed </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7a80d3d30fb5156e422d321a534f33a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a80d3d30fb5156e422d321a534f33a5">&#9670;&nbsp;</a></span>locate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::locate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BSONObj &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>posOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>bucketLocOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Navigates down the tree and locates the bucket and position containing a record with the specified &lt;key, recordLoc&gt; combination. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the exact &lt;key, recordLoc&gt; was found. Otherwise, false and the bucketLocOut would contain the bucket containing key which is before or after the searched one (dependent on the direction). </dd></dl>

</div>
</div>
<a id="a15b46faf02679f143aef0b36f18ba009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b46faf02679f143aef0b36f18ba009">&#9670;&nbsp;</a></span>lowWaterMark()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::lowWaterMark </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a93cbe19fd329531e5ea45c6a0016882c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93cbe19fd329531e5ea45c6a0016882c">&#9670;&nbsp;</a></span>markUnused()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::markUnused </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keypos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a852b5b36b7b41719065b2b9cf21a3778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a852b5b36b7b41719065b2b9cf21a3778">&#9670;&nbsp;</a></span>mayBalanceWithNeighbors()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::mayBalanceWithNeighbors </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4d2da8a2a079745e3542ce90acf9bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4d2da8a2a079745e3542ce90acf9bfb">&#9670;&nbsp;</a></span>mayDropKey()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::mayDropKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>refPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>With this implementation, refPos == 0 disregards effect of refPos. </p>
<p>index &gt; 0 prevents creation of an empty bucket. </p>

</div>
</div>
<a id="a622661b8c81f2f5965dc3a603f0f5887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a622661b8c81f2f5965dc3a603f0f5887">&#9670;&nbsp;</a></span>newBuilder()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>&lt; BtreeLayout &gt;::<a class="el" href="classmongo_1_1BtreeLogic_1_1Builder.html">Builder</a> * <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::newBuilder </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dupsAllowed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Caller owns the returned pointer. </p>
<p>'this' must outlive the returned pointer. </p>

</div>
</div>
<a id="adae15c1448a850bb120f1683b2c13680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adae15c1448a850bb120f1683b2c13680">&#9670;&nbsp;</a></span>ordering()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Ordering <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::ordering </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8015bb052304fc99e4c4d845f7e91797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8015bb052304fc99e4c4d845f7e91797">&#9670;&nbsp;</a></span>popBack()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::popBack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>recordLocOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> *&#160;</td>
          <td class="paramname"><em>keyDataOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pull rightmost key from the bucket and set its prevChild pointer to be the nextChild for the whole bucket. </p>
<p>It is assumed that caller already has the old value of the nextChild pointer and is about to add a pointer to it elsewhere in the tree.</p>
<p>This is only used by <a class="el" href="classmongo_1_1BtreeLogic_1_1Builder.html">BtreeLogic::Builder</a>. Think very hard (and change this comment) before using it anywhere else.</p>
<p>WARNING: The keyDataOut that is filled out by this function points to newly unalloced memory inside of this bucket. It only remains valid until the next write to this bucket. </p>

</div>
</div>
<a id="a791dea44584a32fd0e448d5c0e0af91f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a791dea44584a32fd0e448d5c0e0af91f">&#9670;&nbsp;</a></span>pushBack()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::pushBack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>prevChild</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to push key into bucket. </p>
<p>Add a key.</p>
<p>Return false if it can't because key doesn't fit.</p>
<p>bucket must be declared as writable by the caller. The new key/recordLoc pair must be higher than any others in bucket.</p>
<p>TODO needs 'this' for _ordering for sanity check</p>
<p>Must be &gt; all existing. Be careful to set next ptr right. </p>

</div>
</div>
<a id="a3753b0d680215363bd92c8d3df73ddd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3753b0d680215363bd92c8d3df73ddd5">&#9670;&nbsp;</a></span>recordRandomWalk()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::recordRandomWalk </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PseudoRandom *&#160;</td>
          <td class="paramname"><em>prng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>curBucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>nBucketsInCurrentLevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int64_t &gt; *&#160;</td>
          <td class="paramname"><em>nKeysInLevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structmongo_1_1BtreeLogic_1_1FullKey.html">FullKey</a> &gt; *&#160;</td>
          <td class="paramname"><em>selectedKeys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Does a random walk through the tree, recording information about the walk along the way. </p>
<p>'nKeysInLevel' will be filled in such that 'nKeysInLevel[i]' is an approximation of the number of keys in the ith level of the B-tree.</p>
<p>'selectedKeys' will be filled in such that 'selectedKeys[i]' will be a pseudo-random key selected from the bucket we went through on the ith level of the B-tree. </p>

</div>
</div>
<a id="ac3c0ade6aaab94745e2f1d44925c63b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c0ade6aaab94745e2f1d44925c63b4">&#9670;&nbsp;</a></span>replaceWithNextChild()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::replaceWithNextChild </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a82b1d293e887a72e935c48119c0042cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b1d293e887a72e935c48119c0042cd">&#9670;&nbsp;</a></span>reserveKeysFront()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::reserveKeysFront </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nAdd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e56edaacaa50ec15850c14fbf10167c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e56edaacaa50ec15850c14fbf10167c">&#9670;&nbsp;</a></span>restorePosition()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::restorePosition </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BSONObj &amp;&#160;</td>
          <td class="paramname"><em>savedKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>savedLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>bucketInOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>keyOffsetInOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2c7d869e9ec7394447619df920107478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c7d869e9ec7394447619df920107478">&#9670;&nbsp;</a></span>savedCursors()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a>* <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::savedCursors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5a39142d26b4ee0973ab6ace112d14b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a39142d26b4ee0973ab6ace112d14b9">&#9670;&nbsp;</a></span>setInternalKey()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::setInternalKey </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keypos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>lchild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>rchild</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aeba59401755923218413c362a974011a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeba59401755923218413c362a974011a">&#9670;&nbsp;</a></span>setKey()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::setKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>prevChildBucket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a04e05a35d430f1324cae4c3fb839903d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e05a35d430f1324cae4c3fb839903d">&#9670;&nbsp;</a></span>setNotPacked()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::setNotPacked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a9e8a0d4e10c766790c2028c5ab1236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a9e8a0d4e10c766790c2028c5ab1236">&#9670;&nbsp;</a></span>setPacked()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::setPacked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7afac1dbac596159f1d922cdb0bc7e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7afac1dbac596159f1d922cdb0bc7e74">&#9670;&nbsp;</a></span>skipUnusedKeys()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::skipUnusedKeys </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> *&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab70aa010baf4859bab9bebdef89cc086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab70aa010baf4859bab9bebdef89cc086">&#9670;&nbsp;</a></span>split()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::split </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keypos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>recordLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>lchild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>rchild</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abda46a86cdd93a9396b7eb2bf592fe32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abda46a86cdd93a9396b7eb2bf592fe32">&#9670;&nbsp;</a></span>splitPos()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::splitPos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keypos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>In the standard btree algorithm, we would split based on the existing keys <em>and</em> the new key. </p>
<p>But that's more work to implement, so we split the existing keys and then add the new key.</p>
<p>There are several published heuristic algorithms for doing splits, but basically what you want are (1) even balancing between the two sides and (2) a small split key so the parent can have a larger branching factor.</p>
<p>We just have a simple algorithm right now: if a key includes the halfway point (or 10% way point) in terms of bytes, split on that key; otherwise split on the key immediately to the left of the halfway point (or 10% point).</p>
<p>This function is expected to be called on a packed bucket. </p>

</div>
</div>
<a id="a680267f88221e80367df69d9884ce649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a680267f88221e80367df69d9884ce649">&#9670;&nbsp;</a></span>totalDataSize()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::totalDataSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af13ac8d9773564bb0cc07105051d8649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af13ac8d9773564bb0cc07105051d8649">&#9670;&nbsp;</a></span>touch()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::touch </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa0abecbf7f1bc00c71b3ca8153b7026d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0abecbf7f1bc00c71b3ca8153b7026d">&#9670;&nbsp;</a></span>truncateTo()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::truncateTo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>N</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>refPos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a87f29aa78367d5d1bcf092bd2166d9a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87f29aa78367d5d1bcf092bd2166d9a5">&#9670;&nbsp;</a></span>tryBalanceChildren()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::tryBalanceChildren </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a> *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>bucketLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>leftIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad9662f4ba0c510de8393f2247740f252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9662f4ba0c510de8393f2247740f252">&#9670;&nbsp;</a></span>unindex()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::unindex </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BSONObj &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &amp;&#160;</td>
          <td class="paramname"><em>recordLoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9f8eeaa5ea907080baa587d96d18016a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8eeaa5ea907080baa587d96d18016a">&#9670;&nbsp;</a></span>wouldCreateDup()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::wouldCreateDup </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td>
          <td class="paramname"><em>self</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a1933331432e8a95d55ac491a679df9dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1933331432e8a95d55ac491a679df9dd">&#9670;&nbsp;</a></span>ArtificialTreeBuilder< BtreeLayout ></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classmongo_1_1ArtificialTreeBuilder.html">ArtificialTreeBuilder</a>&lt; BtreeLayout &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abe5e4ce75a6b8a88f8e2f1e8fd40c631"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe5e4ce75a6b8a88f8e2f1e8fd40c631">&#9670;&nbsp;</a></span>BtreeLogic::Builder</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classmongo_1_1BtreeLogic_1_1Builder.html">BtreeLogic::Builder</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a88d6f05f6e5348926a48c8b117c5604d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88d6f05f6e5348926a48c8b117c5604d">&#9670;&nbsp;</a></span>BtreeLogicTestBase< BtreeLayout ></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classmongo_1_1BtreeLogicTestBase.html">BtreeLogicTestBase</a>&lt; BtreeLayout &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a081c263b90bf01ef14f89e2db0739f78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a081c263b90bf01ef14f89e2db0739f78">&#9670;&nbsp;</a></span>_cursorRegistry</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a>* <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_cursorRegistry</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7f4432f3cdc08f780e6f339f6c806822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f4432f3cdc08f780e6f339f6c806822">&#9670;&nbsp;</a></span>_headManager</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1HeadManager.html">HeadManager</a>* <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_headManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7a01ebc9882539481d951b27b7f4eda4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a01ebc9882539481d951b27b7f4eda4">&#9670;&nbsp;</a></span>_indexName</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_indexName</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a699541b63483b7f86836800eca9830fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a699541b63483b7f86836800eca9830fd">&#9670;&nbsp;</a></span>_isUnique</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const bool <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_isUnique</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a847298e2e0fc0f411ce04abbbde72e87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a847298e2e0fc0f411ce04abbbde72e87">&#9670;&nbsp;</a></span>_ordering</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Ordering <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_ordering</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9d0baaceef14f711732f9cf655daf887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d0baaceef14f711732f9cf655daf887">&#9670;&nbsp;</a></span>_recordStore</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class BtreeLayout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a>* <a class="el" href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a>&lt; BtreeLayout &gt;::_recordStore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/btree/<a class="el" href="btree__logic_8h_source.html">btree_logic.h</a></li>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/btree/<a class="el" href="btree__logic_8cpp.html">btree_logic.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
