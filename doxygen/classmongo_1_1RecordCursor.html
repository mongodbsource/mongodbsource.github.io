<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::RecordCursor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classmongo_1_1RecordCursor.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmongo_1_1RecordCursor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::RecordCursor Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Retrieves Records from a <a class="el" href="classmongo_1_1RecordStore.html" title="An abstraction used for storing documents in a collection or entries in an index.">RecordStore</a>.  
 <a href="classmongo_1_1RecordCursor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="record__store_8h_source.html">record_store.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mongo::RecordCursor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmongo_1_1RecordCursor.png" usemap="#mongo::RecordCursor_map" alt=""/>
  <map id="mongo::RecordCursor_map" name="mongo::RecordCursor_map">
<area href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html" title="Iterates over all records within a single extent." alt="mongo::RecordStoreV1Base::IntraExtentIterator" shape="rect" coords="0,56,321,80"/>
<area href="classmongo_1_1RecordStoreV1RepairCursor.html" title="This iterator will go over the collection twice - once going forward (first extent -&gt; last extent) an..." alt="mongo::RecordStoreV1RepairCursor" shape="rect" coords="331,56,652,80"/>
<area href="classmongo_1_1SeekableRecordCursor.html" title="Adds explicit seeking of records." alt="mongo::SeekableRecordCursor" shape="rect" coords="993,56,1314,80"/>
<area href="classmongo_1_1WiredTigerRecordStore_1_1RandomCursor.html" alt="mongo::WiredTigerRecordStore::RandomCursor" shape="rect" coords="1324,56,1645,80"/>
<area href="classmongo_1_1CappedRecordStoreV1Iterator.html" title="This class iterates over a capped collection identified by &#39;ns&#39;." alt="mongo::CappedRecordStoreV1Iterator" shape="rect" coords="0,112,321,136"/>
<area href="classmongo_1_1EmptyRecordCursor.html" alt="mongo::EmptyRecordCursor" shape="rect" coords="331,112,652,136"/>
<area href="classmongo_1_1EphemeralForTestRecordStore_1_1Cursor.html" alt="mongo::EphemeralForTestRecordStore::Cursor" shape="rect" coords="662,112,983,136"/>
<area href="classmongo_1_1EphemeralForTestRecordStore_1_1ReverseCursor.html" alt="mongo::EphemeralForTestRecordStore::ReverseCursor" shape="rect" coords="993,112,1314,136"/>
<area href="classmongo_1_1MobileRecordStore_1_1Cursor.html" alt="mongo::MobileRecordStore::Cursor" shape="rect" coords="1324,112,1645,136"/>
<area href="classmongo_1_1SimpleRecordStoreV1Iterator.html" title="This class iterates over a non-capped collection identified by &#39;ns&#39;." alt="mongo::SimpleRecordStoreV1Iterator" shape="rect" coords="1655,112,1976,136"/>
<area href="classmongo_1_1WiredTigerRecordStoreCursorBase.html" alt="mongo::WiredTigerRecordStoreCursorBase" shape="rect" coords="1986,112,2307,136"/>
<area href="classmongo_1_1WiredTigerRecordStorePrefixedCursor.html" alt="mongo::WiredTigerRecordStorePrefixedCursor" shape="rect" coords="1820,168,2141,192"/>
<area href="classmongo_1_1WiredTigerRecordStoreStandardCursor.html" alt="mongo::WiredTigerRecordStoreStandardCursor" shape="rect" coords="2151,168,2472,192"/>
  </map>
</div></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Retrieves Records from a <a class="el" href="classmongo_1_1RecordStore.html" title="An abstraction used for storing documents in a collection or entries in an index.">RecordStore</a>. </p>
<p>A cursor is constructed with a direction flag with the following effects:</p><ul>
<li>The direction that <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data.">next()</a> moves.</li>
<li>If a restore cannot return to the saved position, cursors will be positioned on the closest position <em>after</em> the query in the direction of the scan.</li>
</ul>
<p>A cursor is tied to a transaction, such as the OperationContext or a <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a> inside that context. Any cursor acquired inside a transaction is invalid outside of that transaction, instead use the save and restore methods to reestablish the cursor.</p>
<p>Any method other than invalidate and the save methods may throw <a class="el" href="classmongo_1_1WriteConflictException.html" title="This is thrown if during a write, two or more operations conflict with each other.">WriteConflictException</a>. If that happens, the cursor may not be used again until it has been saved and successfully restored. If <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data.">next()</a> or <a class="el" href="classmongo_1_1RecordCursor.html#a02cbb295261cf8bd88b81343e39b0924" title="Recovers from potential state changes in underlying data.">restore()</a> throw a WCE the cursor's position will be the same as before the call (strong exception guarantee). All other methods leave the cursor in a valid state but with an unspecified position (basic exception guarantee). If any exception other than WCE is thrown, the cursor must be destroyed, which is guaranteed not to leak any resources.</p>
<p>Any returned unowned BSON is only valid until the next call to any method on this interface.</p>
<p>Implementations may override any default implementation if they can provide a more efficient implementation.</p>
<p>Storage engines only need to implement the derived <a class="el" href="classmongo_1_1SeekableRecordCursor.html" title="Adds explicit seeking of records.">SeekableRecordCursor</a>, but may choose to implement this simpler interface for cursors used for repair or random traversal.</p>
<p>IMPORTANT NOTE FOR DOCUMENT-LOCKING ENGINES: If you implement capped collections with a "visibility" system such that documents that exist in your snapshot but were inserted after the last uncommitted document are hidden, you must follow the following rules:</p><ul>
<li><a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data.">next()</a> on forward cursors must never return invisible documents.</li>
<li>If <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data.">next()</a> on a forward cursor hits an invisible document, it should behave as if it hit the end of the collection.</li>
<li>Reverse cursors must ignore the visibility filter. That means that they initially return the newest committed record in the collection and may skip over uncommitted records.</li>
<li><a class="el" href="classmongo_1_1SeekableRecordCursor.html#a3b155b8becf19b5ad66df5ba566918ed" title="Seeks to a Record with the provided id.">SeekableRecordCursor::seekExact()</a> must ignore the visibility filter and return the requested document even if it is supposed to be invisible. TODO SERVER-18934 Handle this above the storage engine layer so storage engines don't have to deal with capped visibility. </li>
</ul>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a90a8a7aa3b7627f8484a540e0738f17a"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#a90a8a7aa3b7627f8484a540e0738f17a">~RecordCursor</a> ()=default</td></tr>
<tr class="separator:a90a8a7aa3b7627f8484a540e0738f17a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0f51852cb7de514235f2b944c546d36"><td class="memItemLeft" align="right" valign="top">virtual boost::optional&lt; <a class="el" href="structmongo_1_1Record.html">Record</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36">next</a> ()=0</td></tr>
<tr class="memdesc:ac0f51852cb7de514235f2b944c546d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves forward and returns the new data or boost::none if there is no more data.  <a href="#ac0f51852cb7de514235f2b944c546d36">More...</a><br /></td></tr>
<tr class="separator:ac0f51852cb7de514235f2b944c546d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7298f96267a9b2e8fec9a5618b56f854"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#a7298f96267a9b2e8fec9a5618b56f854">save</a> ()=0</td></tr>
<tr class="memdesc:a7298f96267a9b2e8fec9a5618b56f854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares for state changes in underlying data in a way that allows the cursor's current position to be restored.  <a href="#a7298f96267a9b2e8fec9a5618b56f854">More...</a><br /></td></tr>
<tr class="separator:a7298f96267a9b2e8fec9a5618b56f854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02cbb295261cf8bd88b81343e39b0924"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#a02cbb295261cf8bd88b81343e39b0924">restore</a> ()=0</td></tr>
<tr class="memdesc:a02cbb295261cf8bd88b81343e39b0924"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recovers from potential state changes in underlying data.  <a href="#a02cbb295261cf8bd88b81343e39b0924">More...</a><br /></td></tr>
<tr class="separator:a02cbb295261cf8bd88b81343e39b0924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4df2f02d8d65fc3f84290bab898014"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#a5a4df2f02d8d65fc3f84290bab898014">detachFromOperationContext</a> ()=0</td></tr>
<tr class="memdesc:a5a4df2f02d8d65fc3f84290bab898014"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches from the OperationContext and releases any storage-engine state.  <a href="#a5a4df2f02d8d65fc3f84290bab898014">More...</a><br /></td></tr>
<tr class="separator:a5a4df2f02d8d65fc3f84290bab898014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa1c10252601db5043017111f47cf67"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#adfa1c10252601db5043017111f47cf67">reattachToOperationContext</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>)=0</td></tr>
<tr class="memdesc:adfa1c10252601db5043017111f47cf67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reattaches to the OperationContext and reacquires any storage-engine state.  <a href="#adfa1c10252601db5043017111f47cf67">More...</a><br /></td></tr>
<tr class="separator:adfa1c10252601db5043017111f47cf67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac669ee201e2113f17c2a01883dd39322"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#ac669ee201e2113f17c2a01883dd39322">invalidate</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const RecordId &amp;id)</td></tr>
<tr class="memdesc:ac669ee201e2113f17c2a01883dd39322"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform the cursor that this id is being invalidated.  <a href="#ac669ee201e2113f17c2a01883dd39322">More...</a><br /></td></tr>
<tr class="separator:ac669ee201e2113f17c2a01883dd39322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c844f7e96de087939afc74a07a663d2"><td class="memItemLeft" align="right" valign="top">virtual std::unique_ptr&lt; <a class="el" href="classmongo_1_1RecordFetcher.html">RecordFetcher</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#a2c844f7e96de087939afc74a07a663d2">fetcherForNext</a> () const</td></tr>
<tr class="memdesc:a2c844f7e96de087939afc74a07a663d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a <a class="el" href="classmongo_1_1RecordFetcher.html" title="Used for yielding while data is fetched from disk.">RecordFetcher</a> if needed for a call to <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data.">next()</a> or none if unneeded.  <a href="#a2c844f7e96de087939afc74a07a663d2">More...</a><br /></td></tr>
<tr class="separator:a2c844f7e96de087939afc74a07a663d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a90a8a7aa3b7627f8484a540e0738f17a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a8a7aa3b7627f8484a540e0738f17a">&#9670;&nbsp;</a></span>~RecordCursor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual mongo::RecordCursor::~RecordCursor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5a4df2f02d8d65fc3f84290bab898014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4df2f02d8d65fc3f84290bab898014">&#9670;&nbsp;</a></span>detachFromOperationContext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordCursor::detachFromOperationContext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detaches from the OperationContext and releases any storage-engine state. </p>
<p>It is only legal to call this when in a "saved" state. While in the "detached" state, it is only legal to call reattachToOperationContext or the destructor. It is not legal to call <a class="el" href="classmongo_1_1RecordCursor.html#a5a4df2f02d8d65fc3f84290bab898014" title="Detaches from the OperationContext and releases any storage-engine state.">detachFromOperationContext()</a> while already in the detached state. </p>

<p>Implemented in <a class="el" href="classmongo_1_1WiredTigerRecordStore_1_1RandomCursor.html#afa88c1c60a9d63cf43df4a341adc8065">mongo::WiredTigerRecordStore::RandomCursor</a>, <a class="el" href="classmongo_1_1WiredTigerRecordStoreCursorBase.html#a8039e65fc98ad81ddcee8587fc621cd2">mongo::WiredTigerRecordStoreCursorBase</a>, <a class="el" href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html#a2a0e5a8a90ba7dd71460fb498b7b73e8">mongo::RecordStoreV1Base::IntraExtentIterator</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1ReverseCursor.html#a726ff57195c572f5e589135652b69917">mongo::EphemeralForTestRecordStore::ReverseCursor</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1Cursor.html#accdca22c48f76a1186ec1a97c4e97bad">mongo::EphemeralForTestRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1MobileRecordStore_1_1Cursor.html#a6adbfcb17e22ec77cb2ff4a7bbc32b50">mongo::MobileRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1EmptyRecordCursor.html#aeb6d6f71968f73d08c217bd7ae0773d1">mongo::EmptyRecordCursor</a>, <a class="el" href="classmongo_1_1CappedRecordStoreV1Iterator.html#a6d804872ec690411fac4a0967ac05582">mongo::CappedRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1SimpleRecordStoreV1Iterator.html#a09d5a75a2963933ebe2fdebd07add840">mongo::SimpleRecordStoreV1Iterator</a>, and <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a237b7836f38e400490d0b31ace18d99d">mongo::RecordStoreV1RepairCursor</a>.</p>

</div>
</div>
<a id="a2c844f7e96de087939afc74a07a663d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c844f7e96de087939afc74a07a663d2">&#9670;&nbsp;</a></span>fetcherForNext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::unique_ptr&lt;<a class="el" href="classmongo_1_1RecordFetcher.html">RecordFetcher</a>&gt; mongo::RecordCursor::fetcherForNext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a <a class="el" href="classmongo_1_1RecordFetcher.html" title="Used for yielding while data is fetched from disk.">RecordFetcher</a> if needed for a call to <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data.">next()</a> or none if unneeded. </p>

<p>Reimplemented in <a class="el" href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html#ab6fa0dc0df0d4f1c823cba74eb201459">mongo::RecordStoreV1Base::IntraExtentIterator</a>, <a class="el" href="classmongo_1_1CappedRecordStoreV1Iterator.html#adaf0fee74d3c6f9dd98d1206bfdf9cb5">mongo::CappedRecordStoreV1Iterator</a>, and <a class="el" href="classmongo_1_1SimpleRecordStoreV1Iterator.html#ad770b8a0ac7b35dbb7d9bf2365b39169">mongo::SimpleRecordStoreV1Iterator</a>.</p>

</div>
</div>
<a id="ac669ee201e2113f17c2a01883dd39322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac669ee201e2113f17c2a01883dd39322">&#9670;&nbsp;</a></span>invalidate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordCursor::invalidate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const RecordId &amp;&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inform the cursor that this id is being invalidated. </p>
<p>Must be called between save and restore. The opCtx is that of the operation causing the invalidation, not the opCtx using the cursor.</p>
<p>WARNING: Storage engines other than MMAPv1 should use the default implementation, and not depend on this being called. </p>

<p>Reimplemented in <a class="el" href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html#a745db628c2f8c91e6f701c2f2469f61f">mongo::RecordStoreV1Base::IntraExtentIterator</a>, <a class="el" href="classmongo_1_1CappedRecordStoreV1Iterator.html#a3a8c7ae10c14fba5d241b5580931131c">mongo::CappedRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1SimpleRecordStoreV1Iterator.html#a0900425da4c6b7f2fd4bd64a3baf2ec0">mongo::SimpleRecordStoreV1Iterator</a>, and <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#acb32658a29a1668cc4a4286ab2d31cbb">mongo::RecordStoreV1RepairCursor</a>.</p>

</div>
</div>
<a id="ac0f51852cb7de514235f2b944c546d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0f51852cb7de514235f2b944c546d36">&#9670;&nbsp;</a></span>next()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual boost::optional&lt;<a class="el" href="structmongo_1_1Record.html">Record</a>&gt; mongo::RecordCursor::next </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Moves forward and returns the new data or boost::none if there is no more data. </p>
<p>Continues returning boost::none once it reaches EOF. </p>

<p>Implemented in <a class="el" href="classmongo_1_1WiredTigerRecordStore_1_1RandomCursor.html#ac8c08abbbe890928c6d1bb2cd7c75d7d">mongo::WiredTigerRecordStore::RandomCursor</a>, <a class="el" href="classmongo_1_1WiredTigerRecordStoreCursorBase.html#a8cd276283846453af2c7fd23ab2d7472">mongo::WiredTigerRecordStoreCursorBase</a>, <a class="el" href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html#a6b2ddbd24c3d071212a89ecd6f568a32">mongo::RecordStoreV1Base::IntraExtentIterator</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1ReverseCursor.html#a9779845b3c73e65e3726515f73bc2da7">mongo::EphemeralForTestRecordStore::ReverseCursor</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1Cursor.html#ab22ad7e55edaebaef13162eedbcf8211">mongo::EphemeralForTestRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1MobileRecordStore_1_1Cursor.html#a74b8e1cc2527c797f8fcada4821c61ce">mongo::MobileRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1CappedRecordStoreV1Iterator.html#abbec27fafa7bfa168827e13630e09673">mongo::CappedRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1SimpleRecordStoreV1Iterator.html#acaa59d2565568125a58a96c9892fd48d">mongo::SimpleRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a545c5bbae345790f45188ae57ae349a7">mongo::RecordStoreV1RepairCursor</a>, and <a class="el" href="classmongo_1_1EmptyRecordCursor.html#a6825184b72b81a04c29c6de9f4c3aa26">mongo::EmptyRecordCursor</a>.</p>

</div>
</div>
<a id="adfa1c10252601db5043017111f47cf67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa1c10252601db5043017111f47cf67">&#9670;&nbsp;</a></span>reattachToOperationContext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordCursor::reattachToOperationContext </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reattaches to the OperationContext and reacquires any storage-engine state. </p>
<p>It is only legal to call this in the "detached" state. On return, the cursor is left in a "saved" state, so callers must still call restoreState to use this object. </p>

<p>Implemented in <a class="el" href="classmongo_1_1WiredTigerRecordStore_1_1RandomCursor.html#adef0a4f3d2c5bb3393878e86d258880a">mongo::WiredTigerRecordStore::RandomCursor</a>, <a class="el" href="classmongo_1_1WiredTigerRecordStoreCursorBase.html#a957dceed07d7abce7373fd84fe7cb950">mongo::WiredTigerRecordStoreCursorBase</a>, <a class="el" href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html#a864646285d595dadf8e93380c06f0e94">mongo::RecordStoreV1Base::IntraExtentIterator</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1ReverseCursor.html#ada37e95aca0858f9454c556bf0cc848c">mongo::EphemeralForTestRecordStore::ReverseCursor</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1Cursor.html#a66a1df4ab83af277c1506c1ab1c3f67d">mongo::EphemeralForTestRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1MobileRecordStore_1_1Cursor.html#a863f57741a73b2c38f03b55e509b8a26">mongo::MobileRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1CappedRecordStoreV1Iterator.html#a8364cfde6fbd478b418fba7edbcbb2d9">mongo::CappedRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1SimpleRecordStoreV1Iterator.html#aa424210dc2cd0eec5ad5d86c8b0b1993">mongo::SimpleRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a4f806f824f563bd1f2cd307964814887">mongo::RecordStoreV1RepairCursor</a>, and <a class="el" href="classmongo_1_1EmptyRecordCursor.html#a20c183105154b9d0afc2ce54638d1b8d">mongo::EmptyRecordCursor</a>.</p>

</div>
</div>
<a id="a02cbb295261cf8bd88b81343e39b0924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02cbb295261cf8bd88b81343e39b0924">&#9670;&nbsp;</a></span>restore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool mongo::RecordCursor::restore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recovers from potential state changes in underlying data. </p>
<p>Returns false if it is invalid to continue using this iterator. This usually means that capped deletes have caught up to the position of this iterator and continuing could result in missed data.</p>
<p>If the former position no longer exists, but it is safe to continue iterating, the following call to <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data.">next()</a> will return the next closest position in the direction of the scan, if any.</p>
<p>This handles restoring after either <a class="el" href="classmongo_1_1RecordCursor.html#a7298f96267a9b2e8fec9a5618b56f854" title="Prepares for state changes in underlying data in a way that allows the cursor&#39;s current position to b...">save()</a> or <a class="el" href="classmongo_1_1SeekableRecordCursor.html#a467912b90ef6b2785ec3d3c45204f77d" title="Prepares for state changes in underlying data without necessarily saving the current state.">SeekableRecordCursor::saveUnpositioned()</a>. </p>

<p>Implemented in <a class="el" href="classmongo_1_1WiredTigerRecordStore_1_1RandomCursor.html#ada6c7ed23f5118f479c30a42120c4604">mongo::WiredTigerRecordStore::RandomCursor</a>, <a class="el" href="classmongo_1_1WiredTigerRecordStoreCursorBase.html#a82f491010d52b1a3f04c0a5df5ec4d24">mongo::WiredTigerRecordStoreCursorBase</a>, <a class="el" href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html#a0b084292ef31e63b936a89a01861dbc1">mongo::RecordStoreV1Base::IntraExtentIterator</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1ReverseCursor.html#ad7bf7b338d3a9ba8b4f8f868e0403084">mongo::EphemeralForTestRecordStore::ReverseCursor</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1Cursor.html#a1659405e008ac003c47314953228df55">mongo::EphemeralForTestRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1MobileRecordStore_1_1Cursor.html#a5b979a375a5a6c9d73c8d0141f33dbfd">mongo::MobileRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1CappedRecordStoreV1Iterator.html#ac08ab7a66f92e7b2d0da9f4c8474823e">mongo::CappedRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1SimpleRecordStoreV1Iterator.html#ac05c45bf7af0abaf8507563ca2077d6a">mongo::SimpleRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1EmptyRecordCursor.html#a4bb4cd864bd3637986cca740fa1bfb8e">mongo::EmptyRecordCursor</a>, and <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a10a44baf600853ed24aeb92376dcb0e6">mongo::RecordStoreV1RepairCursor</a>.</p>

</div>
</div>
<a id="a7298f96267a9b2e8fec9a5618b56f854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7298f96267a9b2e8fec9a5618b56f854">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordCursor::save </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares for state changes in underlying data in a way that allows the cursor's current position to be restored. </p>
<p>It is safe to call save multiple times in a row. No other method (excluding destructor) may be called until successfully restored. </p>

<p>Implemented in <a class="el" href="classmongo_1_1WiredTigerRecordStore_1_1RandomCursor.html#a16657c1e8bbc0703b9aa383d24214c5c">mongo::WiredTigerRecordStore::RandomCursor</a>, <a class="el" href="classmongo_1_1WiredTigerRecordStoreCursorBase.html#a5607d13a36ba6bd11f7f1a68fb27cfb4">mongo::WiredTigerRecordStoreCursorBase</a>, <a class="el" href="classmongo_1_1RecordStoreV1Base_1_1IntraExtentIterator.html#ab33d073fe1603539b8b1fdcba4b10314">mongo::RecordStoreV1Base::IntraExtentIterator</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1ReverseCursor.html#a4fa6aba21d25714600a10d1705053de6">mongo::EphemeralForTestRecordStore::ReverseCursor</a>, <a class="el" href="classmongo_1_1EphemeralForTestRecordStore_1_1Cursor.html#a213e79ce7fc64de9fc20ec878140918b">mongo::EphemeralForTestRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1MobileRecordStore_1_1Cursor.html#ab75bbe2e6cd054f655d6c85c7ce51df5">mongo::MobileRecordStore::Cursor</a>, <a class="el" href="classmongo_1_1CappedRecordStoreV1Iterator.html#ad1c777d9ec5757a7c1be5c69c28f75c1">mongo::CappedRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1SimpleRecordStoreV1Iterator.html#ac7da9a8438aff0c0098e7cdd1d38505c">mongo::SimpleRecordStoreV1Iterator</a>, <a class="el" href="classmongo_1_1EmptyRecordCursor.html#a2cf2802bd771c409294897faa1bef833">mongo::EmptyRecordCursor</a>, and <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a23c1e2fd4b6d8a1089d26107cc16cfdc">mongo::RecordStoreV1RepairCursor</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/<a class="el" href="record__store_8h_source.html">record_store.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="classmongo_1_1RecordCursor.html">RecordCursor</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
