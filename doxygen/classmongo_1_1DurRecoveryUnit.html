<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::DurRecoveryUnit Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmongo_1_1DurRecoveryUnit.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classmongo_1_1DurRecoveryUnit-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::DurRecoveryUnit Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Just pass through to <a class="el" href="namespacemongo.html#a191523a2b4630a2155eca1c4ad14d0ff" title="Provides a reference to the active durability interface. ">getDur()</a>.  
 <a href="classmongo_1_1DurRecoveryUnit.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dur__recovery__unit_8h_source.html">dur_recovery_unit.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mongo::DurRecoveryUnit:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmongo_1_1DurRecoveryUnit.png" usemap="#mongo::DurRecoveryUnit_map" alt=""/>
  <map id="mongo::DurRecoveryUnit_map" name="mongo::DurRecoveryUnit_map">
<area href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. " alt="mongo::RecoveryUnit" shape="rect" coords="0,0,152,24"/>
</map>
 </div></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Just pass through to <a class="el" href="namespacemongo.html#a191523a2b4630a2155eca1c4ad14d0ff" title="Provides a reference to the active durability interface. ">getDur()</a>. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">These are memory writes inside the mmapv1 mmap-ed files.  <a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a29e72c9f62ecfc14232b344771c084a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a29e72c9f62ecfc14232b344771c084a8">DurRecoveryUnit</a> ()</td></tr>
<tr class="separator:a29e72c9f62ecfc14232b344771c084a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5034fbe4070d04f2cf528d1da49647"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a4a5034fbe4070d04f2cf528d1da49647">beginUnitOfWork</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) final</td></tr>
<tr class="memdesc:a4a5034fbe4070d04f2cf528d1da49647"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the beginning of a unit of work.  <a href="#a4a5034fbe4070d04f2cf528d1da49647">More...</a><br /></td></tr>
<tr class="separator:a4a5034fbe4070d04f2cf528d1da49647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d2b192a62d09c423245a1758edf431"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ab3d2b192a62d09c423245a1758edf431">commitUnitOfWork</a> () final</td></tr>
<tr class="memdesc:ab3d2b192a62d09c423245a1758edf431"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the end of a unit of work and commits all changes registered by calls to onCommit or registerChange, in order.  <a href="#ab3d2b192a62d09c423245a1758edf431">More...</a><br /></td></tr>
<tr class="separator:ab3d2b192a62d09c423245a1758edf431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a567d229a6eb407eaa8df60822a942d26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a567d229a6eb407eaa8df60822a942d26">abortUnitOfWork</a> () final</td></tr>
<tr class="memdesc:a567d229a6eb407eaa8df60822a942d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the end of a unit of work and rolls back all changes registered by calls to onRollback or registerChange, in reverse order.  <a href="#a567d229a6eb407eaa8df60822a942d26">More...</a><br /></td></tr>
<tr class="separator:a567d229a6eb407eaa8df60822a942d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2033db6bf8076b07f4fa6328b4f4b5b5"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a2033db6bf8076b07f4fa6328b4f4b5b5">waitUntilDurable</a> ()</td></tr>
<tr class="memdesc:a2033db6bf8076b07f4fa6328b4f4b5b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits until all commits that happened before this call are durable in the journal.  <a href="#a2033db6bf8076b07f4fa6328b4f4b5b5">More...</a><br /></td></tr>
<tr class="separator:a2033db6bf8076b07f4fa6328b4f4b5b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a965addc983f1f2caa2ea4d952629cbd9"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a965addc983f1f2caa2ea4d952629cbd9">abandonSnapshot</a> ()</td></tr>
<tr class="memdesc:a965addc983f1f2caa2ea4d952629cbd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there is an open transaction, it is closed.  <a href="#a965addc983f1f2caa2ea4d952629cbd9">More...</a><br /></td></tr>
<tr class="separator:a965addc983f1f2caa2ea4d952629cbd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f3a8da5b83935f1004c050e44d71cb"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a67f3a8da5b83935f1004c050e44d71cb">registerChange</a> (<a class="el" href="classmongo_1_1RecoveryUnit_1_1Change.html">Change</a> *change)</td></tr>
<tr class="memdesc:a67f3a8da5b83935f1004c050e44d71cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a> takes ownership of the change.  <a href="#a67f3a8da5b83935f1004c050e44d71cb">More...</a><br /></td></tr>
<tr class="separator:a67f3a8da5b83935f1004c050e44d71cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a85a2c23f804b28b75460eb3a28a7c"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a70a85a2c23f804b28b75460eb3a28a7c">writingPtr</a> (<a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> *addr, size_t len)</td></tr>
<tr class="memdesc:a70a85a2c23f804b28b75460eb3a28a7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare that the data at [x, x + len) is being written.  <a href="#a70a85a2c23f804b28b75460eb3a28a7c">More...</a><br /></td></tr>
<tr class="separator:a70a85a2c23f804b28b75460eb3a28a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af29cfc676f1948a886b818b387dd1dc4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#af29cfc676f1948a886b818b387dd1dc4">setRollbackWritesDisabled</a> ()</td></tr>
<tr class="memdesc:af29cfc676f1948a886b818b387dd1dc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a flag that declares this <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a> will skip rolling back writes, for the duration of the current outermost <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a>.  <a href="#af29cfc676f1948a886b818b387dd1dc4">More...</a><br /></td></tr>
<tr class="separator:af29cfc676f1948a886b818b387dd1dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3b23bfb5b9546cf1368dbac620d4602"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classmongo_1_1SnapshotId.html">SnapshotId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#aa3b23bfb5b9546cf1368dbac620d4602">getSnapshotId</a> () const</td></tr>
<tr class="memdesc:aa3b23bfb5b9546cf1368dbac620d4602"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the local <a class="el" href="classmongo_1_1SnapshotId.html">SnapshotId</a>.  <a href="#aa3b23bfb5b9546cf1368dbac620d4602">More...</a><br /></td></tr>
<tr class="separator:aa3b23bfb5b9546cf1368dbac620d4602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597642797666e92e737fa5b09ed40ebc"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a597642797666e92e737fa5b09ed40ebc">setOrderedCommit</a> (bool orderedCommit)</td></tr>
<tr class="separator:a597642797666e92e737fa5b09ed40ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmongo_1_1RecoveryUnit"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmongo_1_1RecoveryUnit')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classmongo_1_1RecoveryUnit.html">mongo::RecoveryUnit</a></td></tr>
<tr class="memitem:a78ccf94669747f5a9ebeab51fce73e0b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a78ccf94669747f5a9ebeab51fce73e0b">~RecoveryUnit</a> ()</td></tr>
<tr class="separator:a78ccf94669747f5a9ebeab51fce73e0b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93536b0d28f2e09e1dea494b427d135 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#ac93536b0d28f2e09e1dea494b427d135">prepareUnitOfWork</a> ()</td></tr>
<tr class="memdesc:ac93536b0d28f2e09e1dea494b427d135 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transitions the active unit of work to the "prepared" state.  <a href="classmongo_1_1RecoveryUnit.html#ac93536b0d28f2e09e1dea494b427d135">More...</a><br /></td></tr>
<tr class="separator:ac93536b0d28f2e09e1dea494b427d135 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7de9852b198105e4448964bbd681a7 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a7b7de9852b198105e4448964bbd681a7">setIgnorePrepared</a> (bool ignore)</td></tr>
<tr class="memdesc:a7b7de9852b198105e4448964bbd681a7 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets whether or not to ignore prepared transactions if supported by this storage engine.  <a href="classmongo_1_1RecoveryUnit.html#a7b7de9852b198105e4448964bbd681a7">More...</a><br /></td></tr>
<tr class="separator:a7b7de9852b198105e4448964bbd681a7 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfbe972c6eb640ddf1660b37bd236888 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#adfbe972c6eb640ddf1660b37bd236888">waitUntilUnjournaledWritesDurable</a> ()</td></tr>
<tr class="memdesc:adfbe972c6eb640ddf1660b37bd236888 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlike <code>waitUntilDurable</code>, this method takes a stable checkpoint, making durable any writes on unjournaled tables that are behind the current stable timestamp.  <a href="classmongo_1_1RecoveryUnit.html#adfbe972c6eb640ddf1660b37bd236888">More...</a><br /></td></tr>
<tr class="separator:adfbe972c6eb640ddf1660b37bd236888 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7e155dd4639d64c3780a8e33b1229c2 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#ab7e155dd4639d64c3780a8e33b1229c2">preallocateSnapshot</a> ()</td></tr>
<tr class="memdesc:ab7e155dd4639d64c3780a8e33b1229c2 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs the <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a> that a snapshot will be needed soon, if one was not already established.  <a href="classmongo_1_1RecoveryUnit.html#ab7e155dd4639d64c3780a8e33b1229c2">More...</a><br /></td></tr>
<tr class="separator:ab7e155dd4639d64c3780a8e33b1229c2 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa06eae806c652b8e9140a3e22c0f6d32 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#aa06eae806c652b8e9140a3e22c0f6d32">obtainMajorityCommittedSnapshot</a> ()</td></tr>
<tr class="memdesc:aa06eae806c652b8e9140a3e22c0f6d32 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a majority committed snapshot.  <a href="classmongo_1_1RecoveryUnit.html#aa06eae806c652b8e9140a3e22c0f6d32">More...</a><br /></td></tr>
<tr class="separator:aa06eae806c652b8e9140a3e22c0f6d32 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eca651df7de7474ca04f9b58e605047 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual boost::optional&lt; Timestamp &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a3eca651df7de7474ca04f9b58e605047">getPointInTimeReadTimestamp</a> () const</td></tr>
<tr class="memdesc:a3eca651df7de7474ca04f9b58e605047 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the Timestamp being used by this recovery unit or boost::none if not reading from a point in time.  <a href="classmongo_1_1RecoveryUnit.html#a3eca651df7de7474ca04f9b58e605047">More...</a><br /></td></tr>
<tr class="separator:a3eca651df7de7474ca04f9b58e605047 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a741651c20eba9f946bcf58908f780c inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a2a741651c20eba9f946bcf58908f780c">setTimestamp</a> (Timestamp timestamp)</td></tr>
<tr class="memdesc:a2a741651c20eba9f946bcf58908f780c inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a timestamp to assign to future writes in a transaction.  <a href="classmongo_1_1RecoveryUnit.html#a2a741651c20eba9f946bcf58908f780c">More...</a><br /></td></tr>
<tr class="separator:a2a741651c20eba9f946bcf58908f780c inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c1fe82af78f29a8d45c60b74682216 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#af7c1fe82af78f29a8d45c60b74682216">setCommitTimestamp</a> (Timestamp timestamp)</td></tr>
<tr class="memdesc:af7c1fe82af78f29a8d45c60b74682216 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a timestamp that will be assigned to all future writes on this <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a> until <a class="el" href="classmongo_1_1RecoveryUnit.html#a2f4f847062bc4bef9f4478ff04f9c3e1">clearCommitTimestamp()</a> is called.  <a href="classmongo_1_1RecoveryUnit.html#af7c1fe82af78f29a8d45c60b74682216">More...</a><br /></td></tr>
<tr class="separator:af7c1fe82af78f29a8d45c60b74682216 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f4f847062bc4bef9f4478ff04f9c3e1 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a2f4f847062bc4bef9f4478ff04f9c3e1">clearCommitTimestamp</a> ()</td></tr>
<tr class="separator:a2f4f847062bc4bef9f4478ff04f9c3e1 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa109e1b7f241e111e955ad86ce5f0c1f inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual Timestamp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#aa109e1b7f241e111e955ad86ce5f0c1f">getCommitTimestamp</a> ()</td></tr>
<tr class="separator:aa109e1b7f241e111e955ad86ce5f0c1f inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d80b9df7ebc42b4a31d215785cbff8 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a05d80b9df7ebc42b4a31d215785cbff8">setPrepareTimestamp</a> (Timestamp timestamp)</td></tr>
<tr class="memdesc:a05d80b9df7ebc42b4a31d215785cbff8 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a prepare timestamp for the current transaction.  <a href="classmongo_1_1RecoveryUnit.html#a05d80b9df7ebc42b4a31d215785cbff8">More...</a><br /></td></tr>
<tr class="separator:a05d80b9df7ebc42b4a31d215785cbff8 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a89e3d20bf1483f88a1db6e888c91b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a90a89e3d20bf1483f88a1db6e888c91b">setTimestampReadSource</a> (<a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4">ReadSource</a> source, boost::optional&lt; Timestamp &gt; provided=boost::none)</td></tr>
<tr class="memdesc:a90a89e3d20bf1483f88a1db6e888c91b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets which timestamp to use for read transactions.  <a href="classmongo_1_1RecoveryUnit.html#a90a89e3d20bf1483f88a1db6e888c91b">More...</a><br /></td></tr>
<tr class="separator:a90a89e3d20bf1483f88a1db6e888c91b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ca99643741926924e08d96ddcc2255 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4">ReadSource</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#af9ca99643741926924e08d96ddcc2255">getTimestampReadSource</a> () const</td></tr>
<tr class="separator:af9ca99643741926924e08d96ddcc2255 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6327788abf54b8cb56fd92aff3e5212b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memTemplParams" colspan="2">template&lt;typename Callback &gt; </td></tr>
<tr class="memitem:a6327788abf54b8cb56fd92aff3e5212b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a6327788abf54b8cb56fd92aff3e5212b">onRollback</a> (Callback callback)</td></tr>
<tr class="memdesc:a6327788abf54b8cb56fd92aff3e5212b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a callback to be called if the current <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a> rolls back.  <a href="classmongo_1_1RecoveryUnit.html#a6327788abf54b8cb56fd92aff3e5212b">More...</a><br /></td></tr>
<tr class="separator:a6327788abf54b8cb56fd92aff3e5212b inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e39b3240412719df98678e9027a576 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memTemplParams" colspan="2">template&lt;typename Callback &gt; </td></tr>
<tr class="memitem:a23e39b3240412719df98678e9027a576 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a23e39b3240412719df98678e9027a576">onCommit</a> (Callback callback)</td></tr>
<tr class="memdesc:a23e39b3240412719df98678e9027a576 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a callback to be called if the current <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a> commits.  <a href="classmongo_1_1RecoveryUnit.html#a23e39b3240412719df98678e9027a576">More...</a><br /></td></tr>
<tr class="separator:a23e39b3240412719df98678e9027a576 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56e0890e1bdbde55db22f0a9c6b66d07 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">int &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a56e0890e1bdbde55db22f0a9c6b66d07">writingInt</a> (int &amp;d)</td></tr>
<tr class="memdesc:a56e0890e1bdbde55db22f0a9c6b66d07 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare write intent for an int.  <a href="classmongo_1_1RecoveryUnit.html#a56e0890e1bdbde55db22f0a9c6b66d07">More...</a><br /></td></tr>
<tr class="separator:a56e0890e1bdbde55db22f0a9c6b66d07 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6115a1b56fb07dba55a1b46df9ab755 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ac6115a1b56fb07dba55a1b46df9ab755 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#ac6115a1b56fb07dba55a1b46df9ab755">writing</a> (T *x)</td></tr>
<tr class="memdesc:ac6115a1b56fb07dba55a1b46df9ab755 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="mdescLeft">&#160;</td><td class="mdescRight">A templated helper for writingPtr.  <a href="classmongo_1_1RecoveryUnit.html#ac6115a1b56fb07dba55a1b46df9ab755">More...</a><br /></td></tr>
<tr class="separator:ac6115a1b56fb07dba55a1b46df9ab755 inherit pub_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ae760c055c234deb17f7f3bb0cdde4d24"><td class="memItemLeft" align="right" valign="top">typedef OwnedPointerVector&lt; <a class="el" href="classmongo_1_1RecoveryUnit_1_1Change.html">Change</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">Changes</a></td></tr>
<tr class="separator:ae760c055c234deb17f7f3bb0cdde4d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413771bf1a7ffd1fe600319063431a77"><td class="memItemLeft" align="right" valign="top">typedef std::set&lt; <a class="el" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a>, <a class="el" href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html">Write::compareEnd</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">MergedWrites</a></td></tr>
<tr class="memdesc:a413771bf1a7ffd1fe600319063431a77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes are ordered by ending address, so MergedWrites::upper_bound() can find the first overlapping write, if any.  <a href="#a413771bf1a7ffd1fe600319063431a77">More...</a><br /></td></tr>
<tr class="separator:a413771bf1a7ffd1fe600319063431a77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c9dda7250150d7205ef635b0a8892e"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">InitialWrites</a></td></tr>
<tr class="separator:a39c9dda7250150d7205ef635b0a8892e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad19e888771eeecff3ffabd2359fac0c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ad19e888771eeecff3ffabd2359fac0c9">commitChanges</a> ()</td></tr>
<tr class="memdesc:ad19e888771eeecff3ffabd2359fac0c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks writes for journaling, if enabled, and then commits all other Changes in order.  <a href="#ad19e888771eeecff3ffabd2359fac0c9">More...</a><br /></td></tr>
<tr class="separator:ad19e888771eeecff3ffabd2359fac0c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0015c6c4f1acb4cb727a3f2c3e726c6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a0015c6c4f1acb4cb727a3f2c3e726c6a">markWritesForJournaling</a> ()</td></tr>
<tr class="memdesc:a0015c6c4f1acb4cb727a3f2c3e726c6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a list of write intents to be journaled, and hands it of to the active DurabilityInterface.  <a href="#a0015c6c4f1acb4cb727a3f2c3e726c6a">More...</a><br /></td></tr>
<tr class="separator:a0015c6c4f1acb4cb727a3f2c3e726c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe8e23bb3752b3cc458d7daf9b83198"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a8fe8e23bb3752b3cc458d7daf9b83198">rollbackChanges</a> ()</td></tr>
<tr class="memdesc:a8fe8e23bb3752b3cc458d7daf9b83198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores state by rolling back all writes using the saved pre-images, and then rolling back all other Changes in LIFO order.  <a href="#a8fe8e23bb3752b3cc458d7daf9b83198">More...</a><br /></td></tr>
<tr class="separator:a8fe8e23bb3752b3cc458d7daf9b83198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd5aaf24c497216fe8edb3eb677cd854"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#abd5aaf24c497216fe8edb3eb677cd854">mergingWritingPtr</a> (char *<a class="el" href="ephemeral__for__test__record__store__test_8cpp.html#a7b0b6386ed9af4d133c80f6322cc60dc">data</a>, size_t len)</td></tr>
<tr class="memdesc:abd5aaf24c497216fe8edb3eb677cd854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of writingPtr that checks existing writes for overlap and only stores those changes not yet covered by an existing write intent and pre-image.  <a href="#abd5aaf24c497216fe8edb3eb677cd854">More...</a><br /></td></tr>
<tr class="separator:abd5aaf24c497216fe8edb3eb677cd854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac95ba3210484a4463674812e737f67e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ac95ba3210484a4463674812e737f67e7">resetChanges</a> ()</td></tr>
<tr class="memdesc:ac95ba3210484a4463674812e737f67e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset to a clean state without any uncommitted changes or write.  <a href="#ac95ba3210484a4463674812e737f67e7">More...</a><br /></td></tr>
<tr class="separator:ac95ba3210484a4463674812e737f67e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae4180b6ad12fb54774853257828150cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">Changes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ae4180b6ad12fb54774853257828150cd">_changes</a></td></tr>
<tr class="separator:ae4180b6ad12fb54774853257828150cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b5262240383e174b989f603da6d808d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a0b5262240383e174b989f603da6d808d">_writeCount</a></td></tr>
<tr class="separator:a0b5262240383e174b989f603da6d808d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8455e83cb36f05276dc511a33c7cb1b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ad8455e83cb36f05276dc511a33c7cb1b">_writeBytes</a></td></tr>
<tr class="separator:ad8455e83cb36f05276dc511a33c7cb1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f8c9bd328e6766d201da00866375dd4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">MergedWrites</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a1f8c9bd328e6766d201da00866375dd4">_mergedWrites</a></td></tr>
<tr class="separator:a1f8c9bd328e6766d201da00866375dd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45b46ee7677c3e53b452e435bb277205"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">InitialWrites</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a45b46ee7677c3e53b452e435bb277205">_initialWrites</a></td></tr>
<tr class="separator:a45b46ee7677c3e53b452e435bb277205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11f8a7f5a87103bc1548038e94b5d61"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#af11f8a7f5a87103bc1548038e94b5d61">_preimageBuffer</a></td></tr>
<tr class="separator:af11f8a7f5a87103bc1548038e94b5d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8944c7b8ae556e324e9568fcbf1a96a0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a8944c7b8ae556e324e9568fcbf1a96a0">_inUnitOfWork</a></td></tr>
<tr class="separator:a8944c7b8ae556e324e9568fcbf1a96a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa392b7ae64fc89f7054e86ca11983df8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#aa392b7ae64fc89f7054e86ca11983df8">_rollbackWritesDisabled</a></td></tr>
<tr class="separator:aa392b7ae64fc89f7054e86ca11983df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classmongo_1_1RecoveryUnit"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classmongo_1_1RecoveryUnit')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classmongo_1_1RecoveryUnit.html">mongo::RecoveryUnit</a></td></tr>
<tr class="memitem:ab73d986cec10146d72945aa3a11b87a4 inherit pub_types_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4">ReadSource</a> { <br />
&#160;&#160;<a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4a47e15fc5e0417f4ddd368e536798a138">kUnset</a>, 
<a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4ae1a6254f10b3e2f69d8885df80174e1d">kNoTimestamp</a>, 
<a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4a783bd0f6356d0eaacedb2fa325e73cd8">kMajorityCommitted</a>, 
<a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4a6ac3c436cd3a401e9f9b8d8c4853b5d7">kLastApplied</a>, 
<br />
&#160;&#160;<a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4ab81b778c3f74a093f587f3d95a600c2e">kLastAppliedSnapshot</a>, 
<a class="el" href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4a6da9860a7e480d4d7f2cad14e29135e0">kProvided</a>
<br />
 }<tr class="memdesc:ab73d986cec10146d72945aa3a11b87a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ReadSource indicates which exteral or provided timestamp to read from for future transactions.  <a href="classmongo_1_1RecoveryUnit.html#ab73d986cec10146d72945aa3a11b87a4">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ab73d986cec10146d72945aa3a11b87a4 inherit pub_types_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classmongo_1_1RecoveryUnit"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classmongo_1_1RecoveryUnit')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classmongo_1_1RecoveryUnit.html">mongo::RecoveryUnit</a></td></tr>
<tr class="memitem:a884f48e4987b3543709aaf5e53b914a2 inherit pro_methods_classmongo_1_1RecoveryUnit"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecoveryUnit.html#a884f48e4987b3543709aaf5e53b914a2">RecoveryUnit</a> ()</td></tr>
<tr class="separator:a884f48e4987b3543709aaf5e53b914a2 inherit pro_methods_classmongo_1_1RecoveryUnit"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ae760c055c234deb17f7f3bb0cdde4d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae760c055c234deb17f7f3bb0cdde4d24">&#9670;&nbsp;</a></span>Changes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef OwnedPointerVector&lt;<a class="el" href="classmongo_1_1RecoveryUnit_1_1Change.html">Change</a>&gt; <a class="el" href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">mongo::DurRecoveryUnit::Changes</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a39c9dda7250150d7205ef635b0a8892e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c9dda7250150d7205ef635b0a8892e">&#9670;&nbsp;</a></span>InitialWrites</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a>&gt; <a class="el" href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">mongo::DurRecoveryUnit::InitialWrites</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a413771bf1a7ffd1fe600319063431a77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413771bf1a7ffd1fe600319063431a77">&#9670;&nbsp;</a></span>MergedWrites</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::set&lt;<a class="el" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a>, <a class="el" href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html">Write::compareEnd</a>&gt; <a class="el" href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">mongo::DurRecoveryUnit::MergedWrites</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes are ordered by ending address, so MergedWrites::upper_bound() can find the first overlapping write, if any. </p>
<p>Overlapping and duplicate regions are forbidden, as rollback of MergedChanges undoes changes by address rather than LIFO order. In addition, empty regions are not allowed. Storing writes by age does not work well for large indexed arrays, as coalescing is needed to bound the size of the preimage buffer. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a29e72c9f62ecfc14232b344771c084a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29e72c9f62ecfc14232b344771c084a8">&#9670;&nbsp;</a></span>DurRecoveryUnit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::DurRecoveryUnit::DurRecoveryUnit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a965addc983f1f2caa2ea4d952629cbd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a965addc983f1f2caa2ea4d952629cbd9">&#9670;&nbsp;</a></span>abandonSnapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::abandonSnapshot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If there is an open transaction, it is closed. </p>
<p>On return no transaction is active. This cannot be called inside of a <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a>, and should fail if it is. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#ae0b67bef4574ebe15bb418c658e2d1ac">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="a567d229a6eb407eaa8df60822a942d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a567d229a6eb407eaa8df60822a942d26">&#9670;&nbsp;</a></span>abortUnitOfWork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::abortUnitOfWork </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks the end of a unit of work and rolls back all changes registered by calls to onRollback or registerChange, in reverse order. </p>
<p>Must be matched by exactly one preceding call to beginUnitOfWork.</p>
<p>Should be called through <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a> rather than directly. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#a3bfbaa2f28b9ebe0b7774443b0d84481">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="a4a5034fbe4070d04f2cf528d1da49647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a5034fbe4070d04f2cf528d1da49647">&#9670;&nbsp;</a></span>beginUnitOfWork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::beginUnitOfWork </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks the beginning of a unit of work. </p>
<p>Each call must be matched with exactly one call to either commitUnitOfWork or abortUnitOfWork.</p>
<p>Should be called through <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a> rather than directly. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#a6bf744451000b79e20b1f641d4b8aaf6">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="ad19e888771eeecff3ffabd2359fac0c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad19e888771eeecff3ffabd2359fac0c9">&#9670;&nbsp;</a></span>commitChanges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::commitChanges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks writes for journaling, if enabled, and then commits all other Changes in order. </p>
<p>Returns with empty _initialWrites, _mergedWrites, _changes and _preimageBuffer, but does not reset the _rollbackWritesDisabled or _mustRollback flags. This leaves the <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a> ready for more changes that may be committed or rolled back. </p>

</div>
</div>
<a id="ab3d2b192a62d09c423245a1758edf431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3d2b192a62d09c423245a1758edf431">&#9670;&nbsp;</a></span>commitUnitOfWork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::commitUnitOfWork </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks the end of a unit of work and commits all changes registered by calls to onCommit or registerChange, in order. </p>
<p>Must be matched by exactly one preceding call to beginUnitOfWork.</p>
<p>Should be called through <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a> rather than directly. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#abcdfa3cff074a147ca1d06fbdb84bef3">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="aa3b23bfb5b9546cf1368dbac620d4602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3b23bfb5b9546cf1368dbac620d4602">&#9670;&nbsp;</a></span>getSnapshotId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classmongo_1_1SnapshotId.html">SnapshotId</a> mongo::DurRecoveryUnit::getSnapshotId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the local <a class="el" href="classmongo_1_1SnapshotId.html">SnapshotId</a>. </p>
<p>It is only valid to compare SnapshotIds generated by a single <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a>.</p>
<p>This is unrelated to Timestamp which must be globally comparable. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#a32b67f3be8c7aeb40d76d68e1f061bef">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="a0015c6c4f1acb4cb727a3f2c3e726c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0015c6c4f1acb4cb727a3f2c3e726c6a">&#9670;&nbsp;</a></span>markWritesForJournaling()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::markWritesForJournaling </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a list of write intents to be journaled, and hands it of to the active DurabilityInterface. </p>

</div>
</div>
<a id="abd5aaf24c497216fe8edb3eb677cd854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd5aaf24c497216fe8edb3eb677cd854">&#9670;&nbsp;</a></span>mergingWritingPtr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::mergingWritingPtr </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Version of writingPtr that checks existing writes for overlap and only stores those changes not yet covered by an existing write intent and pre-image. </p>

</div>
</div>
<a id="a67f3a8da5b83935f1004c050e44d71cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f3a8da5b83935f1004c050e44d71cb">&#9670;&nbsp;</a></span>registerChange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::registerChange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1RecoveryUnit_1_1Change.html">Change</a> *&#160;</td>
          <td class="paramname"><em>change</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a> takes ownership of the change. </p>
<p>The <a class="el" href="classmongo_1_1DurRecoveryUnit.html#ab3d2b192a62d09c423245a1758edf431" title="Marks the end of a unit of work and commits all changes registered by calls to onCommit or registerCh...">commitUnitOfWork()</a> method calls the commit() method of each registered change in order of registration. The endUnitOfWork() method calls the rollback() method of each registered Change in reverse order of registration. Either will unregister and delete the changes.</p>
<p>The <a class="el" href="classmongo_1_1DurRecoveryUnit.html#a67f3a8da5b83935f1004c050e44d71cb" title="The RecoveryUnit takes ownership of the change. ">registerChange()</a> method may only be called when a <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a> is active, and may not be called during commit or rollback. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#aa77394e746595779c6a0cf9dcb9333f6">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="ac95ba3210484a4463674812e737f67e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac95ba3210484a4463674812e737f67e7">&#9670;&nbsp;</a></span>resetChanges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::resetChanges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset to a clean state without any uncommitted changes or write. </p>

</div>
</div>
<a id="a8fe8e23bb3752b3cc458d7daf9b83198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fe8e23bb3752b3cc458d7daf9b83198">&#9670;&nbsp;</a></span>rollbackChanges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::rollbackChanges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restores state by rolling back all writes using the saved pre-images, and then rolling back all other Changes in LIFO order. </p>
<p>Resets internal state. </p>

</div>
</div>
<a id="a597642797666e92e737fa5b09ed40ebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a597642797666e92e737fa5b09ed40ebc">&#9670;&nbsp;</a></span>setOrderedCommit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::setOrderedCommit </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>orderedCommit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#a24196b6876e437df39cfb41757ad1b6b">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="af29cfc676f1948a886b818b387dd1dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af29cfc676f1948a886b818b387dd1dc4">&#9670;&nbsp;</a></span>setRollbackWritesDisabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::DurRecoveryUnit::setRollbackWritesDisabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets a flag that declares this <a class="el" href="classmongo_1_1RecoveryUnit.html" title="A RecoveryUnit is responsible for ensuring that data is persisted. ">RecoveryUnit</a> will skip rolling back writes, for the duration of the current outermost <a class="el" href="classmongo_1_1WriteUnitOfWork.html" title="The WriteUnitOfWork is an RAII type that begins a storage engine write unit of work on both the Locke...">WriteUnitOfWork</a>. </p>
<p>This function can only be called between a pair of unnested <a class="el" href="classmongo_1_1DurRecoveryUnit.html#a4a5034fbe4070d04f2cf528d1da49647" title="Marks the beginning of a unit of work. ">beginUnitOfWork()</a> / endUnitOfWork() calls. The flag is cleared when endUnitOfWork() is called. While the flag is set, rollback will skip rolling back writes, but custom rollback change functions are still called. Clearly, this functionality should only be used when writing to temporary collections that can be cleaned up externally. For example, foreground index builds write to a temporary collection; if something goes wrong that normally requires a rollback, we can instead clean up the index by dropping the entire index. Setting the flag may permit increased performance. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#a91ccb0edb38fa25858e7b7a5a509fb93">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="a2033db6bf8076b07f4fa6328b4f4b5b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2033db6bf8076b07f4fa6328b4f4b5b5">&#9670;&nbsp;</a></span>waitUntilDurable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DurRecoveryUnit::waitUntilDurable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits until all commits that happened before this call are durable in the journal. </p>
<p>Returns true, unless the storage engine cannot guarantee durability, which should never happen when isDurable() returned true. This cannot be called from inside a unit of work, and should fail if it is.</p>
<dl class="section return"><dt>Returns</dt><dd>Whether or not the storage engine can guarantee durability. </dd></dl>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#a91074d53f8e4147977bfd90cd8ffa392">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<a id="a70a85a2c23f804b28b75460eb3a28a7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70a85a2c23f804b28b75460eb3a28a7c">&#9670;&nbsp;</a></span>writingPtr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> * mongo::DurRecoveryUnit::writingPtr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Declare that the data at [x, x + len) is being written. </p>

<p>Implements <a class="el" href="classmongo_1_1RecoveryUnit.html#a1b23ef2f3a3a59eaee20ae616caca676">mongo::RecoveryUnit</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae4180b6ad12fb54774853257828150cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4180b6ad12fb54774853257828150cd">&#9670;&nbsp;</a></span>_changes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">Changes</a> mongo::DurRecoveryUnit::_changes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a45b46ee7677c3e53b452e435bb277205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45b46ee7677c3e53b452e435bb277205">&#9670;&nbsp;</a></span>_initialWrites</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">InitialWrites</a> mongo::DurRecoveryUnit::_initialWrites</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8944c7b8ae556e324e9568fcbf1a96a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8944c7b8ae556e324e9568fcbf1a96a0">&#9670;&nbsp;</a></span>_inUnitOfWork</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DurRecoveryUnit::_inUnitOfWork</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1f8c9bd328e6766d201da00866375dd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f8c9bd328e6766d201da00866375dd4">&#9670;&nbsp;</a></span>_mergedWrites</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">MergedWrites</a> mongo::DurRecoveryUnit::_mergedWrites</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af11f8a7f5a87103bc1548038e94b5d61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af11f8a7f5a87103bc1548038e94b5d61">&#9670;&nbsp;</a></span>_preimageBuffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string mongo::DurRecoveryUnit::_preimageBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa392b7ae64fc89f7054e86ca11983df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa392b7ae64fc89f7054e86ca11983df8">&#9670;&nbsp;</a></span>_rollbackWritesDisabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DurRecoveryUnit::_rollbackWritesDisabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad8455e83cb36f05276dc511a33c7cb1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8455e83cb36f05276dc511a33c7cb1b">&#9670;&nbsp;</a></span>_writeBytes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t mongo::DurRecoveryUnit::_writeBytes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b5262240383e174b989f603da6d808d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b5262240383e174b989f603da6d808d">&#9670;&nbsp;</a></span>_writeCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t mongo::DurRecoveryUnit::_writeCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/<a class="el" href="dur__recovery__unit_8h_source.html">dur_recovery_unit.h</a></li>
<li>/home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/<a class="el" href="dur__recovery__unit_8cpp.html">dur_recovery_unit.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="classmongo_1_1DurRecoveryUnit.html">DurRecoveryUnit</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
