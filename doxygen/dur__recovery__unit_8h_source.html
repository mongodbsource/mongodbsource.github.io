<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: /home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/dur_recovery_unit.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dur__recovery__unit_8h_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">dur_recovery_unit.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dur__recovery__unit_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;mongo/base/owned_pointer_vector.h&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="recovery__unit_8h.html">mongo/db/storage/recovery_unit.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;mongo/platform/compiler.h&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacemongo.html">mongo</a> {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html">   45</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmongo_1_1DurRecoveryUnit.html">DurRecoveryUnit</a> : <span class="keyword">public</span> <a class="code" href="classmongo_1_1RecoveryUnit.html">RecoveryUnit</a> {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a29e72c9f62ecfc14232b344771c084a8">DurRecoveryUnit</a>();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a4a5034fbe4070d04f2cf528d1da49647">beginUnitOfWork</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) <span class="keyword">final</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#ab3d2b192a62d09c423245a1758edf431">commitUnitOfWork</a>() <span class="keyword">final</span>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a567d229a6eb407eaa8df60822a942d26">abortUnitOfWork</a>() <span class="keyword">final</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a2033db6bf8076b07f4fa6328b4f4b5b5">waitUntilDurable</a>();</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a965addc983f1f2caa2ea4d952629cbd9">abandonSnapshot</a>();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">//  The recovery unit takes ownership of change.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a67f3a8da5b83935f1004c050e44d71cb">registerChange</a>(<a class="code" href="classmongo_1_1RecoveryUnit_1_1Change.html">Change</a>* change);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a70a85a2c23f804b28b75460eb3a28a7c">writingPtr</a>(<span class="keywordtype">void</span>* addr, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#af29cfc676f1948a886b818b387dd1dc4">setRollbackWritesDisabled</a>();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#aa3b23bfb5b9546cf1368dbac620d4602">   64</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classmongo_1_1SnapshotId.html">SnapshotId</a> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#aa3b23bfb5b9546cf1368dbac620d4602">getSnapshotId</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1SnapshotId.html">SnapshotId</a>();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#a597642797666e92e737fa5b09ed40ebc">   68</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a597642797666e92e737fa5b09ed40ebc">setOrderedCommit</a>(<span class="keywordtype">bool</span> orderedCommit) {}</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#ad19e888771eeecff3ffabd2359fac0c9">commitChanges</a>();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a0015c6c4f1acb4cb727a3f2c3e726c6a">markWritesForJournaling</a>();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a8fe8e23bb3752b3cc458d7daf9b83198">rollbackChanges</a>();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#abd5aaf24c497216fe8edb3eb677cd854">mergingWritingPtr</a>(<span class="keywordtype">char</span>* <a class="code" href="ephemeral__for__test__record__store__test_8cpp.html#a7b0b6386ed9af4d133c80f6322cc60dc">data</a>, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#ac95ba3210484a4463674812e737f67e7">resetChanges</a>();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Changes are ordered from oldest to newest.</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">  104</a></span>&#160;    <span class="keyword">typedef</span> OwnedPointerVector&lt;Change&gt; <a class="code" href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">Changes</a>;</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#ae4180b6ad12fb54774853257828150cd">  105</a></span>&#160;    <a class="code" href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">Changes</a> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#ae4180b6ad12fb54774853257828150cd">_changes</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Number of pending uncommitted writes. Incremented even if new write is fully covered by</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// existing writes.</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#a0b5262240383e174b989f603da6d808d">  110</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a0b5262240383e174b989f603da6d808d">_writeCount</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// Total size of the pending uncommitted writes.</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#ad8455e83cb36f05276dc511a33c7cb1b">  112</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#ad8455e83cb36f05276dc511a33c7cb1b">_writeBytes</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">  118</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a> {</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a171f9b6b60b32a6c89f90f21cde32f17">  119</a></span>&#160;        <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a171f9b6b60b32a6c89f90f21cde32f17">Write</a>(<span class="keywordtype">char</span>* <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>, <span class="keywordtype">int</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>, <span class="keywordtype">int</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">offset</a>) : <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>(<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>), <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>(<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>), <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">offset</a>(<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">offset</a>) {}</div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#adb4cda39480da9d95d33efa8b387f00e">  120</a></span>&#160;        <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#adb4cda39480da9d95d33efa8b387f00e">Write</a>(<span class="keyword">const</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a>&amp; rhs) : <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>(rhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>), <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>(rhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>), <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">offset</a>(rhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">offset</a>) {}</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#acb27eca1d8a8506ccd28959f4dfb0909">  121</a></span>&#160;        <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#acb27eca1d8a8506ccd28959f4dfb0909">Write</a>() : <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>(0), <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>(0), <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">offset</a>(0) {}</div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a51f8a48e5c2fe478561045060c616718">  122</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a51f8a48e5c2fe478561045060c616718">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a>&amp; rhs)<span class="keyword"> const </span>{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a> &lt; rhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html">  126</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html">compareEnd</a> {</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html#a4c0a944a93bff5c4497b85aa93f7c094">  127</a></span>&#160;            <span class="keywordtype">bool</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html#a4c0a944a93bff5c4497b85aa93f7c094">operator()</a>(<span class="keyword">const</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html">Write</a>&amp; rhs)<span class="keyword"> const </span>{</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="keywordflow">return</span> lhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a> + lhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a> &lt; rhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a> + rhs.<a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        };</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a0220932f1acfc2fd807fa2e44b801d25">  132</a></span>&#160;        <span class="keywordtype">char</span>* <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a0220932f1acfc2fd807fa2e44b801d25">end</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a> + <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">  136</a></span>&#160;        <span class="keywordtype">char</span>* <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">addr</a>;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">  137</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">len</a>;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">  138</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">offset</a>;  <span class="comment">// index into _preimageBuffer</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    };</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">  148</a></span>&#160;    <span class="keyword">typedef</span> std::set&lt;Write, Write::compareEnd&gt; <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">MergedWrites</a>;</div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#a1f8c9bd328e6766d201da00866375dd4">  149</a></span>&#160;    <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">MergedWrites</a> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a1f8c9bd328e6766d201da00866375dd4">_mergedWrites</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// Generally it&#39;s more efficient to just store pre-images unconditionally and then</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// sort/eliminate duplicates at commit time. However, this can lead to excessive memory</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// use in cases involving large indexes arrays, where the same memory is written many</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// times. To keep the speed for the general case and bound memory use, the first few MB of</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// pre-images are stored unconditionally, but once the threshold has been exceeded, the</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// remainder is stored in a more space-efficient datastructure.</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">  157</a></span>&#160;    <span class="keyword">typedef</span> std::vector&lt;Write&gt; <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">InitialWrites</a>;</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#a45b46ee7677c3e53b452e435bb277205">  158</a></span>&#160;    <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">InitialWrites</a> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a45b46ee7677c3e53b452e435bb277205">_initialWrites</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#af11f8a7f5a87103bc1548038e94b5d61">  160</a></span>&#160;    std::string <a class="code" href="classmongo_1_1DurRecoveryUnit.html#af11f8a7f5a87103bc1548038e94b5d61">_preimageBuffer</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#a8944c7b8ae556e324e9568fcbf1a96a0">  162</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#a8944c7b8ae556e324e9568fcbf1a96a0">_inUnitOfWork</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// Default is false.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// If true, no preimages are tracked.  If rollback is subsequently attempted, the process</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// will abort.</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classmongo_1_1DurRecoveryUnit.html#aa392b7ae64fc89f7054e86ca11983df8">  168</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1DurRecoveryUnit.html#aa392b7ae64fc89f7054e86ca11983df8">_rollbackWritesDisabled</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;};</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}  <span class="comment">// namespace mongo</span></div><div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_ad8455e83cb36f05276dc511a33c7cb1b"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#ad8455e83cb36f05276dc511a33c7cb1b">mongo::DurRecoveryUnit::_writeBytes</a></div><div class="ttdeci">size_t _writeBytes</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:112</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_ab3d2b192a62d09c423245a1758edf431"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#ab3d2b192a62d09c423245a1758edf431">mongo::DurRecoveryUnit::commitUnitOfWork</a></div><div class="ttdeci">void commitUnitOfWork() final</div><div class="ttdoc">Marks the end of a unit of work and commits all changes registered by calls to onCommit or registerCh...</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:56</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_a83c9c1f9b0349a4c5f021bec03ff2a91"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a83c9c1f9b0349a4c5f021bec03ff2a91">mongo::DurRecoveryUnit::Write::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:137</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_aa3b23bfb5b9546cf1368dbac620d4602"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#aa3b23bfb5b9546cf1368dbac620d4602">mongo::DurRecoveryUnit::getSnapshotId</a></div><div class="ttdeci">virtual SnapshotId getSnapshotId() const</div><div class="ttdoc">Gets the local SnapshotId.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:64</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_a46f4ec1ce010bf53de11bc97691eada0"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a46f4ec1ce010bf53de11bc97691eada0">mongo::DurRecoveryUnit::Write::addr</a></div><div class="ttdeci">char * addr</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:136</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a413771bf1a7ffd1fe600319063431a77"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a413771bf1a7ffd1fe600319063431a77">mongo::DurRecoveryUnit::MergedWrites</a></div><div class="ttdeci">std::set&lt; Write, Write::compareEnd &gt; MergedWrites</div><div class="ttdoc">Writes are ordered by ending address, so MergedWrites::upper_bound() can find the first overlapping w...</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:148</div></div>
<div class="ttc" id="namespacemongo_html"><div class="ttname"><a href="namespacemongo.html">mongo</a></div><div class="ttdoc">Copyright (C) 2014 MongoDB Inc.</div><div class="ttdef"><b>Definition:</b> bson_collection_catalog_entry.cpp:38</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_af11f8a7f5a87103bc1548038e94b5d61"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#af11f8a7f5a87103bc1548038e94b5d61">mongo::DurRecoveryUnit::_preimageBuffer</a></div><div class="ttdeci">std::string _preimageBuffer</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:160</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a0b5262240383e174b989f603da6d808d"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a0b5262240383e174b989f603da6d808d">mongo::DurRecoveryUnit::_writeCount</a></div><div class="ttdeci">size_t _writeCount</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:110</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a45b46ee7677c3e53b452e435bb277205"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a45b46ee7677c3e53b452e435bb277205">mongo::DurRecoveryUnit::_initialWrites</a></div><div class="ttdeci">InitialWrites _initialWrites</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:158</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_a171f9b6b60b32a6c89f90f21cde32f17"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a171f9b6b60b32a6c89f90f21cde32f17">mongo::DurRecoveryUnit::Write::Write</a></div><div class="ttdeci">Write(char *addr, int len, int offset)</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:119</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_ad19e888771eeecff3ffabd2359fac0c9"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#ad19e888771eeecff3ffabd2359fac0c9">mongo::DurRecoveryUnit::commitChanges</a></div><div class="ttdeci">void commitChanges()</div><div class="ttdoc">Marks writes for journaling, if enabled, and then commits all other Changes in order.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:79</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a965addc983f1f2caa2ea4d952629cbd9"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a965addc983f1f2caa2ea4d952629cbd9">mongo::DurRecoveryUnit::abandonSnapshot</a></div><div class="ttdeci">virtual void abandonSnapshot()</div><div class="ttdoc">If there is an open transaction, it is closed.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:74</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd_html"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html">mongo::DurRecoveryUnit::Write::compareEnd</a></div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:126</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_abd5aaf24c497216fe8edb3eb677cd854"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#abd5aaf24c497216fe8edb3eb677cd854">mongo::DurRecoveryUnit::mergingWritingPtr</a></div><div class="ttdeci">void mergingWritingPtr(char *data, size_t len)</div><div class="ttdoc">Version of writingPtr that checks existing writes for overlap and only stores those changes not yet c...</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:204</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd_html_a4c0a944a93bff5c4497b85aa93f7c094"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write_1_1compareEnd.html#a4c0a944a93bff5c4497b85aa93f7c094">mongo::DurRecoveryUnit::Write::compareEnd::operator()</a></div><div class="ttdeci">bool operator()(const Write &amp;lhs, const Write &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:127</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a39c9dda7250150d7205ef635b0a8892e"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a39c9dda7250150d7205ef635b0a8892e">mongo::DurRecoveryUnit::InitialWrites</a></div><div class="ttdeci">std::vector&lt; Write &gt; InitialWrites</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:157</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_adb4cda39480da9d95d33efa8b387f00e"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#adb4cda39480da9d95d33efa8b387f00e">mongo::DurRecoveryUnit::Write::Write</a></div><div class="ttdeci">Write(const Write &amp;rhs)</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:120</div></div>
<div class="ttc" id="ephemeral__for__test__record__store__test_8cpp_html_a7b0b6386ed9af4d133c80f6322cc60dc"><div class="ttname"><a href="ephemeral__for__test__record__store__test_8cpp.html#a7b0b6386ed9af4d133c80f6322cc60dc">data</a></div><div class="ttdeci">std::shared_ptr&lt; void &gt; data</div><div class="ttdef"><b>Definition:</b> ephemeral_for_test_record_store_test.cpp:74</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a29e72c9f62ecfc14232b344771c084a8"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a29e72c9f62ecfc14232b344771c084a8">mongo::DurRecoveryUnit::DurRecoveryUnit</a></div><div class="ttdeci">DurRecoveryUnit()</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:48</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_af29cfc676f1948a886b818b387dd1dc4"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#af29cfc676f1948a886b818b387dd1dc4">mongo::DurRecoveryUnit::setRollbackWritesDisabled</a></div><div class="ttdeci">virtual void setRollbackWritesDisabled()</div><div class="ttdoc">Sets a flag that declares this RecoveryUnit will skip rolling back writes, for the duration of the cu...</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:306</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_a0220932f1acfc2fd807fa2e44b801d25"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a0220932f1acfc2fd807fa2e44b801d25">mongo::DurRecoveryUnit::Write::end</a></div><div class="ttdeci">char * end() const</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:132</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_ae760c055c234deb17f7f3bb0cdde4d24"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#ae760c055c234deb17f7f3bb0cdde4d24">mongo::DurRecoveryUnit::Changes</a></div><div class="ttdeci">OwnedPointerVector&lt; Change &gt; Changes</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:104</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html">mongo::DurRecoveryUnit::Write</a></div><div class="ttdoc">These are memory writes inside the mmapv1 mmap-ed files.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:118</div></div>
<div class="ttc" id="classmongo_1_1RecoveryUnit_html"><div class="ttname"><a href="classmongo_1_1RecoveryUnit.html">mongo::RecoveryUnit</a></div><div class="ttdoc">A RecoveryUnit is responsible for ensuring that data is persisted.</div><div class="ttdef"><b>Definition:</b> recovery_unit.h:51</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a67f3a8da5b83935f1004c050e44d71cb"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a67f3a8da5b83935f1004c050e44d71cb">mongo::DurRecoveryUnit::registerChange</a></div><div class="ttdeci">virtual void registerChange(Change *change)</div><div class="ttdoc">The RecoveryUnit takes ownership of the change.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:311</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a2033db6bf8076b07f4fa6328b4f4b5b5"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a2033db6bf8076b07f4fa6328b4f4b5b5">mongo::DurRecoveryUnit::waitUntilDurable</a></div><div class="ttdeci">virtual bool waitUntilDurable()</div><div class="ttdoc">Waits until all commits that happened before this call are durable in the journal.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:199</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a0015c6c4f1acb4cb727a3f2c3e726c6a"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a0015c6c4f1acb4cb727a3f2c3e726c6a">mongo::DurRecoveryUnit::markWritesForJournaling</a></div><div class="ttdeci">void markWritesForJournaling()</div><div class="ttdoc">Creates a list of write intents to be journaled, and hands it of to the active DurabilityInterface.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:92</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a8fe8e23bb3752b3cc458d7daf9b83198"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a8fe8e23bb3752b3cc458d7daf9b83198">mongo::DurRecoveryUnit::rollbackChanges</a></div><div class="ttdeci">void rollbackChanges()</div><div class="ttdoc">Restores state by rolling back all writes using the saved pre-images, and then rolling back all other...</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:164</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html">mongo::DurRecoveryUnit</a></div><div class="ttdoc">Just pass through to getDur().</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:45</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_ac95ba3210484a4463674812e737f67e7"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#ac95ba3210484a4463674812e737f67e7">mongo::DurRecoveryUnit::resetChanges</a></div><div class="ttdeci">void resetChanges()</div><div class="ttdoc">Reset to a clean state without any uncommitted changes or write.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:153</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a597642797666e92e737fa5b09ed40ebc"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a597642797666e92e737fa5b09ed40ebc">mongo::DurRecoveryUnit::setOrderedCommit</a></div><div class="ttdeci">virtual void setOrderedCommit(bool orderedCommit)</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:68</div></div>
<div class="ttc" id="classmongo_1_1RecoveryUnit_1_1Change_html"><div class="ttname"><a href="classmongo_1_1RecoveryUnit_1_1Change.html">mongo::RecoveryUnit::Change</a></div><div class="ttdoc">A Change is an action that is registerChange()'d while a WriteUnitOfWork exists.</div><div class="ttdef"><b>Definition:</b> recovery_unit.h:295</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a567d229a6eb407eaa8df60822a942d26"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a567d229a6eb407eaa8df60822a942d26">mongo::DurRecoveryUnit::abortUnitOfWork</a></div><div class="ttdeci">void abortUnitOfWork() final</div><div class="ttdoc">Marks the end of a unit of work and rolls back all changes registered by calls to onRollback or regis...</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:67</div></div>
<div class="ttc" id="classmongo_1_1SnapshotId_html"><div class="ttname"><a href="classmongo_1_1SnapshotId.html">mongo::SnapshotId</a></div><div class="ttdef"><b>Definition:</b> snapshot.h:37</div></div>
<div class="ttc" id="namespacemongo_html_a15b23ef1d9a7f6cdadbf866f1e8e5043"><div class="ttname"><a href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">mongo::opCtx</a></div><div class="ttdeci">Collection *const OperationContext *const opCtx</div><div class="ttdef"><b>Definition:</b> collection_impl.cpp:80</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_aa392b7ae64fc89f7054e86ca11983df8"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#aa392b7ae64fc89f7054e86ca11983df8">mongo::DurRecoveryUnit::_rollbackWritesDisabled</a></div><div class="ttdeci">bool _rollbackWritesDisabled</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:168</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a4a5034fbe4070d04f2cf528d1da49647"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a4a5034fbe4070d04f2cf528d1da49647">mongo::DurRecoveryUnit::beginUnitOfWork</a></div><div class="ttdeci">void beginUnitOfWork(OperationContext *opCtx) final</div><div class="ttdoc">Marks the beginning of a unit of work.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:51</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a70a85a2c23f804b28b75460eb3a28a7c"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a70a85a2c23f804b28b75460eb3a28a7c">mongo::DurRecoveryUnit::writingPtr</a></div><div class="ttdeci">virtual void * writingPtr(void *addr, size_t len)</div><div class="ttdoc">Declare that the data at [x, x + len) is being written.</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.cpp:260</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_acb27eca1d8a8506ccd28959f4dfb0909"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#acb27eca1d8a8506ccd28959f4dfb0909">mongo::DurRecoveryUnit::Write::Write</a></div><div class="ttdeci">Write()</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:121</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_a51f8a48e5c2fe478561045060c616718"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#a51f8a48e5c2fe478561045060c616718">mongo::DurRecoveryUnit::Write::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const Write &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:122</div></div>
<div class="ttc" id="structmongo_1_1DurRecoveryUnit_1_1Write_html_ab2c7672e1ae4b9ba851406824793fabf"><div class="ttname"><a href="structmongo_1_1DurRecoveryUnit_1_1Write.html#ab2c7672e1ae4b9ba851406824793fabf">mongo::DurRecoveryUnit::Write::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:138</div></div>
<div class="ttc" id="recovery__unit_8h_html"><div class="ttname"><a href="recovery__unit_8h.html">recovery_unit.h</a></div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a8944c7b8ae556e324e9568fcbf1a96a0"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a8944c7b8ae556e324e9568fcbf1a96a0">mongo::DurRecoveryUnit::_inUnitOfWork</a></div><div class="ttdeci">bool _inUnitOfWork</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:162</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_ae4180b6ad12fb54774853257828150cd"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#ae4180b6ad12fb54774853257828150cd">mongo::DurRecoveryUnit::_changes</a></div><div class="ttdeci">Changes _changes</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:105</div></div>
<div class="ttc" id="classmongo_1_1DurRecoveryUnit_html_a1f8c9bd328e6766d201da00866375dd4"><div class="ttname"><a href="classmongo_1_1DurRecoveryUnit.html#a1f8c9bd328e6766d201da00866375dd4">mongo::DurRecoveryUnit::_mergedWrites</a></div><div class="ttdeci">MergedWrites _mergedWrites</div><div class="ttdef"><b>Definition:</b> dur_recovery_unit.h:149</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_dd1d225638daf3f3753df6d6ceaf954c.html">mongo</a></li><li class="navelem"><a class="el" href="dir_68cd4a12641825290eb1b2d05c12b4ee.html">db</a></li><li class="navelem"><a class="el" href="dir_c84aae0d5ddd3c0a024c539b5e839913.html">storage</a></li><li class="navelem"><a class="el" href="dir_899624c236e2d25d178b994f7b1db82e.html">mmap_v1</a></li><li class="navelem"><a class="el" href="dur__recovery__unit_8h.html">dur_recovery_unit.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
