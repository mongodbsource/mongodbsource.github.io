<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: /home/louis/git/mongodbsource.github.io/src/src/mongo/db/storage/mmap_v1/btree/btree_logic.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('btree__logic_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">btree_logic.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="btree__logic_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="head__manager_8h.html">mongo/db/catalog/head_manager.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="index__catalog__entry_8h.html">mongo/db/catalog/index_catalog_entry.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;mongo/db/jsobj.h&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;mongo/db/operation_context.h&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="index__entry__comparison_8h.html">mongo/db/storage/index_entry_comparison.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="btree__ondisk_8h.html">mongo/db/storage/mmap_v1/btree/btree_ondisk.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="key_8h.html">mongo/db/storage/mmap_v1/btree/key.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="diskloc_8h.html">mongo/db/storage/mmap_v1/diskloc.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacemongo.html">mongo</a> {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">class </span>PseudoRandom;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">class </span>RecordStore;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">class </span>SavedCursorRegistry;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// Used for unit-testing only</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> BtreeLayout&gt;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogicTestBase.html">   50</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmongo_1_1BtreeLogicTestBase.html">BtreeLogicTestBase</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> BtreeLayout&gt;</div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classmongo_1_1ArtificialTreeBuilder.html">   52</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmongo_1_1ArtificialTreeBuilder.html">ArtificialTreeBuilder</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> BtreeLayout&gt;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html">   59</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a> {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// AKA _keyNode</span></div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">   62</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> BtreeLayout::FixedWidthKeyType <a class="code" href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">KeyHeaderType</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// AKA Key</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">   65</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> BtreeLayout::KeyType <a class="code" href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">KeyDataType</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// AKA KeyOwned</span></div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a3f019770c9586e92f02b171a071c4421">   68</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> BtreeLayout::KeyOwnedType <a class="code" href="classmongo_1_1BtreeLogic.html#a3f019770c9586e92f02b171a071c4421">KeyDataOwnedType</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// AKA Loc</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a9eebc3db54241bbc84b3feed0fea1142">   71</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> BtreeLayout::LocType <a class="code" href="classmongo_1_1BtreeLogic.html#a9eebc3db54241bbc84b3feed0fea1142">LocType</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// AKA BucketBasics or BtreeBucket, either one.</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">   74</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> BtreeLayout::BucketType <a class="code" href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">BucketType</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#ad0c836138663ea013643859a321c9243">   82</a></span>&#160;    <a class="code" href="classmongo_1_1BtreeLogic.html#ad0c836138663ea013643859a321c9243">BtreeLogic</a>(<a class="code" href="classmongo_1_1HeadManager.html">HeadManager</a>* head,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;               <a class="code" href="classmongo_1_1RecordStore.html">RecordStore</a>* store,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;               <a class="code" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a>* cursors,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;               <span class="keyword">const</span> Ordering&amp; <a class="code" href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">ordering</a>,</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;               <span class="keyword">const</span> std::string&amp; indexName,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;               <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aa91a6613bc9da9fb79bac4c43133cf6b">isUnique</a>)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        : <a class="code" href="classmongo_1_1BtreeLogic.html#a7f4432f3cdc08f780e6f339f6c806822">_headManager</a>(head),</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;          <a class="code" href="classmongo_1_1BtreeLogic.html#a9d0baaceef14f711732f9cf655daf887">_recordStore</a>(store),</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;          <a class="code" href="classmongo_1_1BtreeLogic.html#a081c263b90bf01ef14f89e2db0739f78">_cursorRegistry</a>(cursors),</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;          <a class="code" href="classmongo_1_1BtreeLogic.html#a847298e2e0fc0f411ce04abbbde72e87">_ordering</a>(ordering),</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;          <a class="code" href="classmongo_1_1BtreeLogic.html#a7a01ebc9882539481d951b27b7f4eda4">_indexName</a>(indexName),</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          <a class="code" href="classmongo_1_1BtreeLogic.html#a699541b63483b7f86836800eca9830fd">_isUnique</a>(isUnique) {}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Public-facing</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html">   99</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html">Builder</a> {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">public</span>:</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#ae2369e5689640ce4f8416b88f6fa9d91">  101</a></span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> BtreeLayout::KeyOwnedType <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#ae2369e5689640ce4f8416b88f6fa9d91">KeyDataOwnedType</a>;</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#a5076fc3ccd26da16d73b7c0a6218bc2c">  102</a></span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> BtreeLayout::KeyType <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a5076fc3ccd26da16d73b7c0a6218bc2c">KeyDataType</a>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a994dd92aaf257bbb52682fd6935d4313">addKey</a>(<span class="keyword">const</span> BSONObj&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; loc);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">private</span>:</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#a4eeff723bc135a9c51fe6109abbf01ed">  107</a></span>&#160;        <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keyword">class </span><a class="code" href="classmongo_1_1BtreeLogic_1_1Builder_1_1SetRightLeafLocChange.html">SetRightLeafLocChange</a>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a24d462f4e0e2d010862dc776ace6f948">Builder</a>(<a class="code" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>* logic, OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <span class="keywordtype">bool</span> dupsAllowed);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a3193e370cd8fe0f8cc20d4affc99b0f0">newBucket</a>(BucketType* leftSib, <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> leftSibLoc);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        BucketType* <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a8acb6351c579aa0fd8269fa1b27cc96f">_getModifiableBucket</a>(<a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> loc);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        BucketType* <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a30f546bdceb965c2f5da6583277f8009">_getBucket</a>(<a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> loc);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">// Not owned.</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#a3862849a93cd5c7a6a2cccb4f941e664">  124</a></span>&#160;        <a class="code" href="classmongo_1_1BtreeLogic.html">BtreeLogic</a>* <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a3862849a93cd5c7a6a2cccb4f941e664">_logic</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#a82bb9358ee6adeecbc3d64646ae5e9ee">  126</a></span>&#160;        <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a82bb9358ee6adeecbc3d64646ae5e9ee">_rightLeafLoc</a>;  <span class="comment">// DiskLoc of right-most (highest) leaf bucket.</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#a5c8422d20ea50fd8e555b911cdd3b012">  127</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a5c8422d20ea50fd8e555b911cdd3b012">_dupsAllowed</a>;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#a39eefd07d77e5c057b2048a93b8227ab">  128</a></span>&#160;        std::unique_ptr&lt;KeyDataOwnedType&gt; <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#a39eefd07d77e5c057b2048a93b8227ab">_keyLast</a>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">// Not owned.</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic_1_1Builder.html#af4f1415b3ab7b48e2155cfaf5ea0dedd">  131</a></span>&#160;        OperationContext* <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html#af4f1415b3ab7b48e2155cfaf5ea0dedd">_opCtx</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    };</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html">Builder</a>* <a class="code" href="classmongo_1_1BtreeLogic.html#a622661b8c81f2f5965dc3a603f0f5887">newBuilder</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <span class="keywordtype">bool</span> dupsAllowed);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a7f9eefeb04e6ad5b6081d8bf3c1a03ed">dupKeyCheck</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <span class="keyword">const</span> BSONObj&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; loc) <span class="keyword">const</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="code" href="classmongo_1_1BtreeLogic.html#ac2849c3428290e87d9c246caf2ea93d1">insert</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                  <span class="keyword">const</span> BSONObj&amp; rawKey,</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; value,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                  <span class="keywordtype">bool</span> dupsAllowed);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a7a80d3d30fb5156e422d321a534f33a5">locate</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keyword">const</span> BSONObj&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; recordLoc,</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> direction,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keywordtype">int</span>* posOut,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* bucketLocOut) <span class="keyword">const</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a723095238b81634370e36c18b2f1c3de">advance</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                 <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* bucketLocInOut,</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                 <span class="keywordtype">int</span>* posInOut,</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                 <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a4a5072d4e2ffe6d976a5542c2201ff01">exists</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ad9662f4ba0c510de8393f2247740f252">unindex</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <span class="keyword">const</span> BSONObj&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; recordLoc);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a177b1c5b3c7f807446f70c937bfc7369">isEmpty</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aef6fbbb409d7e91c402ab62f0c820ece">fullValidate</a>(OperationContext*,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                           <span class="keywordtype">long</span> <span class="keywordtype">long</span>* unusedCount,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                           <span class="keywordtype">bool</span> strict,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                           <span class="keywordtype">bool</span> dumpBuckets,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                           <span class="keywordtype">unsigned</span> depth) <span class="keyword">const</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic.html#ab9d956e7d43b44d9e82e93c86eea73e7">getDiskLoc</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; bucketLoc,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                       <span class="keyword">const</span> <span class="keywordtype">int</span> keyOffset) <span class="keyword">const</span>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    BSONObj <a class="code" href="classmongo_1_1BtreeLogic.html#aaa643502a28ec8d37c7db06647842be0">getKey</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; bucketLoc, <span class="keyword">const</span> <span class="keywordtype">int</span> keyOffset) <span class="keyword">const</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="structmongo_1_1IndexKeyEntry.html">IndexKeyEntry</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a938dd93e41eba382a1a36bcd6ae4148a">getRandomEntry</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#ab52d3f49ee299f1015a5dc1af9dd3900">  191</a></span>&#160;    <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic.html#ab52d3f49ee299f1015a5dc1af9dd3900">getHead</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1DiskLoc.html#afe469dd5376b6865bab624d3a95ad523">DiskLoc::fromRecordId</a>(<a class="code" href="classmongo_1_1BtreeLogic.html#a7f4432f3cdc08f780e6f339f6c806822">_headManager</a>-&gt;<a class="code" href="classmongo_1_1HeadManager.html#ae66fa0cdc0d64157c0ac52e2a6da402f">getHead</a>(opCtx));</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="code" href="classmongo_1_1BtreeLogic.html#af13ac8d9773564bb0cc07105051d8649">touch</a>(OperationContext* <a class="code" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// Composite key navigation methods</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a6b2f0d1fef95bfff5c37267ab7435898">customLocate</a>(OperationContext* opCtx,</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                      <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* locInOut,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                      <span class="keywordtype">int</span>* keyOfsInOut,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                      <span class="keyword">const</span> <a class="code" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a>&amp; seekPoint,</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                      <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aa1fad264ec0565e58027674e4ea7c6f9">advanceTo</a>(OperationContext*,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                   <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* thisLocInOut,</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                   <span class="keywordtype">int</span>* keyOfsInOut,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                   <span class="keyword">const</span> <a class="code" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a>&amp; seekPoint,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                   <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a1e56edaacaa50ec15850c14fbf10167c">restorePosition</a>(OperationContext* opCtx,</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                         <span class="keyword">const</span> BSONObj&amp; savedKey,</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; savedLoc,</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                         <span class="keywordtype">int</span> direction,</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                         <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* bucketInOut,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                         <span class="keywordtype">int</span>* keyOffsetInOut) <span class="keyword">const</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// Creation and deletion</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a39c16c1676134b2f9ff173ed2875a4d7">initAsEmpty</a>(OperationContext* opCtx);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// Size constants</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#af9e8953b030dcde584d7719bd1d40430">  233</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classmongo_1_1RecordStore.html">RecordStore</a>* <a class="code" href="classmongo_1_1BtreeLogic.html#af9e8953b030dcde584d7719bd1d40430">getRecordStore</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a9d0baaceef14f711732f9cf655daf887">_recordStore</a>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a2c7d869e9ec7394447619df920107478">  237</a></span>&#160;    <a class="code" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a>* <a class="code" href="classmongo_1_1BtreeLogic.html#a2c7d869e9ec7394447619df920107478">savedCursors</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a081c263b90bf01ef14f89e2db0739f78">_cursorRegistry</a>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a15b46faf02679f143aef0b36f18ba009">lowWaterMark</a>();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">  243</a></span>&#160;    Ordering <a class="code" href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">ordering</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a847298e2e0fc0f411ce04abbbde72e87">_ordering</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a694ff2fc751d8f29592d008774924452">customBSONCmp</a>(<span class="keyword">const</span> BSONObj&amp; inIndex_left,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                      <span class="keyword">const</span> <a class="code" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a>&amp; seekPoint_right,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                      <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#aa91a6613bc9da9fb79bac4c43133cf6b">  251</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aa91a6613bc9da9fb79bac4c43133cf6b">isUnique</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a699541b63483b7f86836800eca9830fd">_isUnique</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#abe5e4ce75a6b8a88f8e2f1e8fd40c631">  256</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classmongo_1_1BtreeLogic_1_1Builder.html">BtreeLogic::Builder</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// Used for unit-testing only</span></div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a88d6f05f6e5348926a48c8b117c5604d">  259</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classmongo_1_1BtreeLogicTestBase.html">BtreeLogicTestBase</a>&lt;BtreeLayout&gt;;</div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a1933331432e8a95d55ac491a679df9dd">  260</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classmongo_1_1ArtificialTreeBuilder.html">ArtificialTreeBuilder</a>&lt;BtreeLayout&gt;;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structmongo_1_1BtreeLogic_1_1FullKey.html">  270</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structmongo_1_1BtreeLogic_1_1FullKey.html">FullKey</a> {</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a00bb901de3373b1831d384a9ea3dd872">  271</a></span>&#160;        <a class="code" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a00bb901de3373b1831d384a9ea3dd872">FullKey</a>(<span class="keyword">const</span> BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> i)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            : header(<a class="code" href="classmongo_1_1BtreeLogic.html#a6dbb3ba2b821a49d1dbb164d9f0719c3">getKeyHeader</a>(bucket, i)),</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;              prevChildBucket(header.prevChildBucket),</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;              recordLoc(header.recordLoc),</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;              <a class="code" href="ephemeral__for__test__record__store__test_8cpp.html#a7b0b6386ed9af4d133c80f6322cc60dc">data</a>(bucket-&gt;<a class="code" href="ephemeral__for__test__record__store__test_8cpp.html#a7b0b6386ed9af4d133c80f6322cc60dc">data</a> + header.keyDataOfs()) {}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">// This is actually a reference to something on-disk.</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a78e51e60e209816c3b2ef1c40e95c3d3">  278</a></span>&#160;        <span class="keyword">const</span> KeyHeaderType&amp; <a class="code" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a78e51e60e209816c3b2ef1c40e95c3d3">header</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">// These are actually in &#39;header&#39;.</span></div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a9942008c36bf50d1018c003a1de89f76">  281</a></span>&#160;        <span class="keyword">const</span> LocType&amp; <a class="code" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a9942008c36bf50d1018c003a1de89f76">prevChildBucket</a>;</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a99ee5926aec606553dbc8267a10137f9">  282</a></span>&#160;        <span class="keyword">const</span> LocType&amp; <a class="code" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a99ee5926aec606553dbc8267a10137f9">recordLoc</a>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="comment">// This is *not* memory-mapped but its members point to something on-disk.</span></div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a34dffca3ba6540aeb8e32a765676671e">  285</a></span>&#160;        KeyDataType <a class="code" href="structmongo_1_1BtreeLogic_1_1FullKey.html#a34dffca3ba6540aeb8e32a765676671e">data</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    };</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// Functions that depend on the templated type info but nothing in &#39;this&#39;.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">static</span> LocType&amp; <a class="code" href="classmongo_1_1BtreeLogic.html#a8590f5166a7b832c637c6a0e80ceab2f">childLocForPos</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> pos);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keyword">static</span> <a class="code" href="structmongo_1_1BtreeLogic_1_1FullKey.html">FullKey</a> <a class="code" href="classmongo_1_1BtreeLogic.html#ad0af6b21928a1c31f5b2f719d465465a">getFullKey</a>(<span class="keyword">const</span> BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> i);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keyword">static</span> KeyHeaderType&amp; <a class="code" href="classmongo_1_1BtreeLogic.html#a6dbb3ba2b821a49d1dbb164d9f0719c3">getKeyHeader</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> i);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> KeyHeaderType&amp; <a class="code" href="classmongo_1_1BtreeLogic.html#a6dbb3ba2b821a49d1dbb164d9f0719c3">getKeyHeader</a>(<span class="keyword">const</span> BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> i);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span>* <a class="code" href="classmongo_1_1BtreeLogic.html#a9029b266fea3cf0a296c48de06617059">dataAt</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">short</span> <a class="code" href="btree__interface_8cpp.html#a532a5ac60f338460e3b296ea8f17e799">ofs</a>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a93cbe19fd329531e5ea45c6a0016882c">markUnused</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> keypos);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a680267f88221e80367df69d9884ce649">totalDataSize</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#abb4c970f789b8c7d7ad4b78eb03d36e5">init</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a833c72e447f8661f6623f9fe72a1f644">_alloc</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> bytes);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#abb43d4424727d55d31c39ff7307e9260">_unalloc</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> bytes);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a775c0a13b0bc1475b4008c1d4fb99496">_delKeyAtPos</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> keypos, <span class="keywordtype">bool</span> mayEmpty = <span class="keyword">false</span>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a8015bb052304fc99e4c4d845f7e91797">popBack</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* recordLocOut, KeyDataType* keyDataOut);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aa4d2da8a2a079745e3542ce90acf9bfb">mayDropKey</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> refPos);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a605169aa18d5361d814b7cb37e0380f2">_packedDataSize</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> refPos);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a4a9e8a0d4e10c766790c2028c5ab1236">setPacked</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a04e05a35d430f1324cae4c3fb839903d">setNotPacked</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keyword">static</span> BucketType* <a class="code" href="classmongo_1_1BtreeLogic.html#ae8f0a8a350ff9d2e9d19eb4629a0b27a">btreemod</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#abda46a86cdd93a9396b7eb2bf592fe32">splitPos</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> keypos);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a82b1d293e887a72e935c48119c0042cd">reserveKeysFront</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> nAdd);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aeba59401755923218413c362a974011a">setKey</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                       <span class="keywordtype">int</span> i,</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                       <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> prevChildBucket);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#adc7e7310c1283febc2af977c4754aa83">isHead</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a9a2a744c7172a443d11d77f502c07223">dumpBucket</a>(<span class="keyword">const</span> BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> indentLength = 0);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ac9d579080451de5759cff47663e7de05">assertValid</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="namespacemongo.html#aa1aad236ca83643ab0718062dd62f4fc">ns</a>,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                            BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                            <span class="keyword">const</span> Ordering&amp; <a class="code" href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">ordering</a>,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                            <span class="keywordtype">bool</span> force = <span class="keyword">false</span>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// &#39;this&#39;-specific helpers (require record store, catalog information, or ordering, or type</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// information).</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a7b0e345eb0a8e3443bd62acf6643b45e">basicInsert</a>(OperationContext* opCtx,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                     BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                     <span class="keywordtype">int</span>&amp; keypos,</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                     <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a45371d574792f0468f75e58c3cf418ef">dropFront</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> nDrop, <span class="keywordtype">int</span>&amp; refpos);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a6abc9608de59766d8a9bddeba9951d31">_pack</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> thisLoc, <span class="keywordtype">int</span>&amp; refPos);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a6b2f0d1fef95bfff5c37267ab7435898">customLocate</a>(OperationContext* opCtx,</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                      <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* locInOut,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                      <span class="keywordtype">int</span>* keyOfsInOut,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                      <span class="keyword">const</span> <a class="code" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a>&amp; seekPoint,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                      <span class="keywordtype">int</span> direction,</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                      std::pair&lt;DiskLoc, int&gt;&amp; bestParent) <span class="keyword">const</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a5ad4b13549c255120d29256863c11f0b">_find</a>(OperationContext* opCtx,</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                 BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                 <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; recordLoc,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                 <span class="keywordtype">bool</span> errorIfDup,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                 <span class="keywordtype">int</span>* keyPositionOut,</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                 <span class="keywordtype">bool</span>* foundOut) <span class="keyword">const</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a81263fa16f3b259ad765e8b5c5ba1d3a">customFind</a>(OperationContext* opCtx,</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    <span class="keywordtype">int</span> low,</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <span class="keywordtype">int</span> high,</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a>&amp; seekPoint,</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    <span class="keywordtype">int</span> direction,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* thisLocInOut,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    <span class="keywordtype">int</span>* keyOfsInOut,</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    std::pair&lt;DiskLoc, int&gt;&amp; bestParent) <span class="keyword">const</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ab3f05dafbeb351ebac32296a53572255">advanceToImpl</a>(OperationContext* opCtx,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                       <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* thisLocInOut,</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                       <span class="keywordtype">int</span>* keyOfsInOut,</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                       <span class="keyword">const</span> <a class="code" href="structmongo_1_1IndexSeekPoint.html">IndexSeekPoint</a>&amp; seekPoint,</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                       <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a9f8eeaa5ea907080baa587d96d18016a">wouldCreateDup</a>(OperationContext* opCtx, <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <span class="keyword">self</span>) <span class="keyword">const</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a5342c281317e32014c07a9c3f5fab512">keyIsUsed</a>(OperationContext* opCtx, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; loc, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; pos) <span class="keyword">const</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a7afac1dbac596159f1d922cdb0bc7e74">skipUnusedKeys</a>(OperationContext* opCtx, <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>* loc, <span class="keywordtype">int</span>* pos, <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a723095238b81634370e36c18b2f1c3de">advance</a>(OperationContext* opCtx,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; bucketLoc,</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    <span class="keywordtype">int</span>* posInOut,</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a28d12796f209057e740272e627ca9d89">_locate</a>(OperationContext* opCtx,</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; bucketLoc,</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    <span class="keywordtype">int</span>* posOut,</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    <span class="keywordtype">bool</span>* foundOut,</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; recordLoc,</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> direction) <span class="keyword">const</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="classmongo_1_1BtreeLogic.html#adba0f7f8b078ceadb2846e6d67bdd3e1">_fullValidate</a>(OperationContext* opCtx,</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                            <span class="keywordtype">long</span> <span class="keywordtype">long</span>* unusedCount,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                            <span class="keywordtype">bool</span> strict,</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                            <span class="keywordtype">bool</span> dumpBuckets,</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                            <span class="keywordtype">unsigned</span> depth) <span class="keyword">const</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic.html#ad94cd49eb3eaff25538961a4588e5155">_addBucket</a>(OperationContext* opCtx);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a6a2cf2f19839acafcdfe067f073f1c00">canMergeChildren</a>(OperationContext* opCtx,</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                          BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">int</span> leftIndex);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// has to look in children of &#39;bucket&#39; and requires record store</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a4cd6020664851c128d8ab52ebda0a1cc">_rebalancedSeparatorPos</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> leftIndex);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a2ef7ea66528d0b60af33d521f94a2961">_packReadyForMod</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span>&amp; refPos);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aa0abecbf7f1bc00c71b3ca8153b7026d">truncateTo</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> N, <span class="keywordtype">int</span>&amp; refPos);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ab70aa010baf4859bab9bebdef89cc086">split</a>(OperationContext* opCtx,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;               BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;               <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;               <span class="keywordtype">int</span> keypos,</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;               <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc,</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;               <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;               <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild,</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;               <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">Status</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a4a0162f55f587785098a0adfe4eaa647">_insert</a>(OperationContext* opCtx,</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                   BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                   <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                   <span class="keywordtype">bool</span> dupsAllowed,</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> leftChild,</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rightChild);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// TODO take a BucketType*?</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ae20519b6244adb662fe5604dbde825bd">insertHere</a>(OperationContext* opCtx,</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    <span class="keywordtype">int</span> pos,</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc,</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> leftChild,</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rightChild);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    std::string <a class="code" href="classmongo_1_1BtreeLogic.html#a9d898992378bc663ce74a42037c655f2">dupKeyError</a>(<span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a5a39142d26b4ee0973ab6ace112d14b9">setInternalKey</a>(OperationContext* opCtx,</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                        BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                        <span class="keywordtype">int</span> keypos,</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc,</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                        <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild,</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a2f86d6b940d03eecaeca3937d22fa624">fixParentPtrs</a>(OperationContext* trans,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                       BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                       <span class="keywordtype">int</span> firstIndex = 0,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                       <span class="keywordtype">int</span> lastIndex = -1);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a852b5b36b7b41719065b2b9cf21a3778">mayBalanceWithNeighbors</a>(OperationContext* opCtx,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                 BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a4933441cb102fbd0fe4d2c1f84ca3695">doBalanceChildren</a>(OperationContext* opCtx,</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                           BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                           <span class="keywordtype">int</span> leftIndex);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a3a55f148cbd50d8705c3c2166e1c67a3">doBalanceLeftToRight</a>(OperationContext* opCtx,</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                              BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> thisLoc,</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                              <span class="keywordtype">int</span> leftIndex,</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                              <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ab70aa010baf4859bab9bebdef89cc086">split</a>,</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                              BucketType* l,</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild,</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                              BucketType* r,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a6178898a2c0bb5fa425a7d618c37c559">doBalanceRightToLeft</a>(OperationContext* opCtx,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                              BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> thisLoc,</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                              <span class="keywordtype">int</span> leftIndex,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                              <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ab70aa010baf4859bab9bebdef89cc086">split</a>,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                              BucketType* l,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> lchild,</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                              BucketType* r,</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> rchild);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a87f29aa78367d5d1bcf092bd2166d9a5">tryBalanceChildren</a>(OperationContext* opCtx,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                            <span class="keywordtype">int</span> leftIndex);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classmongo_1_1BtreeLogic.html#adfa067ea79bae4104fb606401f3acc79">indexInParent</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc) <span class="keyword">const</span>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a7d443a373ec2ed86e134990ef98fd169">doMergeChildren</a>(OperationContext* opCtx,</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                         BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                         <span class="keywordtype">int</span> leftIndex);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ac3c0ade6aaab94745e2f1d44925c63b4">replaceWithNextChild</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a5615942c6c44ac51bd3287f9fa481eba">deleteInternalKey</a>(OperationContext* opCtx,</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                           BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc,</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                           <span class="keywordtype">int</span> keypos);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ac4d550cd54633e654b2df276653bbd7f">delKeyAtPos</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc, <span class="keywordtype">int</span> p);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#ab829139b0a8c4e4fe5403051bc741b42">delBucket</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a551225bcb381bfd76b84d23512d9537b">deallocBucket</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> bucketLoc);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#aea94ba3f4fc15de3aa443f48fe3892d3">_keyIsAt</a>(<span class="keyword">const</span> BSONObj&amp; savedKey,</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&amp; savedLoc,</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                  BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                  <span class="keywordtype">int</span> keyPos) <span class="keyword">const</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a791dea44584a32fd0e448d5c0e0af91f">pushBack</a>(BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> recordLoc,</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                  <span class="keyword">const</span> KeyDataType&amp; <a class="code" href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a>,</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> prevChild);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    BucketType* <a class="code" href="classmongo_1_1BtreeLogic.html#a911cef0bfbc778f567b080b9dcd30560">childForPos</a>(OperationContext* opCtx, BucketType* <a class="code" href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a>, <span class="keywordtype">int</span> pos) <span class="keyword">const</span>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a5464adfd8ca3def7a2eeb6f2de09ae40">  550</a></span>&#160;    BucketType* <a class="code" href="classmongo_1_1BtreeLogic.html#a5464adfd8ca3def7a2eeb6f2de09ae40">getBucket</a>(OperationContext* opCtx, <span class="keyword">const</span> <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> dl)<span class="keyword"> const </span>{</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a5464adfd8ca3def7a2eeb6f2de09ae40">getBucket</a>(opCtx, dl.<a class="code" href="classmongo_1_1DiskLoc.html#ac45b365679909f106a20872677344a51">toRecordId</a>());</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    BucketType* <a class="code" href="classmongo_1_1BtreeLogic.html#a5464adfd8ca3def7a2eeb6f2de09ae40">getBucket</a>(OperationContext* opCtx, <span class="keyword">const</span> RecordId dl) <span class="keyword">const</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    BucketType* <a class="code" href="classmongo_1_1BtreeLogic.html#a07275f1e312c31de44192103267cc879">getRoot</a>(OperationContext* opCtx) <span class="keyword">const</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="classmongo_1_1DiskLoc.html">DiskLoc</a> <a class="code" href="classmongo_1_1BtreeLogic.html#a5a0c37b798c66bb4b63626c99bd6ec84">getRootLoc</a>(OperationContext* opCtx) <span class="keyword">const</span>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a3753b0d680215363bd92c8d3df73ddd5">recordRandomWalk</a>(OperationContext* opCtx,</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                          PseudoRandom* prng,</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                          BucketType* curBucket,</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                          int64_t nBucketsInCurrentLevel,</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                          std::vector&lt;int64_t&gt;* nKeysInLevel,</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                          std::vector&lt;FullKey&gt;* selectedKeys) <span class="keyword">const</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// Data</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// Not owned here.</span></div><div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a7f4432f3cdc08f780e6f339f6c806822">  571</a></span>&#160;    <a class="code" href="classmongo_1_1HeadManager.html">HeadManager</a>* <a class="code" href="classmongo_1_1BtreeLogic.html#a7f4432f3cdc08f780e6f339f6c806822">_headManager</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// Not owned here.</span></div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a9d0baaceef14f711732f9cf655daf887">  574</a></span>&#160;    <a class="code" href="classmongo_1_1RecordStore.html">RecordStore</a>* <a class="code" href="classmongo_1_1BtreeLogic.html#a9d0baaceef14f711732f9cf655daf887">_recordStore</a>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// Not owned Here.</span></div><div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a081c263b90bf01ef14f89e2db0739f78">  577</a></span>&#160;    <a class="code" href="classmongo_1_1SavedCursorRegistry.html">SavedCursorRegistry</a>* <a class="code" href="classmongo_1_1BtreeLogic.html#a081c263b90bf01ef14f89e2db0739f78">_cursorRegistry</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a847298e2e0fc0f411ce04abbbde72e87">  579</a></span>&#160;    Ordering <a class="code" href="classmongo_1_1BtreeLogic.html#a847298e2e0fc0f411ce04abbbde72e87">_ordering</a>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a7a01ebc9882539481d951b27b7f4eda4">  581</a></span>&#160;    std::string <a class="code" href="classmongo_1_1BtreeLogic.html#a7a01ebc9882539481d951b27b7f4eda4">_indexName</a>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// True if this is a unique index, i.e. if duplicate key values are disallowed.</span></div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="classmongo_1_1BtreeLogic.html#a699541b63483b7f86836800eca9830fd">  584</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1BtreeLogic.html#a699541b63483b7f86836800eca9830fd">_isUnique</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;};</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}  <span class="comment">// namespace mongo</span></div><div class="ttc" id="classmongo_1_1BtreeLogic_html_a4a0162f55f587785098a0adfe4eaa647"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a4a0162f55f587785098a0adfe4eaa647">mongo::BtreeLogic::_insert</a></div><div class="ttdeci">Status _insert(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, const KeyDataType &amp;key, const DiskLoc recordLoc, bool dupsAllowed, const DiskLoc leftChild, const DiskLoc rightChild)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2171</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a7a01ebc9882539481d951b27b7f4eda4"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a7a01ebc9882539481d951b27b7f4eda4">mongo::BtreeLogic::_indexName</a></div><div class="ttdeci">std::string _indexName</div><div class="ttdef"><b>Definition:</b> btree_logic.h:581</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ac3c0ade6aaab94745e2f1d44925c63b4"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ac3c0ade6aaab94745e2f1d44925c63b4">mongo::BtreeLogic::replaceWithNextChild</a></div><div class="ttdeci">void replaceWithNextChild(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1290</div></div>
<div class="ttc" id="structmongo_1_1BtreeLogic_1_1FullKey_html_a00bb901de3373b1831d384a9ea3dd872"><div class="ttname"><a href="structmongo_1_1BtreeLogic_1_1FullKey.html#a00bb901de3373b1831d384a9ea3dd872">mongo::BtreeLogic::FullKey::FullKey</a></div><div class="ttdeci">FullKey(const BucketType *bucket, int i)</div><div class="ttdef"><b>Definition:</b> btree_logic.h:271</div></div>
<div class="ttc" id="btree__interface_8cpp_html_a532a5ac60f338460e3b296ea8f17e799"><div class="ttname"><a href="btree__interface_8cpp.html#a532a5ac60f338460e3b296ea8f17e799">ofs</a></div><div class="ttdeci">int ofs</div><div class="ttdef"><b>Definition:</b> btree_interface.cpp:337</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a1e56edaacaa50ec15850c14fbf10167c"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a1e56edaacaa50ec15850c14fbf10167c">mongo::BtreeLogic::restorePosition</a></div><div class="ttdeci">void restorePosition(OperationContext *opCtx, const BSONObj &amp;savedKey, const DiskLoc &amp;savedLoc, int direction, DiskLoc *bucketInOut, int *keyOffsetInOut) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1149</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a8acb6351c579aa0fd8269fa1b27cc96f"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a8acb6351c579aa0fd8269fa1b27cc96f">mongo::BtreeLogic::Builder::_getModifiableBucket</a></div><div class="ttdeci">BucketType * _getModifiableBucket(DiskLoc loc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:210</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a7a80d3d30fb5156e422d321a534f33a5"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a7a80d3d30fb5156e422d321a534f33a5">mongo::BtreeLogic::locate</a></div><div class="ttdeci">bool locate(OperationContext *opCtx, const BSONObj &amp;key, const DiskLoc &amp;recordLoc, const int direction, int *posOut, DiskLoc *bucketLocOut) const</div><div class="ttdoc">Navigates down the tree and locates the bucket and position containing a record with the specified &lt;k...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2304</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a3753b0d680215363bd92c8d3df73ddd5"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a3753b0d680215363bd92c8d3df73ddd5">mongo::BtreeLogic::recordRandomWalk</a></div><div class="ttdeci">void recordRandomWalk(OperationContext *opCtx, PseudoRandom *prng, BucketType *curBucket, int64_t nBucketsInCurrentLevel, std::vector&lt; int64_t &gt; *nKeysInLevel, std::vector&lt; FullKey &gt; *selectedKeys) const</div><div class="ttdoc">Does a random walk through the tree, recording information about the walk along the way...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1992</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html">mongo::BtreeLogic</a></div><div class="ttdoc">This is the logic for manipulating the Btree. </div><div class="ttdef"><b>Definition:</b> btree_logic.h:59</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a81263fa16f3b259ad765e8b5c5ba1d3a"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a81263fa16f3b259ad765e8b5c5ba1d3a">mongo::BtreeLogic::customFind</a></div><div class="ttdeci">bool customFind(OperationContext *opCtx, int low, int high, const IndexSeekPoint &amp;seekPoint, int direction, DiskLoc *thisLocInOut, int *keyOfsInOut, std::pair&lt; DiskLoc, int &gt; &amp;bestParent) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:849</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ac4d550cd54633e654b2df276653bbd7f"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ac4d550cd54633e654b2df276653bbd7f">mongo::BtreeLogic::delKeyAtPos</a></div><div class="ttdeci">void delKeyAtPos(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int p)</div><div class="ttdoc">May delete the bucket &amp;#39;bucket&amp;#39; rendering &amp;#39;bucketLoc&amp;#39; invalid. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1196</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a3a55f148cbd50d8705c3c2166e1c67a3"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a3a55f148cbd50d8705c3c2166e1c67a3">mongo::BtreeLogic::doBalanceLeftToRight</a></div><div class="ttdeci">void doBalanceLeftToRight(OperationContext *opCtx, BucketType *bucket, const DiskLoc thisLoc, int leftIndex, int split, BucketType *l, const DiskLoc lchild, BucketType *r, const DiskLoc rchild)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1478</div></div>
<div class="ttc" id="btree__ondisk_8h_html"><div class="ttname"><a href="btree__ondisk_8h.html">btree_ondisk.h</a></div></div>
<div class="ttc" id="namespacemongo_html_aa1aad236ca83643ab0718062dd62f4fc"><div class="ttname"><a href="namespacemongo.html#aa1aad236ca83643ab0718062dd62f4fc">mongo::ns</a></div><div class="ttdeci">Collection *const const NamespaceString &amp; ns</div><div class="ttdef"><b>Definition:</b> collection_info_cache_impl.cpp:53</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a2ef7ea66528d0b60af33d521f94a2961"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a2ef7ea66528d0b60af33d521f94a2961">mongo::BtreeLogic::_packReadyForMod</a></div><div class="ttdeci">void _packReadyForMod(BucketType *bucket, int &amp;refPos)</div><div class="ttdoc">Version when write intent already declared. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:535</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a5a39142d26b4ee0973ab6ace112d14b9"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a5a39142d26b4ee0973ab6ace112d14b9">mongo::BtreeLogic::setInternalKey</a></div><div class="ttdeci">void setInternalKey(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int keypos, const DiskLoc recordLoc, const KeyDataType &amp;key, const DiskLoc lchild, const DiskLoc rchild)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1678</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a847298e2e0fc0f411ce04abbbde72e87"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a847298e2e0fc0f411ce04abbbde72e87">mongo::BtreeLogic::_ordering</a></div><div class="ttdeci">Ordering _ordering</div><div class="ttdef"><b>Definition:</b> btree_logic.h:579</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a9f8eeaa5ea907080baa587d96d18016a"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a9f8eeaa5ea907080baa587d96d18016a">mongo::BtreeLogic::wouldCreateDup</a></div><div class="ttdeci">bool wouldCreateDup(OperationContext *opCtx, const KeyDataType &amp;key, const DiskLoc self) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:977</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aaa643502a28ec8d37c7db06647842be0"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aaa643502a28ec8d37c7db06647842be0">mongo::BtreeLogic::getKey</a></div><div class="ttdeci">BSONObj getKey(OperationContext *opCtx, const DiskLoc &amp;bucketLoc, const int keyOffset) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1900</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_af4f1415b3ab7b48e2155cfaf5ea0dedd"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#af4f1415b3ab7b48e2155cfaf5ea0dedd">mongo::BtreeLogic::Builder::_opCtx</a></div><div class="ttdeci">OperationContext * _opCtx</div><div class="ttdef"><b>Definition:</b> btree_logic.h:131</div></div>
<div class="ttc" id="structmongo_1_1BtreeLogic_1_1FullKey_html_a34dffca3ba6540aeb8e32a765676671e"><div class="ttname"><a href="structmongo_1_1BtreeLogic_1_1FullKey.html#a34dffca3ba6540aeb8e32a765676671e">mongo::BtreeLogic::FullKey::data</a></div><div class="ttdeci">KeyDataType data</div><div class="ttdef"><b>Definition:</b> btree_logic.h:285</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_adfa067ea79bae4104fb606401f3acc79"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#adfa067ea79bae4104fb606401f3acc79">mongo::BtreeLogic::indexInParent</a></div><div class="ttdeci">int indexInParent(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1439</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a081c263b90bf01ef14f89e2db0739f78"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a081c263b90bf01ef14f89e2db0739f78">mongo::BtreeLogic::_cursorRegistry</a></div><div class="ttdeci">SavedCursorRegistry * _cursorRegistry</div><div class="ttdef"><b>Definition:</b> btree_logic.h:577</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_abb43d4424727d55d31c39ff7307e9260"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#abb43d4424727d55d31c39ff7307e9260">mongo::BtreeLogic::_unalloc</a></div><div class="ttdeci">static void _unalloc(BucketType *bucket, int bytes)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:307</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ab70aa010baf4859bab9bebdef89cc086"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ab70aa010baf4859bab9bebdef89cc086">mongo::BtreeLogic::split</a></div><div class="ttdeci">void split(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int keypos, const DiskLoc recordLoc, const KeyDataType &amp;key, const DiskLoc lchild, const DiskLoc rchild)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1763</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a7f4432f3cdc08f780e6f339f6c806822"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a7f4432f3cdc08f780e6f339f6c806822">mongo::BtreeLogic::_headManager</a></div><div class="ttdeci">HeadManager * _headManager</div><div class="ttdef"><b>Definition:</b> btree_logic.h:571</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aa4d2da8a2a079745e3542ce90acf9bfb"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aa4d2da8a2a079745e3542ce90acf9bfb">mongo::BtreeLogic::mayDropKey</a></div><div class="ttdeci">static bool mayDropKey(BucketType *bucket, int index, int refPos)</div><div class="ttdoc">With this implementation, refPos == 0 disregards effect of refPos. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:491</div></div>
<div class="ttc" id="namespacemongo_html"><div class="ttname"><a href="namespacemongo.html">mongo</a></div><div class="ttdoc">Copyright (C) 2014 MongoDB Inc. </div><div class="ttdef"><b>Definition:</b> bson_collection_catalog_entry.cpp:38</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a15b46faf02679f143aef0b36f18ba009"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a15b46faf02679f143aef0b36f18ba009">mongo::BtreeLogic::lowWaterMark</a></div><div class="ttdeci">static int lowWaterMark()</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:291</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a24d462f4e0e2d010862dc776ace6f948"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a24d462f4e0e2d010862dc776ace6f948">mongo::BtreeLogic::Builder::Builder</a></div><div class="ttdeci">Builder(BtreeLogic *logic, OperationContext *opCtx, bool dupsAllowed)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:88</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aea94ba3f4fc15de3aa443f48fe3892d3"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aea94ba3f4fc15de3aa443f48fe3892d3">mongo::BtreeLogic::_keyIsAt</a></div><div class="ttdeci">bool _keyIsAt(const BSONObj &amp;savedKey, const DiskLoc &amp;savedLoc, BucketType *bucket, int keyPos) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1177</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a723095238b81634370e36c18b2f1c3de"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a723095238b81634370e36c18b2f1c3de">mongo::BtreeLogic::advance</a></div><div class="ttdeci">void advance(OperationContext *opCtx, DiskLoc *bucketLocInOut, int *posInOut, int direction) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:684</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a07275f1e312c31de44192103267cc879"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a07275f1e312c31de44192103267cc879">mongo::BtreeLogic::getRoot</a></div><div class="ttdeci">BucketType * getRoot(OperationContext *opCtx) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2401</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a5342c281317e32014c07a9c3f5fab512"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a5342c281317e32014c07a9c3f5fab512">mongo::BtreeLogic::keyIsUsed</a></div><div class="ttdeci">bool keyIsUsed(OperationContext *opCtx, const DiskLoc &amp;loc, const int &amp;pos) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2297</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ac29c9a24e9c4753470ea6db35de411d9"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ac29c9a24e9c4753470ea6db35de411d9">mongo::BtreeLogic::KeyDataType</a></div><div class="ttdeci">BtreeLayout::KeyType KeyDataType</div><div class="ttdef"><b>Definition:</b> btree_logic.h:65</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a791dea44584a32fd0e448d5c0e0af91f"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a791dea44584a32fd0e448d5c0e0af91f">mongo::BtreeLogic::pushBack</a></div><div class="ttdeci">bool pushBack(BucketType *bucket, const DiskLoc recordLoc, const KeyDataType &amp;key, const DiskLoc prevChild)</div><div class="ttdoc">Tries to push key into bucket. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:390</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aef6fbbb409d7e91c402ab62f0c820ece"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aef6fbbb409d7e91c402ab62f0c820ece">mongo::BtreeLogic::fullValidate</a></div><div class="ttdeci">long long fullValidate(OperationContext *, long long *unusedCount, bool strict, bool dumpBuckets, unsigned depth) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2023</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a93cbe19fd329531e5ea45c6a0016882c"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a93cbe19fd329531e5ea45c6a0016882c">mongo::BtreeLogic::markUnused</a></div><div class="ttdeci">static void markUnused(BucketType *bucket, int keypos)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:252</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a9d0baaceef14f711732f9cf655daf887"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a9d0baaceef14f711732f9cf655daf887">mongo::BtreeLogic::_recordStore</a></div><div class="ttdeci">RecordStore * _recordStore</div><div class="ttdef"><b>Definition:</b> btree_logic.h:574</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a5464adfd8ca3def7a2eeb6f2de09ae40"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a5464adfd8ca3def7a2eeb6f2de09ae40">mongo::BtreeLogic::getBucket</a></div><div class="ttdeci">BucketType * getBucket(OperationContext *opCtx, const DiskLoc dl) const</div><div class="ttdef"><b>Definition:</b> btree_logic.h:550</div></div>
<div class="ttc" id="btree__interface_8cpp_html_a9deea66b96229c04f597912f85d4d999"><div class="ttname"><a href="btree__interface_8cpp.html#a9deea66b96229c04f597912f85d4d999">key</a></div><div class="ttdeci">BSONObj key</div><div class="ttdef"><b>Definition:</b> btree_interface.cpp:334</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a852b5b36b7b41719065b2b9cf21a3778"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a852b5b36b7b41719065b2b9cf21a3778">mongo::BtreeLogic::mayBalanceWithNeighbors</a></div><div class="ttdeci">bool mayBalanceWithNeighbors(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1589</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a39c16c1676134b2f9ff173ed2875a4d7"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a39c16c1676134b2f9ff173ed2875a4d7">mongo::BtreeLogic::initAsEmpty</a></div><div class="ttdeci">Status initAsEmpty(OperationContext *opCtx)</div><div class="ttdoc">Returns OK if the index was uninitialized before, error status otherwise. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1845</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a177b1c5b3c7f807446f70c937bfc7369"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a177b1c5b3c7f807446f70c937bfc7369">mongo::BtreeLogic::isEmpty</a></div><div class="ttdeci">bool isEmpty(OperationContext *opCtx) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1649</div></div>
<div class="ttc" id="structmongo_1_1BtreeLogic_1_1FullKey_html_a78e51e60e209816c3b2ef1c40e95c3d3"><div class="ttname"><a href="structmongo_1_1BtreeLogic_1_1FullKey.html#a78e51e60e209816c3b2ef1c40e95c3d3">mongo::BtreeLogic::FullKey::header</a></div><div class="ttdeci">const KeyHeaderType &amp; header</div><div class="ttdef"><b>Definition:</b> btree_logic.h:278</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a30f546bdceb965c2f5da6583277f8009"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a30f546bdceb965c2f5da6583277f8009">mongo::BtreeLogic::Builder::_getBucket</a></div><div class="ttdeci">BucketType * _getBucket(DiskLoc loc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:215</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a04e05a35d430f1324cae4c3fb839903d"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a04e05a35d430f1324cae4c3fb839903d">mongo::BtreeLogic::setNotPacked</a></div><div class="ttdeci">static void setNotPacked(BucketType *bucket)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:326</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a911cef0bfbc778f567b080b9dcd30560"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a911cef0bfbc778f567b080b9dcd30560">mongo::BtreeLogic::childForPos</a></div><div class="ttdeci">BucketType * childForPos(OperationContext *opCtx, BucketType *bucket, int pos) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2412</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a4a9e8a0d4e10c766790c2028c5ab1236"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a4a9e8a0d4e10c766790c2028c5ab1236">mongo::BtreeLogic::setPacked</a></div><div class="ttdeci">static void setPacked(BucketType *bucket)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:331</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a7d443a373ec2ed86e134990ef98fd169"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a7d443a373ec2ed86e134990ef98fd169">mongo::BtreeLogic::doMergeChildren</a></div><div class="ttdeci">void doMergeChildren(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int leftIndex)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1394</div></div>
<div class="ttc" id="diskloc_8h_html"><div class="ttname"><a href="diskloc_8h.html">diskloc.h</a></div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_abda46a86cdd93a9396b7eb2bf592fe32"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#abda46a86cdd93a9396b7eb2bf592fe32">mongo::BtreeLogic::splitPos</a></div><div class="ttdeci">static int splitPos(BucketType *bucket, int keypos)</div><div class="ttdoc">In the standard btree algorithm, we would split based on the existing keys and the new key...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:607</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a622661b8c81f2f5965dc3a603f0f5887"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a622661b8c81f2f5965dc3a603f0f5887">mongo::BtreeLogic::newBuilder</a></div><div class="ttdeci">Builder * newBuilder(OperationContext *opCtx, bool dupsAllowed)</div><div class="ttdoc">Caller owns the returned pointer. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:82</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_adc7e7310c1283febc2af977c4754aa83"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#adc7e7310c1283febc2af977c4754aa83">mongo::BtreeLogic::isHead</a></div><div class="ttdeci">static bool isHead(BucketType *bucket)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2381</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a833c72e447f8661f6623f9fe72a1f644"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a833c72e447f8661f6623f9fe72a1f644">mongo::BtreeLogic::_alloc</a></div><div class="ttdeci">static int _alloc(BucketType *bucket, int bytes)</div><div class="ttdoc">We allocate space from the end of the buffer for data. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:316</div></div>
<div class="ttc" id="classmongo_1_1DiskLoc_html"><div class="ttname"><a href="classmongo_1_1DiskLoc.html">mongo::DiskLoc</a></div><div class="ttdoc">represents a disk location/offset on disk in a database. </div><div class="ttdef"><b>Definition:</b> diskloc.h:53</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ab3f05dafbeb351ebac32296a53572255"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ab3f05dafbeb351ebac32296a53572255">mongo::BtreeLogic::advanceToImpl</a></div><div class="ttdeci">void advanceToImpl(OperationContext *opCtx, DiskLoc *thisLocInOut, int *keyOfsInOut, const IndexSeekPoint &amp;seekPoint, int direction) const</div><div class="ttdoc">find smallest/biggest value greater-equal/less-equal than specified </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:722</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a6b2f0d1fef95bfff5c37267ab7435898"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a6b2f0d1fef95bfff5c37267ab7435898">mongo::BtreeLogic::customLocate</a></div><div class="ttdeci">void customLocate(OperationContext *opCtx, DiskLoc *locInOut, int *keyOfsInOut, const IndexSeekPoint &amp;seekPoint, int direction) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:672</div></div>
<div class="ttc" id="classmongo_1_1DiskLoc_html_ac45b365679909f106a20872677344a51"><div class="ttname"><a href="classmongo_1_1DiskLoc.html#ac45b365679909f106a20872677344a51">mongo::DiskLoc::toRecordId</a></div><div class="ttdeci">RecordId toRecordId() const</div><div class="ttdef"><b>Definition:</b> diskloc.h:185</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a9029b266fea3cf0a296c48de06617059"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a9029b266fea3cf0a296c48de06617059">mongo::BtreeLogic::dataAt</a></div><div class="ttdeci">static char * dataAt(BucketType *bucket, short ofs)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:258</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a775c0a13b0bc1475b4008c1d4fb99496"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a775c0a13b0bc1475b4008c1d4fb99496">mongo::BtreeLogic::_delKeyAtPos</a></div><div class="ttdeci">static void _delKeyAtPos(BucketType *bucket, int keypos, bool mayEmpty=false)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:336</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a2c7d869e9ec7394447619df920107478"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a2c7d869e9ec7394447619df920107478">mongo::BtreeLogic::savedCursors</a></div><div class="ttdeci">SavedCursorRegistry * savedCursors() const</div><div class="ttdef"><b>Definition:</b> btree_logic.h:237</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a7b0e345eb0a8e3443bd62acf6643b45e"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a7b0e345eb0a8e3443bd62acf6643b45e">mongo::BtreeLogic::basicInsert</a></div><div class="ttdeci">bool basicInsert(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int &amp;keypos, const KeyDataType &amp;key, const DiskLoc recordLoc)</div><div class="ttdoc">Durability note: </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:436</div></div>
<div class="ttc" id="classmongo_1_1HeadManager_html_ae66fa0cdc0d64157c0ac52e2a6da402f"><div class="ttname"><a href="classmongo_1_1HeadManager.html#ae66fa0cdc0d64157c0ac52e2a6da402f">mongo::HeadManager::getHead</a></div><div class="ttdeci">virtual const RecordId getHead(OperationContext *opCtx) const =0</div></div>
<div class="ttc" id="ephemeral__for__test__record__store__test_8cpp_html_a7b0b6386ed9af4d133c80f6322cc60dc"><div class="ttname"><a href="ephemeral__for__test__record__store__test_8cpp.html#a7b0b6386ed9af4d133c80f6322cc60dc">data</a></div><div class="ttdeci">std::shared_ptr&lt; void &gt; data</div><div class="ttdef"><b>Definition:</b> ephemeral_for_test_record_store_test.cpp:74</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ac2849c3428290e87d9c246caf2ea93d1"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ac2849c3428290e87d9c246caf2ea93d1">mongo::BtreeLogic::insert</a></div><div class="ttdeci">Status insert(OperationContext *opCtx, const BSONObj &amp;rawKey, const DiskLoc &amp;value, bool dupsAllowed)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2151</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a3862849a93cd5c7a6a2cccb4f941e664"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a3862849a93cd5c7a6a2cccb4f941e664">mongo::BtreeLogic::Builder::_logic</a></div><div class="ttdeci">BtreeLogic * _logic</div><div class="ttdef"><b>Definition:</b> btree_logic.h:124</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_af13ac8d9773564bb0cc07105051d8649"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#af13ac8d9773564bb0cc07105051d8649">mongo::BtreeLogic::touch</a></div><div class="ttdeci">Status touch(OperationContext *opCtx) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2018</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a4933441cb102fbd0fe4d2c1f84ca3695"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a4933441cb102fbd0fe4d2c1f84ca3695">mongo::BtreeLogic::doBalanceChildren</a></div><div class="ttdeci">void doBalanceChildren(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int leftIndex)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1562</div></div>
<div class="ttc" id="classmongo_1_1DiskLoc_html_afe469dd5376b6865bab624d3a95ad523"><div class="ttname"><a href="classmongo_1_1DiskLoc.html#afe469dd5376b6865bab624d3a95ad523">mongo::DiskLoc::fromRecordId</a></div><div class="ttdeci">static DiskLoc fromRecordId(RecordId id)</div><div class="ttdef"><b>Definition:</b> diskloc.h:168</div></div>
<div class="ttc" id="index__catalog__entry_8h_html"><div class="ttname"><a href="index__catalog__entry_8h.html">index_catalog_entry.h</a></div></div>
<div class="ttc" id="namespacemongo_html_ac22dc5094e8aebfd46494f3960afbcc3"><div class="ttname"><a href="namespacemongo.html#ac22dc5094e8aebfd46494f3960afbcc3">mongo::Status</a></div><div class="ttdeci">OperationContext Database StringData CollectionOptions bool const BSONObj &amp;idIndex Status</div><div class="ttdef"><b>Definition:</b> database_impl.cpp:955</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a6a2cf2f19839acafcdfe067f073f1c00"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a6a2cf2f19839acafcdfe067f073f1c00">mongo::BtreeLogic::canMergeChildren</a></div><div class="ttdeci">bool canMergeChildren(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, const int leftIndex)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1310</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a605169aa18d5361d814b7cb37e0380f2"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a605169aa18d5361d814b7cb37e0380f2">mongo::BtreeLogic::_packedDataSize</a></div><div class="ttdeci">static int _packedDataSize(BucketType *bucket, int refPos)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:497</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ab829139b0a8c4e4fe5403051bc741b42"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ab829139b0a8c4e4fe5403051bc741b42">mongo::BtreeLogic::delBucket</a></div><div class="ttdeci">void delBucket(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1126</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a938dd93e41eba382a1a36bcd6ae4148a"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a938dd93e41eba382a1a36bcd6ae4148a">mongo::BtreeLogic::getRandomEntry</a></div><div class="ttdeci">IndexKeyEntry getRandomEntry(OperationContext *opCtx) const</div><div class="ttdoc">Returns a pseudo-random element from the tree. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1923</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a9a2a744c7172a443d11d77f502c07223"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a9a2a744c7172a443d11d77f502c07223">mongo::BtreeLogic::dumpBucket</a></div><div class="ttdeci">static void dumpBucket(const BucketType *bucket, int indentLength=0)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1870</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a39eefd07d77e5c057b2048a93b8227ab"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a39eefd07d77e5c057b2048a93b8227ab">mongo::BtreeLogic::Builder::_keyLast</a></div><div class="ttdeci">std::unique_ptr&lt; KeyDataOwnedType &gt; _keyLast</div><div class="ttdef"><b>Definition:</b> btree_logic.h:128</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a5a0c37b798c66bb4b63626c99bd6ec84"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a5a0c37b798c66bb4b63626c99bd6ec84">mongo::BtreeLogic::getRootLoc</a></div><div class="ttdeci">DiskLoc getRootLoc(OperationContext *opCtx) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2407</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a699541b63483b7f86836800eca9830fd"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a699541b63483b7f86836800eca9830fd">mongo::BtreeLogic::_isUnique</a></div><div class="ttdeci">const bool _isUnique</div><div class="ttdef"><b>Definition:</b> btree_logic.h:584</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ab52d3f49ee299f1015a5dc1af9dd3900"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ab52d3f49ee299f1015a5dc1af9dd3900">mongo::BtreeLogic::getHead</a></div><div class="ttdeci">DiskLoc getHead(OperationContext *opCtx) const</div><div class="ttdef"><b>Definition:</b> btree_logic.h:191</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a4cd6020664851c128d8ab52ebda0a1cc"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a4cd6020664851c128d8ab52ebda0a1cc">mongo::BtreeLogic::_rebalancedSeparatorPos</a></div><div class="ttdeci">int _rebalancedSeparatorPos(OperationContext *opCtx, BucketType *bucket, int leftIndex)</div><div class="ttdoc">This implementation must respect the meaning and value of lowWaterMark. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1340</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ab9d956e7d43b44d9e82e93c86eea73e7"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ab9d956e7d43b44d9e82e93c86eea73e7">mongo::BtreeLogic::getDiskLoc</a></div><div class="ttdeci">DiskLoc getDiskLoc(OperationContext *opCtx, const DiskLoc &amp;bucketLoc, const int keyOffset) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1891</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a5615942c6c44ac51bd3287f9fa481eba"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a5615942c6c44ac51bd3287f9fa481eba">mongo::BtreeLogic::deleteInternalKey</a></div><div class="ttdeci">void deleteInternalKey(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int keypos)</div><div class="ttdoc">This function replaces the specified key (k) by either the prev or next key in the btree (k&amp;#39;)...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1253</div></div>
<div class="ttc" id="classmongo_1_1RecordStore_html"><div class="ttname"><a href="classmongo_1_1RecordStore.html">mongo::RecordStore</a></div><div class="ttdoc">An abstraction used for storing documents in a collection or entries in an index. ...</div><div class="ttdef"><b>Definition:</b> record_store.h:282</div></div>
<div class="ttc" id="btree__interface_8cpp_html_ab2e2c4e065770568742b520d2cfc6fb7"><div class="ttname"><a href="btree__interface_8cpp.html#ab2e2c4e065770568742b520d2cfc6fb7">bucket</a></div><div class="ttdeci">DiskLoc bucket</div><div class="ttdef"><b>Definition:</b> btree_interface.cpp:336</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ad9662f4ba0c510de8393f2247740f252"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ad9662f4ba0c510de8393f2247740f252">mongo::BtreeLogic::unindex</a></div><div class="ttdeci">bool unindex(OperationContext *opCtx, const BSONObj &amp;key, const DiskLoc &amp;recordLoc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1632</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aa91a6613bc9da9fb79bac4c43133cf6b"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aa91a6613bc9da9fb79bac4c43133cf6b">mongo::BtreeLogic::isUnique</a></div><div class="ttdeci">bool isUnique() const</div><div class="ttdef"><b>Definition:</b> btree_logic.h:251</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aa1fad264ec0565e58027674e4ea7c6f9"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aa1fad264ec0565e58027674e4ea7c6f9">mongo::BtreeLogic::advanceTo</a></div><div class="ttdeci">void advanceTo(OperationContext *, DiskLoc *thisLocInOut, int *keyOfsInOut, const IndexSeekPoint &amp;seekPoint, int direction) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:703</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ad0c836138663ea013643859a321c9243"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ad0c836138663ea013643859a321c9243">mongo::BtreeLogic::BtreeLogic</a></div><div class="ttdeci">BtreeLogic(HeadManager *head, RecordStore *store, SavedCursorRegistry *cursors, const Ordering &amp;ordering, const std::string &amp;indexName, bool isUnique)</div><div class="ttdoc">&amp;#39;head&amp;#39; manages the catalog information. </div><div class="ttdef"><b>Definition:</b> btree_logic.h:82</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ad0af6b21928a1c31f5b2f719d465465a"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ad0af6b21928a1c31f5b2f719d465465a">mongo::BtreeLogic::getFullKey</a></div><div class="ttdeci">static FullKey getFullKey(const BucketType *bucket, int i)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:226</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a680267f88221e80367df69d9884ce649"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a680267f88221e80367df69d9884ce649">mongo::BtreeLogic::totalDataSize</a></div><div class="ttdeci">static int totalDataSize(BucketType *bucket)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:270</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a82bb9358ee6adeecbc3d64646ae5e9ee"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a82bb9358ee6adeecbc3d64646ae5e9ee">mongo::BtreeLogic::Builder::_rightLeafLoc</a></div><div class="ttdeci">DiskLoc _rightLeafLoc</div><div class="ttdef"><b>Definition:</b> btree_logic.h:126</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a8015bb052304fc99e4c4d845f7e91797"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a8015bb052304fc99e4c4d845f7e91797">mongo::BtreeLogic::popBack</a></div><div class="ttdeci">static void popBack(BucketType *bucket, DiskLoc *recordLocOut, KeyDataType *keyDataOut)</div><div class="ttdoc">Pull rightmost key from the bucket and set its prevChild pointer to be the nextChild for the whole bu...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:363</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a5076fc3ccd26da16d73b7c0a6218bc2c"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a5076fc3ccd26da16d73b7c0a6218bc2c">mongo::BtreeLogic::Builder::KeyDataType</a></div><div class="ttdeci">BtreeLayout::KeyType KeyDataType</div><div class="ttdef"><b>Definition:</b> btree_logic.h:102</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ac9d579080451de5759cff47663e7de05"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ac9d579080451de5759cff47663e7de05">mongo::BtreeLogic::assertValid</a></div><div class="ttdeci">static void assertValid(const std::string &amp;ns, BucketType *bucket, const Ordering &amp;ordering, bool force=false)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2091</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a3193e370cd8fe0f8cc20d4affc99b0f0"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a3193e370cd8fe0f8cc20d4affc99b0f0">mongo::BtreeLogic::Builder::newBucket</a></div><div class="ttdeci">DiskLoc newBucket(BucketType *leftSib, DiskLoc leftSibLoc)</div><div class="ttdoc">Creates and returns a new empty bucket to the right of leftSib, maintaining the internal consistency ...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:164</div></div>
<div class="ttc" id="classmongo_1_1ArtificialTreeBuilder_html"><div class="ttname"><a href="classmongo_1_1ArtificialTreeBuilder.html">mongo::ArtificialTreeBuilder</a></div><div class="ttdoc">Tool to construct custom tree shapes for tests. </div><div class="ttdef"><b>Definition:</b> btree_logic.h:52</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_adba0f7f8b078ceadb2846e6d67bdd3e1"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#adba0f7f8b078ceadb2846e6d67bdd3e1">mongo::BtreeLogic::_fullValidate</a></div><div class="ttdeci">long long _fullValidate(OperationContext *opCtx, const DiskLoc bucketLoc, long long *unusedCount, bool strict, bool dumpBuckets, unsigned depth) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2032</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a9d898992378bc663ce74a42037c655f2"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a9d898992378bc663ce74a42037c655f2">mongo::BtreeLogic::dupKeyError</a></div><div class="ttdeci">std::string dupKeyError(const KeyDataType &amp;key) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1002</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a07c8444952b7bc406743ac3eb343c0a3"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a07c8444952b7bc406743ac3eb343c0a3">mongo::BtreeLogic::BucketType</a></div><div class="ttdeci">BtreeLayout::BucketType BucketType</div><div class="ttdef"><b>Definition:</b> btree_logic.h:74</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a28d12796f209057e740272e627ca9d89"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a28d12796f209057e740272e627ca9d89">mongo::BtreeLogic::_locate</a></div><div class="ttdeci">DiskLoc _locate(OperationContext *opCtx, const DiskLoc &amp;bucketLoc, const KeyDataType &amp;key, int *posOut, bool *foundOut, const DiskLoc &amp;recordLoc, const int direction) const</div><div class="ttdoc">Recursively walk down the btree, looking for a match of key and recordLoc. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2329</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aa5d96fc2d1f8797908182b89ff511bf8"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aa5d96fc2d1f8797908182b89ff511bf8">mongo::BtreeLogic::KeyHeaderType</a></div><div class="ttdeci">BtreeLayout::FixedWidthKeyType KeyHeaderType</div><div class="ttdef"><b>Definition:</b> btree_logic.h:62</div></div>
<div class="ttc" id="index__entry__comparison_8h_html"><div class="ttname"><a href="index__entry__comparison_8h.html">index_entry_comparison.h</a></div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aeba59401755923218413c362a974011a"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aeba59401755923218413c362a974011a">mongo::BtreeLogic::setKey</a></div><div class="ttdeci">static void setKey(BucketType *bucket, int i, const DiskLoc recordLoc, const KeyDataType &amp;key, const DiskLoc prevChildBucket)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:647</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_af9e8953b030dcde584d7719bd1d40430"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#af9e8953b030dcde584d7719bd1d40430">mongo::BtreeLogic::getRecordStore</a></div><div class="ttdeci">const RecordStore * getRecordStore() const</div><div class="ttdef"><b>Definition:</b> btree_logic.h:233</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a6178898a2c0bb5fa425a7d618c37c559"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a6178898a2c0bb5fa425a7d618c37c559">mongo::BtreeLogic::doBalanceRightToLeft</a></div><div class="ttdeci">void doBalanceRightToLeft(OperationContext *opCtx, BucketType *bucket, const DiskLoc thisLoc, int leftIndex, int split, BucketType *l, const DiskLoc lchild, BucketType *r, const DiskLoc rchild)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1518</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_abb4c970f789b8c7d7ad4b78eb03d36e5"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#abb4c970f789b8c7d7ad4b78eb03d36e5">mongo::BtreeLogic::init</a></div><div class="ttdeci">static void init(BucketType *bucket)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:296</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a3f019770c9586e92f02b171a071c4421"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a3f019770c9586e92f02b171a071c4421">mongo::BtreeLogic::KeyDataOwnedType</a></div><div class="ttdeci">BtreeLayout::KeyOwnedType KeyDataOwnedType</div><div class="ttdef"><b>Definition:</b> btree_logic.h:68</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a6abc9608de59766d8a9bddeba9951d31"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a6abc9608de59766d8a9bddeba9951d31">mongo::BtreeLogic::_pack</a></div><div class="ttdeci">void _pack(OperationContext *opCtx, BucketType *bucket, const DiskLoc thisLoc, int &amp;refPos)</div><div class="ttdoc">When we delete things, we just leave empty space until the node is full and then we repack it...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:518</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a9eebc3db54241bbc84b3feed0fea1142"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a9eebc3db54241bbc84b3feed0fea1142">mongo::BtreeLogic::LocType</a></div><div class="ttdeci">BtreeLayout::LocType LocType</div><div class="ttdef"><b>Definition:</b> btree_logic.h:71</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_ae2369e5689640ce4f8416b88f6fa9d91"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#ae2369e5689640ce4f8416b88f6fa9d91">mongo::BtreeLogic::Builder::KeyDataOwnedType</a></div><div class="ttdeci">BtreeLayout::KeyOwnedType KeyDataOwnedType</div><div class="ttdef"><b>Definition:</b> btree_logic.h:101</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a45371d574792f0468f75e58c3cf418ef"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a45371d574792f0468f75e58c3cf418ef">mongo::BtreeLogic::dropFront</a></div><div class="ttdeci">void dropFront(BucketType *bucket, int nDrop, int &amp;refpos)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:662</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a7f9eefeb04e6ad5b6081d8bf3c1a03ed"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a7f9eefeb04e6ad5b6081d8bf3c1a03ed">mongo::BtreeLogic::dupKeyCheck</a></div><div class="ttdeci">Status dupKeyCheck(OperationContext *opCtx, const BSONObj &amp;key, const DiskLoc &amp;loc) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:965</div></div>
<div class="ttc" id="classmongo_1_1HeadManager_html"><div class="ttname"><a href="classmongo_1_1HeadManager.html">mongo::HeadManager</a></div><div class="ttdoc">An abstraction for setting and getting data about the &amp;#39;head&amp;#39; of an index. </div><div class="ttdef"><b>Definition:</b> head_manager.h:41</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a5c8422d20ea50fd8e555b911cdd3b012"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a5c8422d20ea50fd8e555b911cdd3b012">mongo::BtreeLogic::Builder::_dupsAllowed</a></div><div class="ttdeci">bool _dupsAllowed</div><div class="ttdef"><b>Definition:</b> btree_logic.h:127</div></div>
<div class="ttc" id="structmongo_1_1IndexSeekPoint_html"><div class="ttname"><a href="structmongo_1_1IndexSeekPoint.html">mongo::IndexSeekPoint</a></div><div class="ttdoc">Describes a query that can be compared against an IndexKeyEntry in a way that allows expressing exclu...</div><div class="ttdef"><b>Definition:</b> index_entry_comparison.h:104</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html">mongo::BtreeLogic::Builder</a></div><div class="ttdef"><b>Definition:</b> btree_logic.h:99</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a694ff2fc751d8f29592d008774924452"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a694ff2fc751d8f29592d008774924452">mongo::BtreeLogic::customBSONCmp</a></div><div class="ttdeci">int customBSONCmp(const BSONObj &amp;inIndex_left, const IndexSeekPoint &amp;seekPoint_right, int direction) const</div><div class="ttdoc">NOTE: Currently the Ordering implementation assumes a compound index will not have more keys than an ...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:903</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a5ad4b13549c255120d29256863c11f0b"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a5ad4b13549c255120d29256863c11f0b">mongo::BtreeLogic::_find</a></div><div class="ttdeci">Status _find(OperationContext *opCtx, BucketType *bucket, const KeyDataType &amp;key, const DiskLoc &amp;recordLoc, bool errorIfDup, int *keyPositionOut, bool *foundOut) const</div><div class="ttdoc">Find a key within this btree bucket. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1025</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_html_a994dd92aaf257bbb52682fd6935d4313"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder.html#a994dd92aaf257bbb52682fd6935d4313">mongo::BtreeLogic::Builder::addKey</a></div><div class="ttdeci">Status addKey(const BSONObj &amp;key, const DiskLoc &amp;loc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:120</div></div>
<div class="ttc" id="structmongo_1_1IndexKeyEntry_html"><div class="ttname"><a href="structmongo_1_1IndexKeyEntry.html">mongo::IndexKeyEntry</a></div><div class="ttdoc">Represents a single item in an index. </div><div class="ttdef"><b>Definition:</b> index_entry_comparison.h:45</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a551225bcb381bfd76b84d23512d9537b"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a551225bcb381bfd76b84d23512d9537b">mongo::BtreeLogic::deallocBucket</a></div><div class="ttdeci">void deallocBucket(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1140</div></div>
<div class="ttc" id="key_8h_html"><div class="ttname"><a href="key_8h.html">key.h</a></div></div>
<div class="ttc" id="namespacemongo_html_a15b23ef1d9a7f6cdadbf866f1e8e5043"><div class="ttname"><a href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">mongo::opCtx</a></div><div class="ttdeci">Collection *const OperationContext *const opCtx</div><div class="ttdef"><b>Definition:</b> collection_impl.cpp:80</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a7afac1dbac596159f1d922cdb0bc7e74"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a7afac1dbac596159f1d922cdb0bc7e74">mongo::BtreeLogic::skipUnusedKeys</a></div><div class="ttdeci">void skipUnusedKeys(OperationContext *opCtx, DiskLoc *loc, int *pos, int direction) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:693</div></div>
<div class="ttc" id="classmongo_1_1SavedCursorRegistry_html"><div class="ttname"><a href="classmongo_1_1SavedCursorRegistry.html">mongo::SavedCursorRegistry</a></div><div class="ttdoc">Class that stores active cursors that have been saved (as part of yielding) to allow them to be inval...</div><div class="ttdef"><b>Definition:</b> record_store_v1_base.h:104</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ad94cd49eb3eaff25538961a4588e5155"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ad94cd49eb3eaff25538961a4588e5155">mongo::BtreeLogic::_addBucket</a></div><div class="ttdeci">DiskLoc _addBucket(OperationContext *opCtx)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1855</div></div>
<div class="ttc" id="structmongo_1_1BtreeLogic_1_1FullKey_html_a9942008c36bf50d1018c003a1de89f76"><div class="ttname"><a href="structmongo_1_1BtreeLogic_1_1FullKey.html#a9942008c36bf50d1018c003a1de89f76">mongo::BtreeLogic::FullKey::prevChildBucket</a></div><div class="ttdeci">const LocType &amp; prevChildBucket</div><div class="ttdef"><b>Definition:</b> btree_logic.h:281</div></div>
<div class="ttc" id="structmongo_1_1BtreeLogic_1_1FullKey_html"><div class="ttname"><a href="structmongo_1_1BtreeLogic_1_1FullKey.html">mongo::BtreeLogic::FullKey</a></div><div class="ttdoc">This is an in memory wrapper for the variable length data associated with a KeyHeaderType. </div><div class="ttdef"><b>Definition:</b> btree_logic.h:270</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a6dbb3ba2b821a49d1dbb164d9f0719c3"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a6dbb3ba2b821a49d1dbb164d9f0719c3">mongo::BtreeLogic::getKeyHeader</a></div><div class="ttdeci">static KeyHeaderType &amp; getKeyHeader(BucketType *bucket, int i)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:239</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ae8f0a8a350ff9d2e9d19eb4629a0b27a"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ae8f0a8a350ff9d2e9d19eb4629a0b27a">mongo::BtreeLogic::btreemod</a></div><div class="ttdeci">static BucketType * btreemod(OperationContext *opCtx, BucketType *bucket)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:263</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a4a5072d4e2ffe6d976a5542c2201ff01"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a4a5072d4e2ffe6d976a5542c2201ff01">mongo::BtreeLogic::exists</a></div><div class="ttdeci">bool exists(OperationContext *opCtx, const KeyDataType &amp;key) const</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:945</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_ae20519b6244adb662fe5604dbde825bd"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#ae20519b6244adb662fe5604dbde825bd">mongo::BtreeLogic::insertHere</a></div><div class="ttdeci">void insertHere(OperationContext *opCtx, const DiskLoc bucketLoc, int pos, const KeyDataType &amp;key, const DiskLoc recordLoc, const DiskLoc leftChild, const DiskLoc rightChild)</div><div class="ttdoc">insert a key in this bucket, splitting if necessary. </div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1712</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_aa0abecbf7f1bc00c71b3ca8153b7026d"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#aa0abecbf7f1bc00c71b3ca8153b7026d">mongo::BtreeLogic::truncateTo</a></div><div class="ttdeci">void truncateTo(BucketType *bucket, int N, int &amp;refPos)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:585</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_adae15c1448a850bb120f1683b2c13680"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#adae15c1448a850bb120f1683b2c13680">mongo::BtreeLogic::ordering</a></div><div class="ttdeci">Ordering ordering() const</div><div class="ttdef"><b>Definition:</b> btree_logic.h:243</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a87f29aa78367d5d1bcf092bd2166d9a5"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a87f29aa78367d5d1bcf092bd2166d9a5">mongo::BtreeLogic::tryBalanceChildren</a></div><div class="ttdeci">bool tryBalanceChildren(OperationContext *opCtx, BucketType *bucket, const DiskLoc bucketLoc, int leftIndex)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1463</div></div>
<div class="ttc" id="head__manager_8h_html"><div class="ttname"><a href="head__manager_8h.html">head_manager.h</a></div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a2f86d6b940d03eecaeca3937d22fa624"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a2f86d6b940d03eecaeca3937d22fa624">mongo::BtreeLogic::fixParentPtrs</a></div><div class="ttdeci">void fixParentPtrs(OperationContext *trans, BucketType *bucket, const DiskLoc bucketLoc, int firstIndex=0, int lastIndex=-1)</div><div class="ttdoc">This can cause a lot of additional page writes when we assign buckets to different parents...</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:1658</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a8590f5166a7b832c637c6a0e80ceab2f"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a8590f5166a7b832c637c6a0e80ceab2f">mongo::BtreeLogic::childLocForPos</a></div><div class="ttdeci">static LocType &amp; childLocForPos(BucketType *bucket, int pos)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:2419</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_1_1Builder_1_1SetRightLeafLocChange_html"><div class="ttname"><a href="classmongo_1_1BtreeLogic_1_1Builder_1_1SetRightLeafLocChange.html">mongo::BtreeLogic::Builder::SetRightLeafLocChange</a></div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:106</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogicTestBase_html"><div class="ttname"><a href="classmongo_1_1BtreeLogicTestBase.html">mongo::BtreeLogicTestBase</a></div><div class="ttdoc">This class is made friend of BtreeLogic so we can add whatever private method accesses we need to it...</div><div class="ttdef"><b>Definition:</b> btree_logic.h:50</div></div>
<div class="ttc" id="structmongo_1_1BtreeLogic_1_1FullKey_html_a99ee5926aec606553dbc8267a10137f9"><div class="ttname"><a href="structmongo_1_1BtreeLogic_1_1FullKey.html#a99ee5926aec606553dbc8267a10137f9">mongo::BtreeLogic::FullKey::recordLoc</a></div><div class="ttdeci">const LocType &amp; recordLoc</div><div class="ttdef"><b>Definition:</b> btree_logic.h:282</div></div>
<div class="ttc" id="classmongo_1_1BtreeLogic_html_a82b1d293e887a72e935c48119c0042cd"><div class="ttname"><a href="classmongo_1_1BtreeLogic.html#a82b1d293e887a72e935c48119c0042cd">mongo::BtreeLogic::reserveKeysFront</a></div><div class="ttdeci">static void reserveKeysFront(BucketType *bucket, int nAdd)</div><div class="ttdef"><b>Definition:</b> btree_logic.cpp:637</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_dd1d225638daf3f3753df6d6ceaf954c.html">mongo</a></li><li class="navelem"><a class="el" href="dir_68cd4a12641825290eb1b2d05c12b4ee.html">db</a></li><li class="navelem"><a class="el" href="dir_c84aae0d5ddd3c0a024c539b5e839913.html">storage</a></li><li class="navelem"><a class="el" href="dir_899624c236e2d25d178b994f7b1db82e.html">mmap_v1</a></li><li class="navelem"><a class="el" href="dir_6d2dae34d0852878d57e99fbd21fc068.html">btree</a></li><li class="navelem"><a class="el" href="btree__logic_8h.html">btree_logic.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
