<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::IndexConsistency Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmongo_1_1IndexConsistency.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classmongo_1_1IndexConsistency-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::IndexConsistency Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="index__consistency_8h_source.html">index_consistency.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a061647ff8f2c60c1846eb6e2d1ee2622"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a061647ff8f2c60c1846eb6e2d1ee2622">IndexConsistency</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, <a class="el" href="classmongo_1_1Collection.html">Collection</a> *<a class="el" href="namespacemongo.html#a2f403dd8ffd4ee0aee78ea0df01a3e37">collection</a>, NamespaceString nss, <a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a> *<a class="el" href="namespacemongo.html#af6eaf2b9f357aaf25caab666f4da6635">recordStore</a>, std::unique_ptr&lt; <a class="el" href="classmongo_1_1Lock_1_1CollectionLock.html">Lock::CollectionLock</a> &gt; collLk, const bool background)</td></tr>
<tr class="separator:a061647ff8f2c60c1846eb6e2d1ee2622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a420ac890963acf4fda3fe1ab03a7865b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a420ac890963acf4fda3fe1ab03a7865b">addDocKey</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="memdesc:a420ac890963acf4fda3fe1ab03a7865b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper functions for <code>_addDocKey</code>, <code>_removeDocKey</code>, <code>_addIndexKey</code>, and <code>_removeIndexKey</code> for concurrency control.  <a href="#a420ac890963acf4fda3fe1ab03a7865b">More...</a><br /></td></tr>
<tr class="separator:a420ac890963acf4fda3fe1ab03a7865b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae863a5af0eef067e1509e916fcec8dd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#ae863a5af0eef067e1509e916fcec8dd9">removeDocKey</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="separator:ae863a5af0eef067e1509e916fcec8dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54861d24d1b5d165b25cae484a2a582e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a54861d24d1b5d165b25cae484a2a582e">addIndexKey</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="separator:a54861d24d1b5d165b25cae484a2a582e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a64d62ae2e4898566f97d55f95ed6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a15a64d62ae2e4898566f97d55f95ed6e">removeIndexKey</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="separator:a15a64d62ae2e4898566f97d55f95ed6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6449e9b71cff7474662c55b635fb57fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a6449e9b71cff7474662c55b635fb57fb">addLongIndexKey</a> (int indexNumber)</td></tr>
<tr class="memdesc:a6449e9b71cff7474662c55b635fb57fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add one to the <code>_longKeys</code> count for the given <code>indexNs</code>.  <a href="#a6449e9b71cff7474662c55b635fb57fb">More...</a><br /></td></tr>
<tr class="separator:a6449e9b71cff7474662c55b635fb57fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7150e7f00f61970652207d852a4e6e16"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a7150e7f00f61970652207d852a4e6e16">getNumKeys</a> (int indexNumber) const</td></tr>
<tr class="memdesc:a7150e7f00f61970652207d852a4e6e16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of index entries for the given <code>indexNs</code>.  <a href="#a7150e7f00f61970652207d852a4e6e16">More...</a><br /></td></tr>
<tr class="separator:a7150e7f00f61970652207d852a4e6e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcec3db0115cbd6f2b5ac385d2f33fc3"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#afcec3db0115cbd6f2b5ac385d2f33fc3">getNumLongKeys</a> (int indexNumber) const</td></tr>
<tr class="memdesc:afcec3db0115cbd6f2b5ac385d2f33fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of long keys that were not indexed for the given <code>indexNs</code>.  <a href="#afcec3db0115cbd6f2b5ac385d2f33fc3">More...</a><br /></td></tr>
<tr class="separator:afcec3db0115cbd6f2b5ac385d2f33fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4404905043415829257d367a8e7fcee"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#aa4404905043415829257d367a8e7fcee">getNumRecords</a> (int indexNumber) const</td></tr>
<tr class="memdesc:aa4404905043415829257d367a8e7fcee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of records with keys for the given <code>indexNs</code>.  <a href="#aa4404905043415829257d367a8e7fcee">More...</a><br /></td></tr>
<tr class="separator:aa4404905043415829257d367a8e7fcee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a665b9db6fbadcda157f3a8021a6bd6b8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a665b9db6fbadcda157f3a8021a6bd6b8">haveEntryMismatch</a> () const</td></tr>
<tr class="memdesc:a665b9db6fbadcda157f3a8021a6bd6b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if any value in the <code>_indexKeyCount</code> map is not equal to 0, otherwise return false.  <a href="#a665b9db6fbadcda157f3a8021a6bd6b8">More...</a><br /></td></tr>
<tr class="separator:a665b9db6fbadcda157f3a8021a6bd6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5f7b705b6e4f0a1fc5a00d5fbb8f64"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a7c5f7b705b6e4f0a1fc5a00d5fbb8f64">getNumExtraIndexKeys</a> (int indexNumber) const</td></tr>
<tr class="memdesc:a7c5f7b705b6e4f0a1fc5a00d5fbb8f64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index entries may be added or removed by concurrent writes during the index scan phase, after establishing the point of validity.  <a href="#a7c5f7b705b6e4f0a1fc5a00d5fbb8f64">More...</a><br /></td></tr>
<tr class="separator:a7c5f7b705b6e4f0a1fc5a00d5fbb8f64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fa7230650205b52658eae37493411f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a7fa7230650205b52658eae37493411f1">applyChange</a> (const IndexDescriptor *<a class="el" href="namespacemongo.html#ab392e9e94fdd2cbe1a810028244fc9bb">descriptor</a>, const boost::optional&lt; <a class="el" href="structmongo_1_1IndexKeyEntry.html">IndexKeyEntry</a> &gt; &amp;indexEntry, <a class="el" href="namespacemongo.html#a8533723debfefcffd2047cb37c28b9d8">ValidationOperation</a> operation)</td></tr>
<tr class="memdesc:a7fa7230650205b52658eae37493411f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the entry point for the IndexObserver to apply its observed changes while it is listening for changes in the IndexAccessMethod.  <a href="#a7fa7230650205b52658eae37493411f1">More...</a><br /></td></tr>
<tr class="separator:a7fa7230650205b52658eae37493411f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a846d108239eba9ef1c8f4633ae500c8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a846d108239eba9ef1c8f4633ae500c8b">nextStage</a> ()</td></tr>
<tr class="memdesc:a846d108239eba9ef1c8f4633ae500c8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves the <code>_stage</code> variable to the next corresponding stage in the following order: <code>DOCUMENT</code> -&gt; <code>INDEX</code> <code>INDEX</code> -&gt; <code>NONE</code> <code>NONE</code> -&gt; <code>NONE</code>  <a href="#a846d108239eba9ef1c8f4633ae500c8b">More...</a><br /></td></tr>
<tr class="separator:a846d108239eba9ef1c8f4633ae500c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa065511efec1858c6bbf15755fa5130a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ab2e487ba9444b598df7b93827bee1fd7">ValidationStage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#aa065511efec1858c6bbf15755fa5130a">getStage</a> () const</td></tr>
<tr class="memdesc:aa065511efec1858c6bbf15755fa5130a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <code>_stage</code> that the validation is on.  <a href="#aa065511efec1858c6bbf15755fa5130a">More...</a><br /></td></tr>
<tr class="separator:aa065511efec1858c6bbf15755fa5130a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831da9da940bb6d9036d4354b5c14a51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a831da9da940bb6d9036d4354b5c14a51">setLastProcessedRecordId</a> (RecordId recordId)</td></tr>
<tr class="memdesc:a831da9da940bb6d9036d4354b5c14a51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets <code>_lastProcessedRecordId</code> to <code>recordId</code>.  <a href="#a831da9da940bb6d9036d4354b5c14a51">More...</a><br /></td></tr>
<tr class="separator:a831da9da940bb6d9036d4354b5c14a51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6108dfd3364cc200efff87d153bc5cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#ac6108dfd3364cc200efff87d153bc5cc">setLastProcessedIndexEntry</a> (const IndexDescriptor &amp;<a class="el" href="namespacemongo.html#ab392e9e94fdd2cbe1a810028244fc9bb">descriptor</a>, const boost::optional&lt; <a class="el" href="structmongo_1_1IndexKeyEntry.html">IndexKeyEntry</a> &gt; &amp;indexEntry)</td></tr>
<tr class="memdesc:ac6108dfd3364cc200efff87d153bc5cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets <code>_lastProcessedIndexEntry</code> to the <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> of <code>indexEntry</code>.  <a href="#ac6108dfd3364cc200efff87d153bc5cc">More...</a><br /></td></tr>
<tr class="separator:ac6108dfd3364cc200efff87d153bc5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee7eb59c25461868aee0426ea8b527b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a4ee7eb59c25461868aee0426ea8b527b">notifyStartIndex</a> (int indexNumber)</td></tr>
<tr class="memdesc:a4ee7eb59c25461868aee0426ea8b527b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs the <a class="el" href="classmongo_1_1IndexConsistency.html">IndexConsistency</a> instance that the index scan is beginning to scan the index with namespace <code>indexNs</code>.  <a href="#a4ee7eb59c25461868aee0426ea8b527b">More...</a><br /></td></tr>
<tr class="separator:a4ee7eb59c25461868aee0426ea8b527b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae22c6c48bc5c7aae3a17aedf7604ff0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#aae22c6c48bc5c7aae3a17aedf7604ff0">notifyDoneIndex</a> (int indexNumber)</td></tr>
<tr class="memdesc:aae22c6c48bc5c7aae3a17aedf7604ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs the <a class="el" href="classmongo_1_1IndexConsistency.html">IndexConsistency</a> instance that the index scan has finished scanning the index with namespace <code>indexNs</code>.  <a href="#aae22c6c48bc5c7aae3a17aedf7604ff0">More...</a><br /></td></tr>
<tr class="separator:aae22c6c48bc5c7aae3a17aedf7604ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01765df4a3f35fdd15f55122833e0e4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a01765df4a3f35fdd15f55122833e0e4c">getIndexNumber</a> (const std::string &amp;indexNs)</td></tr>
<tr class="memdesc:a01765df4a3f35fdd15f55122833e0e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the index number for the corresponding index namespace's.  <a href="#a01765df4a3f35fdd15f55122833e0e4c">More...</a><br /></td></tr>
<tr class="separator:a01765df4a3f35fdd15f55122833e0e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab84fd5daf5f4a911cbca1082a3020b0a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#ab84fd5daf5f4a911cbca1082a3020b0a">shouldGetNewSnapshot</a> (const RecordId recordId) const</td></tr>
<tr class="memdesc:ab84fd5daf5f4a911cbca1082a3020b0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if a new snapshot should be accquired.  <a href="#ab84fd5daf5f4a911cbca1082a3020b0a">More...</a><br /></td></tr>
<tr class="separator:ab84fd5daf5f4a911cbca1082a3020b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75ceabb4638ae981afc6ebb1f855d5cc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a75ceabb4638ae981afc6ebb1f855d5cc">shouldGetNewSnapshot</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;keyString) const</td></tr>
<tr class="memdesc:a75ceabb4638ae981afc6ebb1f855d5cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if a new snapshot should be accquired.  <a href="#a75ceabb4638ae981afc6ebb1f855d5cc">More...</a><br /></td></tr>
<tr class="separator:a75ceabb4638ae981afc6ebb1f855d5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb71e873eac7787aeb17b589278669e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#aaeb71e873eac7787aeb17b589278669e">relockCollectionWithMode</a> (<a class="el" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> mode)</td></tr>
<tr class="memdesc:aaeb71e873eac7787aeb17b589278669e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives up the lock that the collection is currently held in and requests the the collection again in LockMode <code>mode</code>  <a href="#aaeb71e873eac7787aeb17b589278669e">More...</a><br /></td></tr>
<tr class="separator:aaeb71e873eac7787aeb17b589278669e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45aa08f20d36a14f08f3ae7c66b36ccf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a45aa08f20d36a14f08f3ae7c66b36ccf">scanLimitHit</a> ()</td></tr>
<tr class="memdesc:a45aa08f20d36a14f08f3ae7c66b36ccf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the ElapsedTracker says its time to yield during background validation.  <a href="#a45aa08f20d36a14f08f3ae7c66b36ccf">More...</a><br /></td></tr>
<tr class="separator:a45aa08f20d36a14f08f3ae7c66b36ccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6f822ff8bdfca5996cc1285efe3763f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a6f822ff8bdfca5996cc1285efe3763f5">_addDocKey_inlock</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="memdesc:a6f822ff8bdfca5996cc1285efe3763f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the document's key <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, increment the corresponding <code>_indexKeyCount</code> by hashing it.  <a href="#a6f822ff8bdfca5996cc1285efe3763f5">More...</a><br /></td></tr>
<tr class="separator:a6f822ff8bdfca5996cc1285efe3763f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56363160bfe9f804c95e6d52ae809e87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a56363160bfe9f804c95e6d52ae809e87">_removeDocKey_inlock</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="memdesc:a56363160bfe9f804c95e6d52ae809e87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the document's key <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, decrement the corresponding <code>_indexKeyCount</code> by hashing it.  <a href="#a56363160bfe9f804c95e6d52ae809e87">More...</a><br /></td></tr>
<tr class="separator:a56363160bfe9f804c95e6d52ae809e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338f571780bd1d6d942e80aef6fcfa07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a338f571780bd1d6d942e80aef6fcfa07">_addIndexKey_inlock</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="memdesc:a338f571780bd1d6d942e80aef6fcfa07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the index entry's <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, decrement the corresponding <code>_indexKeyCount</code> by hashing it.  <a href="#a338f571780bd1d6d942e80aef6fcfa07">More...</a><br /></td></tr>
<tr class="separator:a338f571780bd1d6d942e80aef6fcfa07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c9a2fc5e9bf08751277803e9ca5af4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a75c9a2fc5e9bf08751277803e9ca5af4">_removeIndexKey_inlock</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumber)</td></tr>
<tr class="memdesc:a75c9a2fc5e9bf08751277803e9ca5af4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the index entry's <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, increment the corresponding <code>_indexKeyCount</code> by hashing it.  <a href="#a75c9a2fc5e9bf08751277803e9ca5af4">More...</a><br /></td></tr>
<tr class="separator:a75c9a2fc5e9bf08751277803e9ca5af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad713d605dc1ad4bafff6b94067e3d4af"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#ad713d605dc1ad4bafff6b94067e3d4af">_isIndexFinished_inlock</a> (int indexNumber) const</td></tr>
<tr class="memdesc:ad713d605dc1ad4bafff6b94067e3d4af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the index for the given <code>indexNs</code> has finished being scanned by the validation, otherwise it returns false.  <a href="#ad713d605dc1ad4bafff6b94067e3d4af">More...</a><br /></td></tr>
<tr class="separator:ad713d605dc1ad4bafff6b94067e3d4af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb20e7bb618131e3d053ad20d62022ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#adb20e7bb618131e3d053ad20d62022ba">_isIndexScanning_inlock</a> (int indexNumber) const</td></tr>
<tr class="memdesc:adb20e7bb618131e3d053ad20d62022ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this is the current <code>indexNs</code> being scanned by validation, otherwise it returns false.  <a href="#adb20e7bb618131e3d053ad20d62022ba">More...</a><br /></td></tr>
<tr class="separator:adb20e7bb618131e3d053ad20d62022ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0708b62b981ae7462822c054f7fd954c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a0708b62b981ae7462822c054f7fd954c">_setYieldAtRecord_inlock</a> (const RecordId recordId)</td></tr>
<tr class="memdesc:a0708b62b981ae7462822c054f7fd954c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows the IndexObserver to set a yield point at <code>recordId</code> so that during the collection scan we must yield before processing the record.  <a href="#a0708b62b981ae7462822c054f7fd954c">More...</a><br /></td></tr>
<tr class="separator:a0708b62b981ae7462822c054f7fd954c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9921e9c9ceed6041a7c4ae874e16650a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a9921e9c9ceed6041a7c4ae874e16650a">_setYieldAtIndexEntry_inlock</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;keyString)</td></tr>
<tr class="memdesc:a9921e9c9ceed6041a7c4ae874e16650a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows the IndexObserver to set a yield point at the <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> of <code>indexEntry</code> so that during the index scan we must yield before processing the index entry.  <a href="#a9921e9c9ceed6041a7c4ae874e16650a">More...</a><br /></td></tr>
<tr class="separator:a9921e9c9ceed6041a7c4ae874e16650a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3254e90fd3d46fb55ce7d01f4b098f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a2a3254e90fd3d46fb55ce7d01f4b098f">_isBeforeLastProcessedRecordId_inlock</a> (RecordId recordId) const</td></tr>
<tr class="memdesc:a2a3254e90fd3d46fb55ce7d01f4b098f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the <code>recordId</code> is before or equal to the last processed RecordId.  <a href="#a2a3254e90fd3d46fb55ce7d01f4b098f">More...</a><br /></td></tr>
<tr class="separator:a2a3254e90fd3d46fb55ce7d01f4b098f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafcabb5e28df705d0a008dc998315c23"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#aafcabb5e28df705d0a008dc998315c23">_isBeforeLastProcessedIndexEntry_inlock</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;keyString) const</td></tr>
<tr class="memdesc:aafcabb5e28df705d0a008dc998315c23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the <code>keyString</code> is before or equal to the last processed index entry.  <a href="#aafcabb5e28df705d0a008dc998315c23">More...</a><br /></td></tr>
<tr class="separator:aafcabb5e28df705d0a008dc998315c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a800dca134b9b8cb292c47677403cbc89"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a800dca134b9b8cb292c47677403cbc89">_hashKeyString</a> (const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;ks, int indexNumbers) const</td></tr>
<tr class="memdesc:a800dca134b9b8cb292c47677403cbc89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a hashed value from the given <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> and index namespace.  <a href="#a800dca134b9b8cb292c47677403cbc89">More...</a><br /></td></tr>
<tr class="separator:a800dca134b9b8cb292c47677403cbc89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4babdd4be135c664e8f8dec75654f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#a7dd53a44ec884164bc07ed073e9f31da">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a2e4babdd4be135c664e8f8dec75654f4">_throwExceptionIfError</a> ()</td></tr>
<tr class="memdesc:a2e4babdd4be135c664e8f8dec75654f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used alongside <code>yield()</code> and <code><a class="el" href="classmongo_1_1IndexConsistency.html#aaeb71e873eac7787aeb17b589278669e" title="Gives up the lock that the collection is currently held in and requests the the collection again in L...">relockCollectionWithMode()</a></code> to ensure that after the execution of them it is safe to continue validating.  <a href="#a2e4babdd4be135c664e8f8dec75654f4">More...</a><br /></td></tr>
<tr class="separator:a2e4babdd4be135c664e8f8dec75654f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac5c6268e4206e5743914ae90da171741"><td class="memItemLeft" align="right" valign="top">OperationContext *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#ac5c6268e4206e5743914ae90da171741">_opCtx</a></td></tr>
<tr class="separator:ac5c6268e4206e5743914ae90da171741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a466099bc6a2924ed1d0c8e828ff4188b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1Collection.html">Collection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a466099bc6a2924ed1d0c8e828ff4188b">_collection</a></td></tr>
<tr class="separator:a466099bc6a2924ed1d0c8e828ff4188b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33ae3dd08f154be98682fc4bae76b67"><td class="memItemLeft" align="right" valign="top">const NamespaceString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#af33ae3dd08f154be98682fc4bae76b67">_nss</a></td></tr>
<tr class="separator:af33ae3dd08f154be98682fc4bae76b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9beef30f55fdcda5b51d513ec5372e82"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a9beef30f55fdcda5b51d513ec5372e82">_recordStore</a></td></tr>
<tr class="separator:a9beef30f55fdcda5b51d513ec5372e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8052203462e2301ab05bc2e5ea71570a"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classmongo_1_1Lock_1_1CollectionLock.html">Lock::CollectionLock</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a8052203462e2301ab05bc2e5ea71570a">_collLk</a></td></tr>
<tr class="separator:a8052203462e2301ab05bc2e5ea71570a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f8af1f83cff57b5fd11f0bd68bc997"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a49f8af1f83cff57b5fd11f0bd68bc997">_isBackground</a></td></tr>
<tr class="separator:a49f8af1f83cff57b5fd11f0bd68bc997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f459815c44b838f26eb44fa64358e4"><td class="memItemLeft" align="right" valign="top">ElapsedTracker&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a33f459815c44b838f26eb44fa64358e4">_tracker</a></td></tr>
<tr class="separator:a33f459815c44b838f26eb44fa64358e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfecd3ae538d410057b6d259c8bcb11b"><td class="memItemLeft" align="right" valign="top">std::map&lt; uint32_t, uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#abfecd3ae538d410057b6d259c8bcb11b">_indexKeyCount</a></td></tr>
<tr class="separator:abfecd3ae538d410057b6d259c8bcb11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15f23725205b85cb8101f5413660444"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#ad15f23725205b85cb8101f5413660444">_indexNumber</a></td></tr>
<tr class="separator:ad15f23725205b85cb8101f5413660444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a773aed31320b7f554e779504ee23a91d"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, <a class="el" href="structmongo_1_1IndexInfo.html">IndexInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a773aed31320b7f554e779504ee23a91d">_indexesInfo</a></td></tr>
<tr class="separator:a773aed31320b7f554e779504ee23a91d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa308a9809a8ba923de1955927a106d"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; RecordId &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a8aa308a9809a8ba923de1955927a106d">_lastProcessedRecordId</a> = boost::none</td></tr>
<tr class="separator:a8aa308a9809a8ba923de1955927a106d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22f9fabcb06fe8621de36b839fb0628b"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a22f9fabcb06fe8621de36b839fb0628b">_lastProcessedIndexEntry</a> = nullptr</td></tr>
<tr class="separator:a22f9fabcb06fe8621de36b839fb0628b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a279a3c12362f6a23a3e2d611514b8eda"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a279a3c12362f6a23a3e2d611514b8eda">_currentIndex</a> = -1</td></tr>
<tr class="separator:a279a3c12362f6a23a3e2d611514b8eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4eafcaea6dc102eacbb4074e9364c50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#ab2e487ba9444b598df7b93827bee1fd7">ValidationStage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#af4eafcaea6dc102eacbb4074e9364c50">_stage</a> = <a class="el" href="namespacemongo.html#ab2e487ba9444b598df7b93827bee1fd7ac231fa48df3ee393c92dccac4dba5e7d">ValidationStage::DOCUMENT</a></td></tr>
<tr class="separator:af4eafcaea6dc102eacbb4074e9364c50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ada0b6b2ac4bf07167b3ca767b93569"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; RecordId &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a2ada0b6b2ac4bf07167b3ca767b93569">_yieldAtRecordId</a> = boost::none</td></tr>
<tr class="separator:a2ada0b6b2ac4bf07167b3ca767b93569"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa92b4110fcb3d8bda50715f84642749c"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#aa92b4110fcb3d8bda50715f84642749c">_yieldAtIndexEntry</a> = nullptr</td></tr>
<tr class="separator:aa92b4110fcb3d8bda50715f84642749c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a099835096e8825717f881b08ecf53672"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a099835096e8825717f881b08ecf53672">_numErrorsRecorded</a> = 0</td></tr>
<tr class="separator:a099835096e8825717f881b08ecf53672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a402291a18236f77b663b0f4f5b738fc2"><td class="memItemLeft" align="right" valign="top">stdx::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a402291a18236f77b663b0f4f5b738fc2">_classMutex</a></td></tr>
<tr class="separator:a402291a18236f77b663b0f4f5b738fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a65481b32e27fb09daf62aa97acc68c46"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1IndexConsistency.html#a65481b32e27fb09daf62aa97acc68c46">_kErrorThreshold</a> = 100</td></tr>
<tr class="separator:a65481b32e27fb09daf62aa97acc68c46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a061647ff8f2c60c1846eb6e2d1ee2622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a061647ff8f2c60c1846eb6e2d1ee2622">&#9670;&nbsp;</a></span>IndexConsistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::IndexConsistency::IndexConsistency </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1Collection.html">Collection</a> *&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NamespaceString&#160;</td>
          <td class="paramname"><em>nss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a> *&#160;</td>
          <td class="paramname"><em>recordStore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classmongo_1_1Lock_1_1CollectionLock.html">Lock::CollectionLock</a> &gt;&#160;</td>
          <td class="paramname"><em>collLk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>background</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6f822ff8bdfca5996cc1285efe3763f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f822ff8bdfca5996cc1285efe3763f5">&#9670;&nbsp;</a></span>_addDocKey_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::_addDocKey_inlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the document's key <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, increment the corresponding <code>_indexKeyCount</code> by hashing it. </p>

</div>
</div>
<a id="a338f571780bd1d6d942e80aef6fcfa07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338f571780bd1d6d942e80aef6fcfa07">&#9670;&nbsp;</a></span>_addIndexKey_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::_addIndexKey_inlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the index entry's <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, decrement the corresponding <code>_indexKeyCount</code> by hashing it. </p>

</div>
</div>
<a id="a800dca134b9b8cb292c47677403cbc89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a800dca134b9b8cb292c47677403cbc89">&#9670;&nbsp;</a></span>_hashKeyString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mongo::IndexConsistency::_hashKeyString </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumbers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a hashed value from the given <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> and index namespace. </p>

</div>
</div>
<a id="aafcabb5e28df705d0a008dc998315c23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafcabb5e28df705d0a008dc998315c23">&#9670;&nbsp;</a></span>_isBeforeLastProcessedIndexEntry_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::_isBeforeLastProcessedIndexEntry_inlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>keyString</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the <code>keyString</code> is before or equal to the last processed index entry. </p>

</div>
</div>
<a id="a2a3254e90fd3d46fb55ce7d01f4b098f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3254e90fd3d46fb55ce7d01f4b098f">&#9670;&nbsp;</a></span>_isBeforeLastProcessedRecordId_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::_isBeforeLastProcessedRecordId_inlock </td>
          <td>(</td>
          <td class="paramtype">RecordId&#160;</td>
          <td class="paramname"><em>recordId</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the <code>recordId</code> is before or equal to the last processed RecordId. </p>

</div>
</div>
<a id="ad713d605dc1ad4bafff6b94067e3d4af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad713d605dc1ad4bafff6b94067e3d4af">&#9670;&nbsp;</a></span>_isIndexFinished_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::_isIndexFinished_inlock </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the index for the given <code>indexNs</code> has finished being scanned by the validation, otherwise it returns false. </p>

</div>
</div>
<a id="adb20e7bb618131e3d053ad20d62022ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb20e7bb618131e3d053ad20d62022ba">&#9670;&nbsp;</a></span>_isIndexScanning_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::_isIndexScanning_inlock </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if this is the current <code>indexNs</code> being scanned by validation, otherwise it returns false. </p>

</div>
</div>
<a id="a56363160bfe9f804c95e6d52ae809e87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56363160bfe9f804c95e6d52ae809e87">&#9670;&nbsp;</a></span>_removeDocKey_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::_removeDocKey_inlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the document's key <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, decrement the corresponding <code>_indexKeyCount</code> by hashing it. </p>

</div>
</div>
<a id="a75c9a2fc5e9bf08751277803e9ca5af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c9a2fc5e9bf08751277803e9ca5af4">&#9670;&nbsp;</a></span>_removeIndexKey_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::_removeIndexKey_inlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the index entry's <a class="el" href="classmongo_1_1KeyString.html">KeyString</a>, increment the corresponding <code>_indexKeyCount</code> by hashing it. </p>

</div>
</div>
<a id="a9921e9c9ceed6041a7c4ae874e16650a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9921e9c9ceed6041a7c4ae874e16650a">&#9670;&nbsp;</a></span>_setYieldAtIndexEntry_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::_setYieldAtIndexEntry_inlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>keyString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows the IndexObserver to set a yield point at the <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> of <code>indexEntry</code> so that during the index scan we must yield before processing the index entry. </p>
<p>This is a preventive measure so the index scan doesn't scan stale index entries. </p>

</div>
</div>
<a id="a0708b62b981ae7462822c054f7fd954c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0708b62b981ae7462822c054f7fd954c">&#9670;&nbsp;</a></span>_setYieldAtRecord_inlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::_setYieldAtRecord_inlock </td>
          <td>(</td>
          <td class="paramtype">const RecordId&#160;</td>
          <td class="paramname"><em>recordId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows the IndexObserver to set a yield point at <code>recordId</code> so that during the collection scan we must yield before processing the record. </p>
<p>This is a preventive measure so the collection scan doesn't scan stale records. </p>

</div>
</div>
<a id="a2e4babdd4be135c664e8f8dec75654f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4babdd4be135c664e8f8dec75654f4">&#9670;&nbsp;</a></span>_throwExceptionIfError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#a7dd53a44ec884164bc07ed073e9f31da">Status</a> mongo::IndexConsistency::_throwExceptionIfError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used alongside <code>yield()</code> and <code><a class="el" href="classmongo_1_1IndexConsistency.html#aaeb71e873eac7787aeb17b589278669e" title="Gives up the lock that the collection is currently held in and requests the the collection again in L...">relockCollectionWithMode()</a></code> to ensure that after the execution of them it is safe to continue validating. </p>
<p>Validation can be stopped for a number of reasons including: 1) The database was dropped. 2) The collection was dropped. 3) An index was added or removed in the collection being validated. 4) The operation was killed. </p>

</div>
</div>
<a id="a420ac890963acf4fda3fe1ab03a7865b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a420ac890963acf4fda3fe1ab03a7865b">&#9670;&nbsp;</a></span>addDocKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::addDocKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper functions for <code>_addDocKey</code>, <code>_removeDocKey</code>, <code>_addIndexKey</code>, and <code>_removeIndexKey</code> for concurrency control. </p>

</div>
</div>
<a id="a54861d24d1b5d165b25cae484a2a582e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54861d24d1b5d165b25cae484a2a582e">&#9670;&nbsp;</a></span>addIndexKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::addIndexKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6449e9b71cff7474662c55b635fb57fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6449e9b71cff7474662c55b635fb57fb">&#9670;&nbsp;</a></span>addLongIndexKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::addLongIndexKey </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add one to the <code>_longKeys</code> count for the given <code>indexNs</code>. </p>
<p>This is required because index keys &gt; <code>KeyString::kMaxKeyBytes</code> are not indexed. </p>

</div>
</div>
<a id="a7fa7230650205b52658eae37493411f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fa7230650205b52658eae37493411f1">&#9670;&nbsp;</a></span>applyChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::applyChange </td>
          <td>(</td>
          <td class="paramtype">const IndexDescriptor *&#160;</td>
          <td class="paramname"><em>descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::optional&lt; <a class="el" href="structmongo_1_1IndexKeyEntry.html">IndexKeyEntry</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>indexEntry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacemongo.html#a8533723debfefcffd2047cb37c28b9d8">ValidationOperation</a>&#160;</td>
          <td class="paramname"><em>operation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the entry point for the IndexObserver to apply its observed changes while it is listening for changes in the IndexAccessMethod. </p>
<p>This method ensures that during the collection scan stage, inserted, removed and updated documents are reflected in the index key counts. It does this by: 1) Setting the yield point for the collection scan to inform us when we should get a new snapshot so we won't scan stale records. 2) Calling the appropriate <code>addDocKey</code> and <code>removeDocKey</code> functions if the record comes before or equal to our last processed RecordId.</p>
<p>The IndexObserver will call this method while it is observing changes during the index scan stage of the collection validation. It ensures we maintain a pre-image of the indexes since we established the point of validity, which was determined when the collection scan stage completed. It does this by: 1) Setting the yield point for the index scan to inform us when we should get a new snapshot so we won't scan stale index entries. The difference between this and the collection scan is that it will only set the yield point for the index that is currently being scanned, since when we start the next index, we will yield before we begin and we would have the latest snapshot. 2) Calling the appropriate <code>addIndexKey</code> and <code>removeIndexKey</code> functions for indexes that haven't started scanning and are not finished, or they are scanning the index and the index changes are after the last processed index entry. 3) In addition, we maintain the number of external index changes here so that after we finish the index scan, we can remove the extra number of operations that happened after the point of validity. </p>

</div>
</div>
<a id="a01765df4a3f35fdd15f55122833e0e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01765df4a3f35fdd15f55122833e0e4c">&#9670;&nbsp;</a></span>getIndexNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mongo::IndexConsistency::getIndexNumber </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>indexNs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the index number for the corresponding index namespace's. </p>

</div>
</div>
<a id="a7c5f7b705b6e4f0a1fc5a00d5fbb8f64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c5f7b705b6e4f0a1fc5a00d5fbb8f64">&#9670;&nbsp;</a></span>getNumExtraIndexKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t mongo::IndexConsistency::getNumExtraIndexKeys </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Index entries may be added or removed by concurrent writes during the index scan phase, after establishing the point of validity. </p>
<p>We need to account for these additions and removals so that when we validate the index key count, we also have a pre-image of the index counts and won't get incorrect results because of the extra index entries we may or may not have scanned. </p>

</div>
</div>
<a id="a7150e7f00f61970652207d852a4e6e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7150e7f00f61970652207d852a4e6e16">&#9670;&nbsp;</a></span>getNumKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t mongo::IndexConsistency::getNumKeys </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of index entries for the given <code>indexNs</code>. </p>

</div>
</div>
<a id="afcec3db0115cbd6f2b5ac385d2f33fc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcec3db0115cbd6f2b5ac385d2f33fc3">&#9670;&nbsp;</a></span>getNumLongKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t mongo::IndexConsistency::getNumLongKeys </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of long keys that were not indexed for the given <code>indexNs</code>. </p>

</div>
</div>
<a id="aa4404905043415829257d367a8e7fcee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4404905043415829257d367a8e7fcee">&#9670;&nbsp;</a></span>getNumRecords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t mongo::IndexConsistency::getNumRecords </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of records with keys for the given <code>indexNs</code>. </p>

</div>
</div>
<a id="aa065511efec1858c6bbf15755fa5130a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa065511efec1858c6bbf15755fa5130a">&#9670;&nbsp;</a></span>getStage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ab2e487ba9444b598df7b93827bee1fd7">ValidationStage</a> mongo::IndexConsistency::getStage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the <code>_stage</code> that the validation is on. </p>

</div>
</div>
<a id="a665b9db6fbadcda157f3a8021a6bd6b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a665b9db6fbadcda157f3a8021a6bd6b8">&#9670;&nbsp;</a></span>haveEntryMismatch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::haveEntryMismatch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if any value in the <code>_indexKeyCount</code> map is not equal to 0, otherwise return false. </p>

</div>
</div>
<a id="a846d108239eba9ef1c8f4633ae500c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a846d108239eba9ef1c8f4633ae500c8b">&#9670;&nbsp;</a></span>nextStage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::nextStage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Moves the <code>_stage</code> variable to the next corresponding stage in the following order: <code>DOCUMENT</code> -&gt; <code>INDEX</code> <code>INDEX</code> -&gt; <code>NONE</code> <code>NONE</code> -&gt; <code>NONE</code> </p>

</div>
</div>
<a id="aae22c6c48bc5c7aae3a17aedf7604ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae22c6c48bc5c7aae3a17aedf7604ff0">&#9670;&nbsp;</a></span>notifyDoneIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::notifyDoneIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Informs the <a class="el" href="classmongo_1_1IndexConsistency.html">IndexConsistency</a> instance that the index scan has finished scanning the index with namespace <code>indexNs</code>. </p>
<p>This allows us to clean up just like in <code>notifyStartIndex</code> and to set the index to a finished state so that the hooks are prevented from affecting it. </p>

</div>
</div>
<a id="a4ee7eb59c25461868aee0426ea8b527b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ee7eb59c25461868aee0426ea8b527b">&#9670;&nbsp;</a></span>notifyStartIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::notifyStartIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Informs the <a class="el" href="classmongo_1_1IndexConsistency.html">IndexConsistency</a> instance that the index scan is beginning to scan the index with namespace <code>indexNs</code>. </p>
<p>This gives us a chance to clean up after the previous index and setup for the new index. </p>

</div>
</div>
<a id="aaeb71e873eac7787aeb17b589278669e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeb71e873eac7787aeb17b589278669e">&#9670;&nbsp;</a></span>relockCollectionWithMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::relockCollectionWithMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gives up the lock that the collection is currently held in and requests the the collection again in LockMode <code>mode</code> </p>

</div>
</div>
<a id="ae863a5af0eef067e1509e916fcec8dd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae863a5af0eef067e1509e916fcec8dd9">&#9670;&nbsp;</a></span>removeDocKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::removeDocKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a15a64d62ae2e4898566f97d55f95ed6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a64d62ae2e4898566f97d55f95ed6e">&#9670;&nbsp;</a></span>removeIndexKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::removeIndexKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>ks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indexNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a45aa08f20d36a14f08f3ae7c66b36ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45aa08f20d36a14f08f3ae7c66b36ccf">&#9670;&nbsp;</a></span>scanLimitHit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::scanLimitHit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the ElapsedTracker says its time to yield during background validation. </p>

</div>
</div>
<a id="ac6108dfd3364cc200efff87d153bc5cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6108dfd3364cc200efff87d153bc5cc">&#9670;&nbsp;</a></span>setLastProcessedIndexEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::setLastProcessedIndexEntry </td>
          <td>(</td>
          <td class="paramtype">const IndexDescriptor &amp;&#160;</td>
          <td class="paramname"><em>descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::optional&lt; <a class="el" href="structmongo_1_1IndexKeyEntry.html">IndexKeyEntry</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>indexEntry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets <code>_lastProcessedIndexEntry</code> to the <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> of <code>indexEntry</code>. </p>

</div>
</div>
<a id="a831da9da940bb6d9036d4354b5c14a51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a831da9da940bb6d9036d4354b5c14a51">&#9670;&nbsp;</a></span>setLastProcessedRecordId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::IndexConsistency::setLastProcessedRecordId </td>
          <td>(</td>
          <td class="paramtype">RecordId&#160;</td>
          <td class="paramname"><em>recordId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets <code>_lastProcessedRecordId</code> to <code>recordId</code>. </p>

</div>
</div>
<a id="ab84fd5daf5f4a911cbca1082a3020b0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab84fd5daf5f4a911cbca1082a3020b0a">&#9670;&nbsp;</a></span>shouldGetNewSnapshot() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::shouldGetNewSnapshot </td>
          <td>(</td>
          <td class="paramtype">const RecordId&#160;</td>
          <td class="paramname"><em>recordId</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if a new snapshot should be accquired. </p>
<p>If the <code>recordId</code> is equal to or greater than <code>_yieldAtRecordId</code> then we must get a new snapshot otherwise we will use stale data. Otherwise we do not need a new snapshot and can continue with the collection scan. </p>

</div>
</div>
<a id="a75ceabb4638ae981afc6ebb1f855d5cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75ceabb4638ae981afc6ebb1f855d5cc">&#9670;&nbsp;</a></span>shouldGetNewSnapshot() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::IndexConsistency::shouldGetNewSnapshot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1KeyString.html">KeyString</a> &amp;&#160;</td>
          <td class="paramname"><em>keyString</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if a new snapshot should be accquired. </p>
<p>If the <code>keyString</code> is equal to or greater than <code>_yieldAtIndexEntry</code> then we must get a new snapshot otherwise we will use stale data. Otherwise we do not need a new snapshot and can continue with the index scan. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a402291a18236f77b663b0f4f5b738fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a402291a18236f77b663b0f4f5b738fc2">&#9670;&nbsp;</a></span>_classMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">stdx::mutex mongo::IndexConsistency::_classMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a466099bc6a2924ed1d0c8e828ff4188b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a466099bc6a2924ed1d0c8e828ff4188b">&#9670;&nbsp;</a></span>_collection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1Collection.html">Collection</a>* mongo::IndexConsistency::_collection</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8052203462e2301ab05bc2e5ea71570a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8052203462e2301ab05bc2e5ea71570a">&#9670;&nbsp;</a></span>_collLk</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classmongo_1_1Lock_1_1CollectionLock.html">Lock::CollectionLock</a>&gt; mongo::IndexConsistency::_collLk</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a279a3c12362f6a23a3e2d611514b8eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a279a3c12362f6a23a3e2d611514b8eda">&#9670;&nbsp;</a></span>_currentIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mongo::IndexConsistency::_currentIndex = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a773aed31320b7f554e779504ee23a91d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a773aed31320b7f554e779504ee23a91d">&#9670;&nbsp;</a></span>_indexesInfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, <a class="el" href="structmongo_1_1IndexInfo.html">IndexInfo</a>&gt; mongo::IndexConsistency::_indexesInfo</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abfecd3ae538d410057b6d259c8bcb11b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfecd3ae538d410057b6d259c8bcb11b">&#9670;&nbsp;</a></span>_indexKeyCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;uint32_t, uint32_t&gt; mongo::IndexConsistency::_indexKeyCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad15f23725205b85cb8101f5413660444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15f23725205b85cb8101f5413660444">&#9670;&nbsp;</a></span>_indexNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, int&gt; mongo::IndexConsistency::_indexNumber</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a49f8af1f83cff57b5fd11f0bd68bc997"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49f8af1f83cff57b5fd11f0bd68bc997">&#9670;&nbsp;</a></span>_isBackground</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const bool mongo::IndexConsistency::_isBackground</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a65481b32e27fb09daf62aa97acc68c46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65481b32e27fb09daf62aa97acc68c46">&#9670;&nbsp;</a></span>_kErrorThreshold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int mongo::IndexConsistency::_kErrorThreshold = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a22f9fabcb06fe8621de36b839fb0628b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22f9fabcb06fe8621de36b839fb0628b">&#9670;&nbsp;</a></span>_lastProcessedIndexEntry</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classmongo_1_1KeyString.html">KeyString</a>&gt; mongo::IndexConsistency::_lastProcessedIndexEntry = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8aa308a9809a8ba923de1955927a106d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa308a9809a8ba923de1955927a106d">&#9670;&nbsp;</a></span>_lastProcessedRecordId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt;RecordId&gt; mongo::IndexConsistency::_lastProcessedRecordId = boost::none</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af33ae3dd08f154be98682fc4bae76b67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33ae3dd08f154be98682fc4bae76b67">&#9670;&nbsp;</a></span>_nss</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const NamespaceString mongo::IndexConsistency::_nss</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a099835096e8825717f881b08ecf53672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a099835096e8825717f881b08ecf53672">&#9670;&nbsp;</a></span>_numErrorsRecorded</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mongo::IndexConsistency::_numErrorsRecorded = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac5c6268e4206e5743914ae90da171741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5c6268e4206e5743914ae90da171741">&#9670;&nbsp;</a></span>_opCtx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">OperationContext* mongo::IndexConsistency::_opCtx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9beef30f55fdcda5b51d513ec5372e82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9beef30f55fdcda5b51d513ec5372e82">&#9670;&nbsp;</a></span>_recordStore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classmongo_1_1RecordStore.html">RecordStore</a>* mongo::IndexConsistency::_recordStore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af4eafcaea6dc102eacbb4074e9364c50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4eafcaea6dc102eacbb4074e9364c50">&#9670;&nbsp;</a></span>_stage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#ab2e487ba9444b598df7b93827bee1fd7">ValidationStage</a> mongo::IndexConsistency::_stage = <a class="el" href="namespacemongo.html#ab2e487ba9444b598df7b93827bee1fd7ac231fa48df3ee393c92dccac4dba5e7d">ValidationStage::DOCUMENT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a33f459815c44b838f26eb44fa64358e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f459815c44b838f26eb44fa64358e4">&#9670;&nbsp;</a></span>_tracker</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ElapsedTracker mongo::IndexConsistency::_tracker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa92b4110fcb3d8bda50715f84642749c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa92b4110fcb3d8bda50715f84642749c">&#9670;&nbsp;</a></span>_yieldAtIndexEntry</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classmongo_1_1KeyString.html">KeyString</a>&gt; mongo::IndexConsistency::_yieldAtIndexEntry = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ada0b6b2ac4bf07167b3ca767b93569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ada0b6b2ac4bf07167b3ca767b93569">&#9670;&nbsp;</a></span>_yieldAtRecordId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt;RecordId&gt; mongo::IndexConsistency::_yieldAtRecordId = boost::none</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/louis/git/mongo/src/mongo/db/catalog/<a class="el" href="index__consistency_8h_source.html">index_consistency.h</a></li>
<li>/home/louis/git/mongo/src/mongo/db/catalog/<a class="el" href="index__consistency_8cpp.html">index_consistency.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="classmongo_1_1IndexConsistency.html">IndexConsistency</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
