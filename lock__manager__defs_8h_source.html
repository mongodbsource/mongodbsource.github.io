<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: /home/louis/git/mongo/src/mongo/db/concurrency/lock_manager_defs.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lock__manager__defs_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">lock_manager_defs.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="lock__manager__defs_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;mongo/base/static_assert.h&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;mongo/base/string_data.h&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;mongo/config.h&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;mongo/platform/hash_namespace.h&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacemongo.html">mongo</a> {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">class </span>Locker;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">struct </span>LockHead;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">struct </span>PartitionedLockHead;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">   59</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> {</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2baa625d3d8cf5b7d884d2506c3a9d09dc1">   60</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2baa625d3d8cf5b7d884d2506c3a9d09dc1">MODE_NONE</a> = 0,</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba4fffdd33b470c4dfe4834fd76327f8fb">   61</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba4fffdd33b470c4dfe4834fd76327f8fb">MODE_IS</a> = 1,</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2bac0aeb79280a17ebe1e6f01ba38a0ec29">   62</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2bac0aeb79280a17ebe1e6f01ba38a0ec29">MODE_IX</a> = 2,</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba7a4a17a747b40dc48e2c470f2c7c7d83">   63</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba7a4a17a747b40dc48e2c470f2c7c7d83">MODE_S</a> = 3,</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba6d984ecc522de15fa2e83ef33ee799d0">   64</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba6d984ecc522de15fa2e83ef33ee799d0">MODE_X</a> = 4,</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// Counts the lock modes. Used for array size allocations, etc. Always insert new lock</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// modes above this entry.</span></div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2bae3cbd22c799029b567fbd385a9afb14b">   68</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2bae3cbd22c799029b567fbd385a9afb14b">LockModesCount</a></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;};</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacemongo.html#aa5f2b4258cca3a7284d68eb68ec11baa">modeName</a>(<a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> mode);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacemongo.html#a4918c0a465808ce98904cf0ba2f61475">legacyModeName</a>(<a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> mode);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacemongo.html#a3783384d4b616d3039b58029be15ddda">isModeCovered</a>(<a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> mode, <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> coveringMode);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="namespacemongo.html#a2aa94c47a932beab6a228946cf93f3fb">   91</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacemongo.html#a2aa94c47a932beab6a228946cf93f3fb">isSharedLockMode</a>(<a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> mode) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> (mode == <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba4fffdd33b470c4dfe4834fd76327f8fb">MODE_IS</a> || mode == <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba7a4a17a747b40dc48e2c470f2c7c7d83">MODE_S</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2dea">   99</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2dea">LockResult</a> {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaaebc5397e376398fa212601ecf4685594">  104</a></span>&#160;    <a class="code" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaaebc5397e376398fa212601ecf4685594">LOCK_OK</a>,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaabbfff3dcf037e251b15b46121a024aad">  112</a></span>&#160;    <a class="code" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaabbfff3dcf037e251b15b46121a024aad">LOCK_WAITING</a>,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa26f64a8549f1d05660a08f84341951d0">  119</a></span>&#160;    <a class="code" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa26f64a8549f1d05660a08f84341951d0">LOCK_TIMEOUT</a>,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa93cca782c0098556ccb681fbaf14f518">  128</a></span>&#160;    <a class="code" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa93cca782c0098556ccb681fbaf14f518">LOCK_DEADLOCK</a>,</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa286cd96a8ccf4d6ce733429d132a60ff">  133</a></span>&#160;    <a class="code" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa286cd96a8ccf4d6ce733429d132a60ff">LOCK_INVALID</a></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;};</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">  150</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a> {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// Types used for special resources, use with a hash id from ResourceId::SingletonHashIds.</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a171f438190c8bc4132030f98711c1e30">  152</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a171f438190c8bc4132030f98711c1e30">RESOURCE_INVALID</a> = 0,</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83afbc2bb7e421e8f5025217219d91884ad">  153</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83afbc2bb7e421e8f5025217219d91884ad">RESOURCE_GLOBAL</a>,        <span class="comment">// Used for mode changes or global exclusive operations</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a9491ea44a548ddefca2838415eeba5ce">  154</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a9491ea44a548ddefca2838415eeba5ce">RESOURCE_MMAPV1_FLUSH</a>,  <span class="comment">// Necessary only for the MMAPv1 engine</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Generic resources, used for multi-granularity locking, together with RESOURCE_GLOBAL</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a3e059aea36de1747d26d79fa9d9ac077">  157</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a3e059aea36de1747d26d79fa9d9ac077">RESOURCE_DATABASE</a>,</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a84108289fd5254828ebf62c518bce2b8">  158</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a84108289fd5254828ebf62c518bce2b8">RESOURCE_COLLECTION</a>,</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83adfe09fcf306f781b5880b22dc1a1e6de">  159</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83adfe09fcf306f781b5880b22dc1a1e6de">RESOURCE_METADATA</a>,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Resource type used for locking general resources not related to the storage hierarchy.</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a06cb545af6d985dd2739421755f4e19e">  162</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a06cb545af6d985dd2739421755f4e19e">RESOURCE_MUTEX</a>,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// Counts the rest. Always insert new resource types above this entry.</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83aea4dd48d47a1fcb1b578f48b9c53fffd">  165</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83aea4dd48d47a1fcb1b578f48b9c53fffd">ResourceTypesCount</a></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;};</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacemongo.html#a4b546fc4557dd0a620a4705dad8d7547">resourceTypeName</a>(<a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a> resourceType);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html">  176</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a> {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// We only use 3 bits for the resource type in the ResourceId hash</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a8714a157a5f5092e0f0e87f80e4fe718a50b1cee54332ae9470f67da68b4ac06b">  178</a></span>&#160;    <span class="keyword">enum</span> { <a class="code" href="classmongo_1_1ResourceId.html#a8714a157a5f5092e0f0e87f80e4fe718a50b1cee54332ae9470f67da68b4ac06b">resourceTypeBits</a> = 3 };</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classmongo_1_1ResourceId.html#a977ea94f00cff06745cf95557a0f1c64">MONGO_STATIC_ASSERT</a>(<a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83aea4dd48d47a1fcb1b578f48b9c53fffd">ResourceTypesCount</a> &lt;= (1 &lt;&lt; <a class="code" href="classmongo_1_1ResourceId.html#a8714a157a5f5092e0f0e87f80e4fe718a50b1cee54332ae9470f67da68b4ac06b">resourceTypeBits</a>));</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2">  186</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2">SingletonHashIds</a> {</div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2ad9b1e9e6bbe74509f2f69b54ceda4706">  187</a></span>&#160;        <a class="code" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2ad9b1e9e6bbe74509f2f69b54ceda4706">SINGLETON_INVALID</a> = 0,</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a97f498caf24daba46d84ddaeb196ee23">  188</a></span>&#160;        <a class="code" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a97f498caf24daba46d84ddaeb196ee23">SINGLETON_PARALLEL_BATCH_WRITER_MODE</a>,</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a81cda6086df00a68a3e20aaecc7d9300">  189</a></span>&#160;        <a class="code" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a81cda6086df00a68a3e20aaecc7d9300">SINGLETON_GLOBAL</a>,</div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a143a49028e431d49e7f16aa12d37e0af">  190</a></span>&#160;        <a class="code" href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a143a49028e431d49e7f16aa12d37e0af">SINGLETON_MMAPV1_FLUSH</a>,</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    };</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a0e2af181259a870fe10e9e148278d5d4">  193</a></span>&#160;    <a class="code" href="classmongo_1_1ResourceId.html#a0e2af181259a870fe10e9e148278d5d4">ResourceId</a>() : <a class="code" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">_fullHash</a>(0) {}</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classmongo_1_1ResourceId.html#a0e2af181259a870fe10e9e148278d5d4">ResourceId</a>(<a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a> type, StringData <a class="code" href="namespacemongo.html#aa1aad236ca83643ab0718062dd62f4fc">ns</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classmongo_1_1ResourceId.html#a0e2af181259a870fe10e9e148278d5d4">ResourceId</a>(<a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a> type, <span class="keyword">const</span> std::string&amp; ns);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classmongo_1_1ResourceId.html#a0e2af181259a870fe10e9e148278d5d4">ResourceId</a>(<a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a> type, uint64_t hashId);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a300668f7aa8d9dfd7819b8607a22f393">  198</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1ResourceId.html#a300668f7aa8d9dfd7819b8607a22f393">isValid</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1ResourceId.html#a2ebabadaf904c416054908348a08d691">getType</a>() != <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a171f438190c8bc4132030f98711c1e30">RESOURCE_INVALID</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#aa4e90c632dc27f8cfc8b7c6f431a4925">  202</a></span>&#160;    <span class="keyword">operator</span> uint64_t()<span class="keyword"> const </span>{</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">_fullHash</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// This defines the canonical locking order, first by type and then hash id</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a20bef2321a4ee2c43e86254e5ab7280d">  207</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classmongo_1_1ResourceId.html#a20bef2321a4ee2c43e86254e5ab7280d">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a>&amp; rhs)<span class="keyword"> const </span>{</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">_fullHash</a> &lt; rhs.<a class="code" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">_fullHash</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a2ebabadaf904c416054908348a08d691">  211</a></span>&#160;    <a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a> <a class="code" href="classmongo_1_1ResourceId.html#a2ebabadaf904c416054908348a08d691">getType</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a><span class="keyword">&gt;</span>(<a class="code" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">_fullHash</a> &gt;&gt; (64 - <a class="code" href="classmongo_1_1ResourceId.html#a8714a157a5f5092e0f0e87f80e4fe718a50b1cee54332ae9470f67da68b4ac06b">resourceTypeBits</a>));</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a891287f39d8953b6bd13ea3f644878f3">  215</a></span>&#160;    uint64_t <a class="code" href="classmongo_1_1ResourceId.html#a891287f39d8953b6bd13ea3f644878f3">getHashId</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">_fullHash</a> &amp; (std::numeric_limits&lt;uint64_t&gt;::max() &gt;&gt; <a class="code" href="classmongo_1_1ResourceId.html#a8714a157a5f5092e0f0e87f80e4fe718a50b1cee54332ae9470f67da68b4ac06b">resourceTypeBits</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    std::string <a class="code" href="classmongo_1_1ResourceId.html#adb0749433509071bfbbd97903442691e">toString</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">  227</a></span>&#160;    uint64_t <a class="code" href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">_fullHash</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">static</span> uint64_t <a class="code" href="classmongo_1_1ResourceId.html#a77fe710a4a8b66274e515847a2bb1afb">fullHash</a>(<a class="code" href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">ResourceType</a> type, uint64_t hashId);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#ifdef MONGO_CONFIG_DEBUG_BUILD</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// Keep the complete namespace name for debugging purposes (TODO: this will be</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// removed once we are confident in the robustness of the lock manager).</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    std::string _nsCopy;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;};</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#ifndef MONGO_CONFIG_DEBUG_BUILD</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// Treat the resource ids as 64-bit integers in release mode in order to ensure we do</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// not spend too much time doing comparisons for hashing.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<a class="code" href="classmongo_1_1ResourceId.html#a977ea94f00cff06745cf95557a0f1c64">MONGO_STATIC_ASSERT</a>(<span class="keyword">sizeof</span>(<a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a>) == <span class="keyword">sizeof</span>(uint64_t));</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">// Type to uniquely identify a given locker object</span></div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="namespacemongo.html#ad7b6e5bd2d44b9b4fe9031b23492c38a">  246</a></span>&#160;<span class="keyword">typedef</span> uint64_t <a class="code" href="namespacemongo.html#ad7b6e5bd2d44b9b4fe9031b23492c38a">LockerId</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// Hardcoded resource id for the oplog collection, which is special-cased both for resource</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">// acquisition purposes and for statistics reporting.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a> <a class="code" href="namespacemongo.html#a7985744005e3cc2e2d28fcab40d861a3">resourceIdLocalDB</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a> <a class="code" href="namespacemongo.html#a4c01ce2a9e6ccade2336a89b7390246d">resourceIdOplog</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">// Hardcoded resource id for admin db. This is to ensure direct writes to auth collections</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">// are serialized (see SERVER-16092)</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a> <a class="code" href="namespacemongo.html#ad375ede00f114666f11d796fbedf16d4">resourceIdAdminDB</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// Hardcoded resource id for ParallelBatchWriterMode. We use the same resource type</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// as resourceIdGlobal. This will also ensure the waits are reported as global, which</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// is appropriate. The lock will never be contended unless the parallel batch writers</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">// must stop all other accesses globally. This resource must be locked before all other</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">// resources (including resourceIdGlobal). Replication applier threads don&#39;t take this</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">// lock.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">// TODO: Merge this with resourceIdGlobal</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a> <a class="code" href="namespacemongo.html#a431e0c61cd9edeba8400d721b9691be1">resourceIdParallelBatchWriterMode</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classmongo_1_1LockGrantNotification.html">  276</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmongo_1_1LockGrantNotification.html">LockGrantNotification</a> {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classmongo_1_1LockGrantNotification.html#af18e5eb3d432c6a10ade3a2350a5b46d">  278</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classmongo_1_1LockGrantNotification.html#af18e5eb3d432c6a10ade3a2350a5b46d">~LockGrantNotification</a>() {}</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> notify(<a class="code" href="classmongo_1_1ResourceId.html">ResourceId</a> resId, <a class="code" href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2dea">LockResult</a> result) = 0;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;};</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html">  307</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structmongo_1_1LockRequest.html">LockRequest</a> {</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881">  308</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881">Status</a> {</div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881afb09464f60281ead24fb5c0c0a72ee1f">  309</a></span>&#160;        <a class="code" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881afb09464f60281ead24fb5c0c0a72ee1f">STATUS_NEW</a>,</div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881a541cebfc372222b1ed9dff5e52890322">  310</a></span>&#160;        <a class="code" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881a541cebfc372222b1ed9dff5e52890322">STATUS_GRANTED</a>,</div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881a4787f621d422a567feea10ab0d88106e">  311</a></span>&#160;        <a class="code" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881a4787f621d422a567feea10ab0d88106e">STATUS_WAITING</a>,</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881abd1b41f7aecac0529c527ea60570f9c8">  312</a></span>&#160;        <a class="code" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881abd1b41f7aecac0529c527ea60570f9c8">STATUS_CONVERTING</a>,</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">// Counts the rest. Always insert new status types above this entry.</span></div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881a3f755df9be922b0ad2bf615eb273dafc">  315</a></span>&#160;        StatusCount</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    };</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordtype">void</span> initNew(<a class="code" href="classmongo_1_1Locker.html">Locker</a>* <a class="code" href="d__concurrency__bm_8cpp.html#ac7ced5bf0b8d4ffc45f39eb6cf551f75">locker</a>, <a class="code" href="classmongo_1_1LockGrantNotification.html">LockGrantNotification</a>* notify);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// This is the Locker, which created this LockRequest. Pointer is not owned, just referenced.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Must outlive the LockRequest.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// Written at construction time by Locker</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// No synchronization</span></div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#a4df080591101be9dce837887ee463214">  329</a></span>&#160;    <a class="code" href="classmongo_1_1Locker.html">Locker</a>* <a class="code" href="structmongo_1_1LockRequest.html#a4df080591101be9dce837887ee463214">locker</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// Notification to be invoked when the lock is granted. Pointer is not owned, just referenced.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// If a request is in the WAITING or CONVERTING state, must live at least until</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// LockManager::unlock is cancelled or the notification has been invoked.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Written at construction time by Locker</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// Read by LockManager</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// No synchronization</span></div><div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#af30537b644b0986705a38a3f3dfbcdb2">  338</a></span>&#160;    <a class="code" href="classmongo_1_1LockGrantNotification.html">LockGrantNotification</a>* <a class="code" href="structmongo_1_1LockRequest.html#af30537b644b0986705a38a3f3dfbcdb2">notify</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// If the request cannot be granted right away, whether to put it at the front or at the end of</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// the queue. By default, requests are put at the back. If a request is requested to be put at</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// the front, this effectively bypasses fairness. Default is FALSE.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// Written at construction time by Locker</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// No synchronization</span></div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#a8d1ebd56757bc0eb5b90aaddba7e15be">  347</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structmongo_1_1LockRequest.html#a8d1ebd56757bc0eb5b90aaddba7e15be">enqueueAtFront</a>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// When this request is granted and as long as it is on the granted queue, the particular</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// resource&#39;s policy will be changed to &quot;compatibleFirst&quot;. This means that even if there are</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// pending requests on the conflict queue, if a compatible request comes in it will be granted</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// immediately. This effectively turns off fairness.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// Written at construction time by Locker</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// No synchronization</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#ae7b9797515f4ef05c55665355e53743c">  357</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structmongo_1_1LockRequest.html#ae7b9797515f4ef05c55665355e53743c">compatibleFirst</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// When set, an attempt is made to execute this request using partitioned lockheads. This speeds</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// up the common case where all requested locking modes are compatible with each other, at the</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// cost of extra overhead for conflicting modes.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// Written at construction time by LockManager</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// No synchronization</span></div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#a10f0f72979c8cf05381f45e800dc297a">  366</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structmongo_1_1LockRequest.html#a10f0f72979c8cf05381f45e800dc297a">partitioned</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// How many times has LockManager::lock been called for this request. Locks are released when</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// their recursive count drops to zero.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// Written by LockManager on Locker thread</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// Read by LockManager on Locker thread</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// Read by Locker on Locker thread</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// No synchronization</span></div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#a46f03007f0289f84d55ebae72e5e398a">  375</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structmongo_1_1LockRequest.html#a46f03007f0289f84d55ebae72e5e398a">recursiveCount</a>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// Pointer to the lock to which this request belongs, or null if this request has not yet been</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// assigned to a lock or if it belongs to the PartitionedLockHead for locker (in which case</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// partitionedLock must be set). The LockHead should be alive as long as there are LockRequests</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// on it, so it is safe to have this pointer hanging around.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// Written by LockManager on any thread</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// Protected by LockHead bucket&#39;s mutex</span></div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#ae645203eb538ba83644ef64e4e7e7655">  385</a></span>&#160;    <a class="code" href="structmongo_1_1LockHead.html">LockHead</a>* <a class="code" href="structmongo_1_1LockRequest.html#ae645203eb538ba83644ef64e4e7e7655">lock</a>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// Pointer to the partitioned lock to which this request belongs, or null if it is not</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// partitioned. Only one of &#39;lock&#39; and &#39;partitionedLock&#39; is non-NULL, and a request can only</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// transition from &#39;partitionedLock&#39; to &#39;lock&#39;, never the other way around.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Written by LockManager on any thread</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// Protected by LockHead bucket&#39;s mutex</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#a681c705bcc0e87d5fbd42fd2c90cf5ba">  394</a></span>&#160;    <a class="code" href="structmongo_1_1PartitionedLockHead.html">PartitionedLockHead</a>* <a class="code" href="structmongo_1_1LockRequest.html#a681c705bcc0e87d5fbd42fd2c90cf5ba">partitionedLock</a>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// The linked list chain on which this request hangs off the owning lock head. The reason</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// intrusive linked list is used instead of the std::list class is to allow for entries to be</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// removed from the middle of the list in O(1) time, if they are known instead of having to</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// search for them and we cannot persist iterators, because the list can be modified while an</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// iterator is held.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// Written by LockManager on any thread</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// Protected by LockHead bucket&#39;s mutex</span></div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#a62aeea9ca2c6adc2c11a276375f9e7bd">  405</a></span>&#160;    <a class="code" href="structmongo_1_1LockRequest.html">LockRequest</a>* <a class="code" href="structmongo_1_1LockRequest.html#a62aeea9ca2c6adc2c11a276375f9e7bd">prev</a>;</div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aa551a0a437dcab44025b11c6cfb4a1de">  406</a></span>&#160;    <a class="code" href="structmongo_1_1LockRequest.html">LockRequest</a>* <a class="code" href="structmongo_1_1LockRequest.html#aa551a0a437dcab44025b11c6cfb4a1de">next</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// The current status of this request. Always starts at STATUS_NEW.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// Written by LockManager on any thread</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// Protected by LockHead bucket&#39;s mutex</span></div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#ab70c7bb1a4de15f8af6a6685fde8ee72">  413</a></span>&#160;    <a class="code" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881">Status</a> <a class="code" href="structmongo_1_1LockRequest.html#ab70c7bb1a4de15f8af6a6685fde8ee72">status</a>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// If this request is not granted, the mode which has been requested for this lock. If granted,</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// the mode in which it is currently granted.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// Written by LockManager on any thread</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// Protected by LockHead bucket&#39;s mutex</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// Read by Locker on Locker thread</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// It is safe for the Locker to read this without taking the bucket mutex provided that the</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// LockRequest status is not WAITING or CONVERTING.</span></div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#a0e551b2769a13548fd27e26fa70be84a">  424</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> <a class="code" href="structmongo_1_1LockRequest.html#a0e551b2769a13548fd27e26fa70be84a">mode</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// This value is different from MODE_NONE only if a conversion is requested for a lock and that</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// conversion cannot be immediately granted.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// Written by LockManager on any thread</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// Read by LockManager on any thread</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// Protected by LockHead bucket&#39;s mutex</span></div><div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#afae1cd600ff080779142a5c1ab60b299">  432</a></span>&#160;    <a class="code" href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">LockMode</a> <a class="code" href="structmongo_1_1LockRequest.html#afae1cd600ff080779142a5c1ab60b299">convertMode</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// This unsigned represents the number of pending unlocks for this LockRequest. It is greater</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// than 0 when the LockRequest is participating in two-phase lock and unlock() is called on it.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// It can be greater than 1 if this lock is participating in two-phase-lock and has been</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// converted to a different mode that also participates in two-phase-lock. unlock() may be</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// called multiple times on the same resourceId within the same WriteUnitOfWork in this case, so</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// the number of unlocks() to execute at the end of this WUOW is tracked with this unsigned.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// Written by Locker on Locker thread</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// Read by Locker on Locker thread</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// No synchronization</span></div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="structmongo_1_1LockRequest.html#aafee9bfae883c64676b9a5c2b6ff6019">  444</a></span>&#160;    <span class="keywordtype">unsigned</span> unlockPending = 0;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;};</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacemongo.html#a37ccb498d7017c3ebeb45c6b8efba140">lockRequestStatusName</a>(<a class="code" href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881">LockRequest::Status</a> <a class="code" href="namespacemongo.html#a5e47f1aa0a70c0ae88d01561c1d2602f">status</a>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}  <span class="comment">// namespace mongo</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;MONGO_HASH_NAMESPACE_START</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="structhash_3_01mongo_1_1ResourceId_01_4.html">  457</a></span>&#160;<span class="keyword">struct </span>hash&lt;<a class="code" href="namespacemongo.html">mongo</a>::<a class="code" href="classmongo_1_1ResourceId.html#a0e2af181259a870fe10e9e148278d5d4">ResourceId</a>&gt; {</div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="structhash_3_01mongo_1_1ResourceId_01_4.html#a1b0aad5131c248469d165341b1b87ac9">  458</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structhash_3_01mongo_1_1ResourceId_01_4.html#a1b0aad5131c248469d165341b1b87ac9">operator()</a>(<span class="keyword">const</span> <a class="code" href="classmongo_1_1ResourceId.html">mongo::ResourceId</a>&amp; resource)<span class="keyword"> const </span>{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span> resource;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;};</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;MONGO_HASH_NAMESPACE_END</div><div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83">mongo::ResourceType</a></div><div class="ttdeci">ResourceType</div><div class="ttdoc">Hierarchy of resource types. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:150</div></div>
<div class="ttc" id="namespacemongo_html_a7985744005e3cc2e2d28fcab40d861a3"><div class="ttname"><a href="namespacemongo.html#a7985744005e3cc2e2d28fcab40d861a3">mongo::resourceIdLocalDB</a></div><div class="ttdeci">const ResourceId resourceIdLocalDB</div><div class="ttdef"><b>Definition:</b> lock_state.cpp:1107</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_af30537b644b0986705a38a3f3dfbcdb2"><div class="ttname"><a href="structmongo_1_1LockRequest.html#af30537b644b0986705a38a3f3dfbcdb2">mongo::LockRequest::notify</a></div><div class="ttdeci">LockGrantNotification * notify</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:338</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a73ff377e4c10fbe11dc26dedd8f6e6b2"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2">mongo::ResourceId::SingletonHashIds</a></div><div class="ttdeci">SingletonHashIds</div><div class="ttdoc">Assign hash ids for special resources to avoid accidental reuse of ids. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:186</div></div>
<div class="ttc" id="classmongo_1_1Locker_html"><div class="ttname"><a href="classmongo_1_1Locker.html">mongo::Locker</a></div><div class="ttdoc">Interface for acquiring locks. </div><div class="ttdef"><b>Definition:</b> locker.h:47</div></div>
<div class="ttc" id="classmongo_1_1LockGrantNotification_html_af18e5eb3d432c6a10ade3a2350a5b46d"><div class="ttname"><a href="classmongo_1_1LockGrantNotification.html#af18e5eb3d432c6a10ade3a2350a5b46d">mongo::LockGrantNotification::~LockGrantNotification</a></div><div class="ttdeci">virtual ~LockGrantNotification()</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:278</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a8714a157a5f5092e0f0e87f80e4fe718a50b1cee54332ae9470f67da68b4ac06b"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a8714a157a5f5092e0f0e87f80e4fe718a50b1cee54332ae9470f67da68b4ac06b">mongo::ResourceId::resourceTypeBits</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:178</div></div>
<div class="ttc" id="namespacemongo_html_aa1aad236ca83643ab0718062dd62f4fc"><div class="ttname"><a href="namespacemongo.html#aa1aad236ca83643ab0718062dd62f4fc">mongo::ns</a></div><div class="ttdeci">Collection *const const NamespaceString &amp; ns</div><div class="ttdef"><b>Definition:</b> collection_info_cache_impl.cpp:53</div></div>
<div class="ttc" id="classmongo_1_1LockGrantNotification_html"><div class="ttname"><a href="classmongo_1_1LockGrantNotification.html">mongo::LockGrantNotification</a></div><div class="ttdoc">Interface on which granted lock requests will be notified. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:276</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_a0e551b2769a13548fd27e26fa70be84a"><div class="ttname"><a href="structmongo_1_1LockRequest.html#a0e551b2769a13548fd27e26fa70be84a">mongo::LockRequest::mode</a></div><div class="ttdeci">LockMode mode</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:424</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_aea2f369c21f27d4d7c853e308401a881afb09464f60281ead24fb5c0c0a72ee1f"><div class="ttname"><a href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881afb09464f60281ead24fb5c0c0a72ee1f">mongo::LockRequest::STATUS_NEW</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:309</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a977ea94f00cff06745cf95557a0f1c64"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a977ea94f00cff06745cf95557a0f1c64">mongo::ResourceId::MONGO_STATIC_ASSERT</a></div><div class="ttdeci">MONGO_STATIC_ASSERT(ResourceTypesCount&lt;=(1&lt;&lt; resourceTypeBits))</div></div>
<div class="ttc" id="namespacemongo_html"><div class="ttname"><a href="namespacemongo.html">mongo</a></div><div class="ttdoc">Copyright (C) 2014 MongoDB Inc. </div><div class="ttdef"><b>Definition:</b> bson_collection_catalog_entry.cpp:38</div></div>
<div class="ttc" id="namespacemongo_html_a9a3ebc0a91ee78ba95fc1ef18a948a2bac0aeb79280a17ebe1e6f01ba38a0ec29"><div class="ttname"><a href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2bac0aeb79280a17ebe1e6f01ba38a0ec29">mongo::MODE_IX</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:62</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83a9491ea44a548ddefca2838415eeba5ce"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a9491ea44a548ddefca2838415eeba5ce">mongo::RESOURCE_MMAPV1_FLUSH</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:154</div></div>
<div class="ttc" id="namespacemongo_html_ad375ede00f114666f11d796fbedf16d4"><div class="ttname"><a href="namespacemongo.html#ad375ede00f114666f11d796fbedf16d4">mongo::resourceIdAdminDB</a></div><div class="ttdeci">const ResourceId resourceIdAdminDB</div><div class="ttdef"><b>Definition:</b> lock_state.cpp:1109</div></div>
<div class="ttc" id="namespacemongo_html_a9a3ebc0a91ee78ba95fc1ef18a948a2ba4fffdd33b470c4dfe4834fd76327f8fb"><div class="ttname"><a href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba4fffdd33b470c4dfe4834fd76327f8fb">mongo::MODE_IS</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:61</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a20bef2321a4ee2c43e86254e5ab7280d"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a20bef2321a4ee2c43e86254e5ab7280d">mongo::ResourceId::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const ResourceId &amp;rhs) const</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:207</div></div>
<div class="ttc" id="namespacemongo_html_ad7b6e5bd2d44b9b4fe9031b23492c38a"><div class="ttname"><a href="namespacemongo.html#ad7b6e5bd2d44b9b4fe9031b23492c38a">mongo::LockerId</a></div><div class="ttdeci">uint64_t LockerId</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:246</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83a84108289fd5254828ebf62c518bce2b8"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a84108289fd5254828ebf62c518bce2b8">mongo::RESOURCE_COLLECTION</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:158</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83adfe09fcf306f781b5880b22dc1a1e6de"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83adfe09fcf306f781b5880b22dc1a1e6de">mongo::RESOURCE_METADATA</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:159</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a77fe710a4a8b66274e515847a2bb1afb"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a77fe710a4a8b66274e515847a2bb1afb">mongo::ResourceId::fullHash</a></div><div class="ttdeci">static uint64_t fullHash(ResourceType type, uint64_t hashId)</div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:1121</div></div>
<div class="ttc" id="structmongo_1_1LockHead_html"><div class="ttname"><a href="structmongo_1_1LockHead.html">mongo::LockHead</a></div><div class="ttdoc">There is one of these objects for each resource that has a lock request. </div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:140</div></div>
<div class="ttc" id="namespacemongo_html_a4c01ce2a9e6ccade2336a89b7390246d"><div class="ttname"><a href="namespacemongo.html#a4c01ce2a9e6ccade2336a89b7390246d">mongo::resourceIdOplog</a></div><div class="ttdeci">const ResourceId resourceIdOplog</div><div class="ttdef"><b>Definition:</b> lock_state.cpp:1108</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a2ebabadaf904c416054908348a08d691"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a2ebabadaf904c416054908348a08d691">mongo::ResourceId::getType</a></div><div class="ttdeci">ResourceType getType() const</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:211</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_adb0749433509071bfbbd97903442691e"><div class="ttname"><a href="classmongo_1_1ResourceId.html#adb0749433509071bfbbd97903442691e">mongo::ResourceId::toString</a></div><div class="ttdeci">std::string toString() const</div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:1142</div></div>
<div class="ttc" id="namespacemongo_html_af54347edd3ad8dc00c6c27e0816e2deaa286cd96a8ccf4d6ce733429d132a60ff"><div class="ttname"><a href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa286cd96a8ccf4d6ce733429d132a60ff">mongo::LOCK_INVALID</a></div><div class="ttdoc">This is used as an initializer value. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:133</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_a8d1ebd56757bc0eb5b90aaddba7e15be"><div class="ttname"><a href="structmongo_1_1LockRequest.html#a8d1ebd56757bc0eb5b90aaddba7e15be">mongo::LockRequest::enqueueAtFront</a></div><div class="ttdeci">bool enqueueAtFront</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:347</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html"><div class="ttname"><a href="classmongo_1_1ResourceId.html">mongo::ResourceId</a></div><div class="ttdoc">Uniquely identifies a lockable resource. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:176</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_a46f03007f0289f84d55ebae72e5e398a"><div class="ttname"><a href="structmongo_1_1LockRequest.html#a46f03007f0289f84d55ebae72e5e398a">mongo::LockRequest::recursiveCount</a></div><div class="ttdeci">unsigned recursiveCount</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:375</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a73ff377e4c10fbe11dc26dedd8f6e6b2ad9b1e9e6bbe74509f2f69b54ceda4706"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2ad9b1e9e6bbe74509f2f69b54ceda4706">mongo::ResourceId::SINGLETON_INVALID</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:187</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83aea4dd48d47a1fcb1b578f48b9c53fffd"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83aea4dd48d47a1fcb1b578f48b9c53fffd">mongo::ResourceTypesCount</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:165</div></div>
<div class="ttc" id="namespacemongo_html_a2aa94c47a932beab6a228946cf93f3fb"><div class="ttname"><a href="namespacemongo.html#a2aa94c47a932beab6a228946cf93f3fb">mongo::isSharedLockMode</a></div><div class="ttdeci">bool isSharedLockMode(LockMode mode)</div><div class="ttdoc">Returns whether the passed in mode is S or IS. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:91</div></div>
<div class="ttc" id="namespacemongo_html_a5e47f1aa0a70c0ae88d01561c1d2602f"><div class="ttname"><a href="namespacemongo.html#a5e47f1aa0a70c0ae88d01561c1d2602f">mongo::status</a></div><div class="ttdeci">Status status</div><div class="ttdef"><b>Definition:</b> database_impl.cpp:975</div></div>
<div class="ttc" id="namespacemongo_html_a431e0c61cd9edeba8400d721b9691be1"><div class="ttname"><a href="namespacemongo.html#a431e0c61cd9edeba8400d721b9691be1">mongo::resourceIdParallelBatchWriterMode</a></div><div class="ttdeci">const ResourceId resourceIdParallelBatchWriterMode</div><div class="ttdef"><b>Definition:</b> lock_state.cpp:1110</div></div>
<div class="ttc" id="namespacemongo_html_a9a3ebc0a91ee78ba95fc1ef18a948a2ba7a4a17a747b40dc48e2c470f2c7c7d83"><div class="ttname"><a href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba7a4a17a747b40dc48e2c470f2c7c7d83">mongo::MODE_S</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:63</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_aea2f369c21f27d4d7c853e308401a881abd1b41f7aecac0529c527ea60570f9c8"><div class="ttname"><a href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881abd1b41f7aecac0529c527ea60570f9c8">mongo::LockRequest::STATUS_CONVERTING</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:312</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a1dd353d539ca22a0b84d5c64b510f75a"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a1dd353d539ca22a0b84d5c64b510f75a">mongo::ResourceId::_fullHash</a></div><div class="ttdeci">uint64_t _fullHash</div><div class="ttdoc">The top &amp;#39;resourceTypeBits&amp;#39; bits of &amp;#39;_fullHash&amp;#39; represent the resource type, while the remaining bits ...</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:227</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a73ff377e4c10fbe11dc26dedd8f6e6b2a143a49028e431d49e7f16aa12d37e0af"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a143a49028e431d49e7f16aa12d37e0af">mongo::ResourceId::SINGLETON_MMAPV1_FLUSH</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:190</div></div>
<div class="ttc" id="structhash_3_01mongo_1_1ResourceId_01_4_html_a1b0aad5131c248469d165341b1b87ac9"><div class="ttname"><a href="structhash_3_01mongo_1_1ResourceId_01_4.html#a1b0aad5131c248469d165341b1b87ac9">hash&lt; mongo::ResourceId &gt;::operator()</a></div><div class="ttdeci">size_t operator()(const mongo::ResourceId &amp;resource) const</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:458</div></div>
<div class="ttc" id="namespacemongo_html_af54347edd3ad8dc00c6c27e0816e2dea"><div class="ttname"><a href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2dea">mongo::LockResult</a></div><div class="ttdeci">LockResult</div><div class="ttdoc">Return values for the locking functions of the lock manager. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:99</div></div>
<div class="ttc" id="namespacemongo_html_a9a3ebc0a91ee78ba95fc1ef18a948a2b"><div class="ttname"><a href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2b">mongo::LockMode</a></div><div class="ttdeci">LockMode</div><div class="ttdoc">Lock modes. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:59</div></div>
<div class="ttc" id="namespacemongo_html_a4b546fc4557dd0a620a4705dad8d7547"><div class="ttname"><a href="namespacemongo.html#a4b546fc4557dd0a620a4705dad8d7547">mongo::resourceTypeName</a></div><div class="ttdeci">const char * resourceTypeName(ResourceType resourceType)</div><div class="ttdoc">Returns a human-readable name for the specified resource type. </div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:1199</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_ae645203eb538ba83644ef64e4e7e7655"><div class="ttname"><a href="structmongo_1_1LockRequest.html#ae645203eb538ba83644ef64e4e7e7655">mongo::LockRequest::lock</a></div><div class="ttdeci">LockHead * lock</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:385</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_a4df080591101be9dce837887ee463214"><div class="ttname"><a href="structmongo_1_1LockRequest.html#a4df080591101be9dce837887ee463214">mongo::LockRequest::locker</a></div><div class="ttdeci">Locker * locker</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:329</div></div>
<div class="ttc" id="namespacemongo_html_a4918c0a465808ce98904cf0ba2f61475"><div class="ttname"><a href="namespacemongo.html#a4918c0a465808ce98904cf0ba2f61475">mongo::legacyModeName</a></div><div class="ttdeci">const char * legacyModeName(LockMode mode)</div><div class="ttdoc">Legacy lock mode names in parity for 2.6 reports. </div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:1190</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_aea2f369c21f27d4d7c853e308401a881a541cebfc372222b1ed9dff5e52890322"><div class="ttname"><a href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881a541cebfc372222b1ed9dff5e52890322">mongo::LockRequest::STATUS_GRANTED</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:310</div></div>
<div class="ttc" id="namespacemongo_html_a3783384d4b616d3039b58029be15ddda"><div class="ttname"><a href="namespacemongo.html#a3783384d4b616d3039b58029be15ddda">mongo::isModeCovered</a></div><div class="ttdeci">bool isModeCovered(LockMode mode, LockMode coveringMode)</div><div class="ttdoc">Mode A is covered by mode B if the set of conflicts for mode A is a subset of the set of conflicts fo...</div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:1194</div></div>
<div class="ttc" id="d__concurrency__bm_8cpp_html_ac7ced5bf0b8d4ffc45f39eb6cf551f75"><div class="ttname"><a href="d__concurrency__bm_8cpp.html#ac7ced5bf0b8d4ffc45f39eb6cf551f75">locker</a></div><div class="ttdeci">std::array&lt; DefaultLockerImpl, kMaxPerfThreads &gt; locker</div><div class="ttdef"><b>Definition:</b> d_concurrency_bm.cpp:66</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_a62aeea9ca2c6adc2c11a276375f9e7bd"><div class="ttname"><a href="structmongo_1_1LockRequest.html#a62aeea9ca2c6adc2c11a276375f9e7bd">mongo::LockRequest::prev</a></div><div class="ttdeci">LockRequest * prev</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:405</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_aea2f369c21f27d4d7c853e308401a881a4787f621d422a567feea10ab0d88106e"><div class="ttname"><a href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881a4787f621d422a567feea10ab0d88106e">mongo::LockRequest::STATUS_WAITING</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:311</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83a3e059aea36de1747d26d79fa9d9ac077"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a3e059aea36de1747d26d79fa9d9ac077">mongo::RESOURCE_DATABASE</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:157</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a73ff377e4c10fbe11dc26dedd8f6e6b2a81cda6086df00a68a3e20aaecc7d9300"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a81cda6086df00a68a3e20aaecc7d9300">mongo::ResourceId::SINGLETON_GLOBAL</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:189</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_a681c705bcc0e87d5fbd42fd2c90cf5ba"><div class="ttname"><a href="structmongo_1_1LockRequest.html#a681c705bcc0e87d5fbd42fd2c90cf5ba">mongo::LockRequest::partitionedLock</a></div><div class="ttdeci">PartitionedLockHead * partitionedLock</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:394</div></div>
<div class="ttc" id="namespacemongo_html_a37ccb498d7017c3ebeb45c6b8efba140"><div class="ttname"><a href="namespacemongo.html#a37ccb498d7017c3ebeb45c6b8efba140">mongo::lockRequestStatusName</a></div><div class="ttdeci">const char * lockRequestStatusName(LockRequest::Status status)</div><div class="ttdoc">Returns a human readable status name for the specified LockRequest status. </div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:1203</div></div>
<div class="ttc" id="structmongo_1_1PartitionedLockHead_html"><div class="ttname"><a href="structmongo_1_1PartitionedLockHead.html">mongo::PartitionedLockHead</a></div><div class="ttdoc">The PartitionedLockHead allows optimizing the case where requests overwhelmingly use the intent lock ...</div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:352</div></div>
<div class="ttc" id="namespacemongo_html_af54347edd3ad8dc00c6c27e0816e2deaa26f64a8549f1d05660a08f84341951d0"><div class="ttname"><a href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa26f64a8549f1d05660a08f84341951d0">mongo::LOCK_TIMEOUT</a></div><div class="ttdoc">The lock request waited, but timed out before it could be granted. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:119</div></div>
<div class="ttc" id="namespacemongo_html_af54347edd3ad8dc00c6c27e0816e2deaa93cca782c0098556ccb681fbaf14f518"><div class="ttname"><a href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaa93cca782c0098556ccb681fbaf14f518">mongo::LOCK_DEADLOCK</a></div><div class="ttdoc">The lock request was not granted because it would result in a deadlock. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:128</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_aa551a0a437dcab44025b11c6cfb4a1de"><div class="ttname"><a href="structmongo_1_1LockRequest.html#aa551a0a437dcab44025b11c6cfb4a1de">mongo::LockRequest::next</a></div><div class="ttdeci">LockRequest * next</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:406</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_afae1cd600ff080779142a5c1ab60b299"><div class="ttname"><a href="structmongo_1_1LockRequest.html#afae1cd600ff080779142a5c1ab60b299">mongo::LockRequest::convertMode</a></div><div class="ttdeci">LockMode convertMode</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:432</div></div>
<div class="ttc" id="namespacemongo_html_a9a3ebc0a91ee78ba95fc1ef18a948a2baa625d3d8cf5b7d884d2506c3a9d09dc1"><div class="ttname"><a href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2baa625d3d8cf5b7d884d2506c3a9d09dc1">mongo::MODE_NONE</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:60</div></div>
<div class="ttc" id="namespacemongo_html_a9a3ebc0a91ee78ba95fc1ef18a948a2bae3cbd22c799029b567fbd385a9afb14b"><div class="ttname"><a href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2bae3cbd22c799029b567fbd385a9afb14b">mongo::LockModesCount</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:68</div></div>
<div class="ttc" id="namespacemongo_html_af54347edd3ad8dc00c6c27e0816e2deaaebc5397e376398fa212601ecf4685594"><div class="ttname"><a href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaaebc5397e376398fa212601ecf4685594">mongo::LOCK_OK</a></div><div class="ttdoc">The lock request was granted and is now on the granted list for the specified resource. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:104</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_aea2f369c21f27d4d7c853e308401a881"><div class="ttname"><a href="structmongo_1_1LockRequest.html#aea2f369c21f27d4d7c853e308401a881">mongo::LockRequest::Status</a></div><div class="ttdeci">Status</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:308</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a73ff377e4c10fbe11dc26dedd8f6e6b2a97f498caf24daba46d84ddaeb196ee23"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a73ff377e4c10fbe11dc26dedd8f6e6b2a97f498caf24daba46d84ddaeb196ee23">mongo::ResourceId::SINGLETON_PARALLEL_BATCH_WRITER_MODE</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:188</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_a10f0f72979c8cf05381f45e800dc297a"><div class="ttname"><a href="structmongo_1_1LockRequest.html#a10f0f72979c8cf05381f45e800dc297a">mongo::LockRequest::partitioned</a></div><div class="ttdeci">bool partitioned</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:366</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html"><div class="ttname"><a href="structmongo_1_1LockRequest.html">mongo::LockRequest</a></div><div class="ttdoc">There is one of those entries per each request for a lock. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:307</div></div>
<div class="ttc" id="namespacemongo_html_af54347edd3ad8dc00c6c27e0816e2deaabbfff3dcf037e251b15b46121a024aad"><div class="ttname"><a href="namespacemongo.html#af54347edd3ad8dc00c6c27e0816e2deaabbfff3dcf037e251b15b46121a024aad">mongo::LOCK_WAITING</a></div><div class="ttdoc">The lock request was not granted because of conflict. </div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:112</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83a06cb545af6d985dd2739421755f4e19e"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a06cb545af6d985dd2739421755f4e19e">mongo::RESOURCE_MUTEX</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:162</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83a171f438190c8bc4132030f98711c1e30"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83a171f438190c8bc4132030f98711c1e30">mongo::RESOURCE_INVALID</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:152</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a891287f39d8953b6bd13ea3f644878f3"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a891287f39d8953b6bd13ea3f644878f3">mongo::ResourceId::getHashId</a></div><div class="ttdeci">uint64_t getHashId() const</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:215</div></div>
<div class="ttc" id="namespacemongo_html_a75510fa34e6496bad7d7dd32e0db6b83afbc2bb7e421e8f5025217219d91884ad"><div class="ttname"><a href="namespacemongo.html#a75510fa34e6496bad7d7dd32e0db6b83afbc2bb7e421e8f5025217219d91884ad">mongo::RESOURCE_GLOBAL</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:153</div></div>
<div class="ttc" id="namespacemongo_html_aa5f2b4258cca3a7284d68eb68ec11baa"><div class="ttname"><a href="namespacemongo.html#aa5f2b4258cca3a7284d68eb68ec11baa">mongo::modeName</a></div><div class="ttdeci">const char * modeName(LockMode mode)</div><div class="ttdoc">Returns a human-readable name for the specified lock mode. </div><div class="ttdef"><b>Definition:</b> lock_manager.cpp:1186</div></div>
<div class="ttc" id="namespacemongo_html_a9a3ebc0a91ee78ba95fc1ef18a948a2ba6d984ecc522de15fa2e83ef33ee799d0"><div class="ttname"><a href="namespacemongo.html#a9a3ebc0a91ee78ba95fc1ef18a948a2ba6d984ecc522de15fa2e83ef33ee799d0">mongo::MODE_X</a></div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:64</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_ae7b9797515f4ef05c55665355e53743c"><div class="ttname"><a href="structmongo_1_1LockRequest.html#ae7b9797515f4ef05c55665355e53743c">mongo::LockRequest::compatibleFirst</a></div><div class="ttdeci">bool compatibleFirst</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:357</div></div>
<div class="ttc" id="structmongo_1_1LockRequest_html_ab70c7bb1a4de15f8af6a6685fde8ee72"><div class="ttname"><a href="structmongo_1_1LockRequest.html#ab70c7bb1a4de15f8af6a6685fde8ee72">mongo::LockRequest::status</a></div><div class="ttdeci">Status status</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:413</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a0e2af181259a870fe10e9e148278d5d4"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a0e2af181259a870fe10e9e148278d5d4">mongo::ResourceId::ResourceId</a></div><div class="ttdeci">ResourceId()</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:193</div></div>
<div class="ttc" id="classmongo_1_1ResourceId_html_a300668f7aa8d9dfd7819b8607a22f393"><div class="ttname"><a href="classmongo_1_1ResourceId.html#a300668f7aa8d9dfd7819b8607a22f393">mongo::ResourceId::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> lock_manager_defs.h:198</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_dd1d225638daf3f3753df6d6ceaf954c.html">mongo</a></li><li class="navelem"><a class="el" href="dir_68cd4a12641825290eb1b2d05c12b4ee.html">db</a></li><li class="navelem"><a class="el" href="dir_2a65dfe3155d30fcccec428299be281d.html">concurrency</a></li><li class="navelem"><a class="el" href="lock__manager__defs_8h.html">lock_manager_defs.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
