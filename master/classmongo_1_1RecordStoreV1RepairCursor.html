<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Storage Engine API: mongo::RecordStoreV1RepairCursor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="mongodb.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="mongodb-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Storage Engine API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmongo_1_1RecordStoreV1RepairCursor.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classmongo_1_1RecordStoreV1RepairCursor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::RecordStoreV1RepairCursor Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>This iterator will go over the collection twice - once going forward (first extent -&gt; last extent) and once backwards in an attempt to salvage potentially corrupted or unreachable records.  
 <a href="classmongo_1_1RecordStoreV1RepairCursor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="record__store__v1__repair__iterator_8h_source.html">record_store_v1_repair_iterator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mongo::RecordStoreV1RepairCursor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmongo_1_1RecordStoreV1RepairCursor.png" usemap="#mongo::RecordStoreV1RepairCursor_map" alt=""/>
  <map id="mongo::RecordStoreV1RepairCursor_map" name="mongo::RecordStoreV1RepairCursor_map">
<area href="classmongo_1_1RecordCursor.html" title="Retrieves Records from a RecordStore. " alt="mongo::RecordCursor" shape="rect" coords="0,0,218,24"/>
</map>
 </div></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This iterator will go over the collection twice - once going forward (first extent -&gt; last extent) and once backwards in an attempt to salvage potentially corrupted or unreachable records. </p>
<p>It is used by the mongodump &ndash;repair option. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a078d8507aac2ab1701b1260c6dd9079e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a078d8507aac2ab1701b1260c6dd9079e">RecordStoreV1RepairCursor</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const <a class="el" href="classmongo_1_1RecordStoreV1Base.html">RecordStoreV1Base</a> *<a class="el" href="namespacemongo.html#af6eaf2b9f357aaf25caab666f4da6635">recordStore</a>)</td></tr>
<tr class="separator:a078d8507aac2ab1701b1260c6dd9079e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545c5bbae345790f45188ae57ae349a7"><td class="memItemLeft" align="right" valign="top">boost::optional&lt; <a class="el" href="structmongo_1_1Record.html">Record</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a545c5bbae345790f45188ae57ae349a7">next</a> () final</td></tr>
<tr class="memdesc:a545c5bbae345790f45188ae57ae349a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves forward and returns the new data or boost::none if there is no more data.  <a href="#a545c5bbae345790f45188ae57ae349a7">More...</a><br /></td></tr>
<tr class="separator:a545c5bbae345790f45188ae57ae349a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb32658a29a1668cc4a4286ab2d31cbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#acb32658a29a1668cc4a4286ab2d31cbb">invalidate</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>, const RecordId &amp;dl)</td></tr>
<tr class="memdesc:acb32658a29a1668cc4a4286ab2d31cbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform the cursor that this id is being invalidated.  <a href="#acb32658a29a1668cc4a4286ab2d31cbb">More...</a><br /></td></tr>
<tr class="separator:acb32658a29a1668cc4a4286ab2d31cbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c1e2fd4b6d8a1089d26107cc16cfdc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a23c1e2fd4b6d8a1089d26107cc16cfdc">save</a> () final</td></tr>
<tr class="memdesc:a23c1e2fd4b6d8a1089d26107cc16cfdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares for state changes in underlying data in a way that allows the cursor's current position to be restored.  <a href="#a23c1e2fd4b6d8a1089d26107cc16cfdc">More...</a><br /></td></tr>
<tr class="separator:a23c1e2fd4b6d8a1089d26107cc16cfdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10a44baf600853ed24aeb92376dcb0e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a10a44baf600853ed24aeb92376dcb0e6">restore</a> () final</td></tr>
<tr class="memdesc:a10a44baf600853ed24aeb92376dcb0e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recovers from potential state changes in underlying data.  <a href="#a10a44baf600853ed24aeb92376dcb0e6">More...</a><br /></td></tr>
<tr class="separator:a10a44baf600853ed24aeb92376dcb0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237b7836f38e400490d0b31ace18d99d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a237b7836f38e400490d0b31ace18d99d">detachFromOperationContext</a> () final</td></tr>
<tr class="memdesc:a237b7836f38e400490d0b31ace18d99d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches from the OperationContext and releases any storage-engine state.  <a href="#a237b7836f38e400490d0b31ace18d99d">More...</a><br /></td></tr>
<tr class="separator:a237b7836f38e400490d0b31ace18d99d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f806f824f563bd1f2cd307964814887"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a4f806f824f563bd1f2cd307964814887">reattachToOperationContext</a> (OperationContext *<a class="el" href="namespacemongo.html#a15b23ef1d9a7f6cdadbf866f1e8e5043">opCtx</a>) final</td></tr>
<tr class="memdesc:a4f806f824f563bd1f2cd307964814887"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reattaches to the OperationContext and reacquires any storage-engine state.  <a href="#a4f806f824f563bd1f2cd307964814887">More...</a><br /></td></tr>
<tr class="separator:a4f806f824f563bd1f2cd307964814887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmongo_1_1RecordCursor"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmongo_1_1RecordCursor')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classmongo_1_1RecordCursor.html">mongo::RecordCursor</a></td></tr>
<tr class="memitem:a90a8a7aa3b7627f8484a540e0738f17a inherit pub_methods_classmongo_1_1RecordCursor"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#a90a8a7aa3b7627f8484a540e0738f17a">~RecordCursor</a> ()=default</td></tr>
<tr class="separator:a90a8a7aa3b7627f8484a540e0738f17a inherit pub_methods_classmongo_1_1RecordCursor"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c844f7e96de087939afc74a07a663d2 inherit pub_methods_classmongo_1_1RecordCursor"><td class="memItemLeft" align="right" valign="top">virtual std::unique_ptr&lt; <a class="el" href="classmongo_1_1RecordFetcher.html">RecordFetcher</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordCursor.html#a2c844f7e96de087939afc74a07a663d2">fetcherForNext</a> () const</td></tr>
<tr class="memdesc:a2c844f7e96de087939afc74a07a663d2 inherit pub_methods_classmongo_1_1RecordCursor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a <a class="el" href="classmongo_1_1RecordFetcher.html" title="Used for yielding while data is fetched from disk. ">RecordFetcher</a> if needed for a call to <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36" title="Moves forward and returns the new data or boost::none if there is no more data. ">next()</a> or none if unneeded.  <a href="classmongo_1_1RecordCursor.html#a2c844f7e96de087939afc74a07a663d2">More...</a><br /></td></tr>
<tr class="separator:a2c844f7e96de087939afc74a07a663d2 inherit pub_methods_classmongo_1_1RecordCursor"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a892a02be519cadffc0f1490e7a3c66e8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a892a02be519cadffc0f1490e7a3c66e8">Stage</a> { <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a892a02be519cadffc0f1490e7a3c66e8a1f0f256ac8efbafcbfe2fa58cd13d8de">FORWARD_SCAN</a> = 0, 
<a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a892a02be519cadffc0f1490e7a3c66e8ac10253fdfef21cd805631193d3608bad">BACKWARD_SCAN</a> = 1, 
<a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a892a02be519cadffc0f1490e7a3c66e8a4b29798b46d1704ce17cfc795aa7c42c">DONE</a> = 2
 }</td></tr>
<tr class="separator:a892a02be519cadffc0f1490e7a3c66e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af8cf0ebcedac8812c973663ffeed664d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#af8cf0ebcedac8812c973663ffeed664d">advance</a> ()</td></tr>
<tr class="separator:af8cf0ebcedac8812c973663ffeed664d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d43fa143c98b9fe5e3f588b4b4498f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a9d43fa143c98b9fe5e3f588b4b4498f0">_advanceToNextValidExtent</a> ()</td></tr>
<tr class="memdesc:a9d43fa143c98b9fe5e3f588b4b4498f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Based on the direction of scan, finds the next valid (un-corrupted) extent in the chain and sets _currExtent to point to that.  <a href="#a9d43fa143c98b9fe5e3f588b4b4498f0">More...</a><br /></td></tr>
<tr class="separator:a9d43fa143c98b9fe5e3f588b4b4498f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4d8a79e7f4b4991de0e26e8c1e376bcd"><td class="memItemLeft" align="right" valign="top">OperationContext *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a4d8a79e7f4b4991de0e26e8c1e376bcd">_opCtx</a></td></tr>
<tr class="separator:a4d8a79e7f4b4991de0e26e8c1e376bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a789c7df015c5711712ec87ca703d06dd"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classmongo_1_1RecordStoreV1Base.html">RecordStoreV1Base</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a789c7df015c5711712ec87ca703d06dd">_recordStore</a></td></tr>
<tr class="separator:a789c7df015c5711712ec87ca703d06dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a279e478395230e0edcd44973bc722e5c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a279e478395230e0edcd44973bc722e5c">_currExtent</a></td></tr>
<tr class="separator:a279e478395230e0edcd44973bc722e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af56d59a51cddfb56256477e1a192142f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#af56d59a51cddfb56256477e1a192142f">_currRecord</a></td></tr>
<tr class="separator:af56d59a51cddfb56256477e1a192142f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4b09512af236bf55cdcdb0096984116"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a892a02be519cadffc0f1490e7a3c66e8">Stage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#ad4b09512af236bf55cdcdb0096984116">_stage</a></td></tr>
<tr class="separator:ad4b09512af236bf55cdcdb0096984116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa79286c56ef88fa3954376a089d0e362"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#aa79286c56ef88fa3954376a089d0e362">_seenInCurrentExtent</a></td></tr>
<tr class="separator:aa79286c56ef88fa3954376a089d0e362"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a892a02be519cadffc0f1490e7a3c66e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a892a02be519cadffc0f1490e7a3c66e8">&#9670;&nbsp;</a></span>Stage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a892a02be519cadffc0f1490e7a3c66e8">mongo::RecordStoreV1RepairCursor::Stage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a892a02be519cadffc0f1490e7a3c66e8a1f0f256ac8efbafcbfe2fa58cd13d8de"></a>FORWARD_SCAN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a892a02be519cadffc0f1490e7a3c66e8ac10253fdfef21cd805631193d3608bad"></a>BACKWARD_SCAN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a892a02be519cadffc0f1490e7a3c66e8a4b29798b46d1704ce17cfc795aa7c42c"></a>DONE&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a078d8507aac2ab1701b1260c6dd9079e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a078d8507aac2ab1701b1260c6dd9079e">&#9670;&nbsp;</a></span>RecordStoreV1RepairCursor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo::RecordStoreV1RepairCursor::RecordStoreV1RepairCursor </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1RecordStoreV1Base.html">RecordStoreV1Base</a> *&#160;</td>
          <td class="paramname"><em>recordStore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9d43fa143c98b9fe5e3f588b4b4498f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d43fa143c98b9fe5e3f588b4b4498f0">&#9670;&nbsp;</a></span>_advanceToNextValidExtent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::RecordStoreV1RepairCursor::_advanceToNextValidExtent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Based on the direction of scan, finds the next valid (un-corrupted) extent in the chain and sets _currExtent to point to that. </p>
<dl class="section return"><dt>Returns</dt><dd>true if valid extent was found (_currExtent will not be null) false otherwise and _currExtent will be null </dd></dl>

</div>
</div>
<a id="af8cf0ebcedac8812c973663ffeed664d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8cf0ebcedac8812c973663ffeed664d">&#9670;&nbsp;</a></span>advance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordStoreV1RepairCursor::advance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a237b7836f38e400490d0b31ace18d99d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a237b7836f38e400490d0b31ace18d99d">&#9670;&nbsp;</a></span>detachFromOperationContext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordStoreV1RepairCursor::detachFromOperationContext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detaches from the OperationContext and releases any storage-engine state. </p>
<p>It is only legal to call this when in a "saved" state. While in the "detached" state, it is only legal to call reattachToOperationContext or the destructor. It is not legal to call <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a237b7836f38e400490d0b31ace18d99d" title="Detaches from the OperationContext and releases any storage-engine state. ">detachFromOperationContext()</a> while already in the detached state. </p>

<p>Implements <a class="el" href="classmongo_1_1RecordCursor.html#a5a4df2f02d8d65fc3f84290bab898014">mongo::RecordCursor</a>.</p>

</div>
</div>
<a id="acb32658a29a1668cc4a4286ab2d31cbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb32658a29a1668cc4a4286ab2d31cbb">&#9670;&nbsp;</a></span>invalidate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordStoreV1RepairCursor::invalidate </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const RecordId &amp;&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inform the cursor that this id is being invalidated. </p>
<p>Must be called between save and restore. The opCtx is that of the operation causing the invalidation, not the opCtx using the cursor.</p>
<p>WARNING: Storage engines other than MMAPv1 should use the default implementation, and not depend on this being called. </p>

<p>Reimplemented from <a class="el" href="classmongo_1_1RecordCursor.html#ac669ee201e2113f17c2a01883dd39322">mongo::RecordCursor</a>.</p>

</div>
</div>
<a id="a545c5bbae345790f45188ae57ae349a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545c5bbae345790f45188ae57ae349a7">&#9670;&nbsp;</a></span>next()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::optional&lt; <a class="el" href="structmongo_1_1Record.html">Record</a> &gt; mongo::RecordStoreV1RepairCursor::next </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Moves forward and returns the new data or boost::none if there is no more data. </p>
<p>Continues returning boost::none once it reaches EOF. </p>

<p>Implements <a class="el" href="classmongo_1_1RecordCursor.html#ac0f51852cb7de514235f2b944c546d36">mongo::RecordCursor</a>.</p>

</div>
</div>
<a id="a4f806f824f563bd1f2cd307964814887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f806f824f563bd1f2cd307964814887">&#9670;&nbsp;</a></span>reattachToOperationContext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordStoreV1RepairCursor::reattachToOperationContext </td>
          <td>(</td>
          <td class="paramtype">OperationContext *&#160;</td>
          <td class="paramname"><em>opCtx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reattaches to the OperationContext and reacquires any storage-engine state. </p>
<p>It is only legal to call this in the "detached" state. On return, the cursor is left in a "saved" state, so callers must still call restoreState to use this object. </p>

<p>Implements <a class="el" href="classmongo_1_1RecordCursor.html#adfa1c10252601db5043017111f47cf67">mongo::RecordCursor</a>.</p>

</div>
</div>
<a id="a10a44baf600853ed24aeb92376dcb0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10a44baf600853ed24aeb92376dcb0e6">&#9670;&nbsp;</a></span>restore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::RecordStoreV1RepairCursor::restore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recovers from potential state changes in underlying data. </p>
<p>Returns false if it is invalid to continue using this iterator. This usually means that capped deletes have caught up to the position of this iterator and continuing could result in missed data.</p>
<p>If the former position no longer exists, but it is safe to continue iterating, the following call to <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a545c5bbae345790f45188ae57ae349a7" title="Moves forward and returns the new data or boost::none if there is no more data. ">next()</a> will return the next closest position in the direction of the scan, if any.</p>
<p>This handles restoring after either <a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a23c1e2fd4b6d8a1089d26107cc16cfdc" title="Prepares for state changes in underlying data in a way that allows the cursor&#39;s current position to b...">save()</a> or <a class="el" href="classmongo_1_1SeekableRecordCursor.html#a467912b90ef6b2785ec3d3c45204f77d" title="Prepares for state changes in underlying data without necessarily saving the current state...">SeekableRecordCursor::saveUnpositioned()</a>. </p>

<p>Implements <a class="el" href="classmongo_1_1RecordCursor.html#a02cbb295261cf8bd88b81343e39b0924">mongo::RecordCursor</a>.</p>

</div>
</div>
<a id="a23c1e2fd4b6d8a1089d26107cc16cfdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c1e2fd4b6d8a1089d26107cc16cfdc">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacemongo.html#aa639063deea016a1dac8f046e93900a6">void</a> mongo::RecordStoreV1RepairCursor::save </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares for state changes in underlying data in a way that allows the cursor's current position to be restored. </p>
<p>It is safe to call save multiple times in a row. No other method (excluding destructor) may be called until successfully restored. </p>

<p>Implements <a class="el" href="classmongo_1_1RecordCursor.html#a7298f96267a9b2e8fec9a5618b56f854">mongo::RecordCursor</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a279e478395230e0edcd44973bc722e5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a279e478395230e0edcd44973bc722e5c">&#9670;&nbsp;</a></span>_currExtent</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> mongo::RecordStoreV1RepairCursor::_currExtent</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af56d59a51cddfb56256477e1a192142f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af56d59a51cddfb56256477e1a192142f">&#9670;&nbsp;</a></span>_currRecord</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a> mongo::RecordStoreV1RepairCursor::_currRecord</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d8a79e7f4b4991de0e26e8c1e376bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d8a79e7f4b4991de0e26e8c1e376bcd">&#9670;&nbsp;</a></span>_opCtx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">OperationContext* mongo::RecordStoreV1RepairCursor::_opCtx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a789c7df015c5711712ec87ca703d06dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a789c7df015c5711712ec87ca703d06dd">&#9670;&nbsp;</a></span>_recordStore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classmongo_1_1RecordStoreV1Base.html">RecordStoreV1Base</a>* mongo::RecordStoreV1RepairCursor::_recordStore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa79286c56ef88fa3954376a089d0e362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa79286c56ef88fa3954376a089d0e362">&#9670;&nbsp;</a></span>_seenInCurrentExtent</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="classmongo_1_1DiskLoc.html">DiskLoc</a>&gt; mongo::RecordStoreV1RepairCursor::_seenInCurrentExtent</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad4b09512af236bf55cdcdb0096984116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4b09512af236bf55cdcdb0096984116">&#9670;&nbsp;</a></span>_stage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html#a892a02be519cadffc0f1490e7a3c66e8">Stage</a> mongo::RecordStoreV1RepairCursor::_stage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/louis/git/mongo/src/mongo/db/storage/mmap_v1/<a class="el" href="record__store__v1__repair__iterator_8h_source.html">record_store_v1_repair_iterator.h</a></li>
<li>/home/louis/git/mongo/src/mongo/db/storage/mmap_v1/<a class="el" href="record__store__v1__repair__iterator_8cpp.html">record_store_v1_repair_iterator.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="classmongo_1_1RecordStoreV1RepairCursor.html">RecordStoreV1RepairCursor</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
